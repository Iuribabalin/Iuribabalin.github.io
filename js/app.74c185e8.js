(function(){"use strict";var e={1303:function(e,t,l){var a=l(5130),o=l(657),s=l(6768),i=l(2225),r=(l(8111),l(1701),l(3110),l(4232)),n=l(144),u=(l(4603),l(7566),l(8721),l(4373)),c=l(781);const d=u.A.create({baseURL:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_API_URL||"https://owa.my-tg-notes.ru/test/api",timeout:3e4,headers:{"Content-Type":"application/json",Accept:"application/json"}});d.interceptors.request.use(e=>{try{let l=null;try{const e=(0,c.aO)();l=e?.initDataRaw,l&&console.log("[API] Получен initDataRaw через SDK")}catch(t){console.warn("[API] SDK недоступен, используем fallback")}if(!l&&window.Telegram?.WebApp?.initData&&(l=window.Telegram.WebApp.initData,console.log("[API] Получен initData через WebApp.initData")),!l&&window.Telegram?.WebApp?.initDataUnsafe){const e=window.Telegram.WebApp.initDataUnsafe,t=new URLSearchParams;e.user&&t.append("user",JSON.stringify(e.user)),e.auth_date&&t.append("auth_date",e.auth_date),e.hash&&t.append("hash",e.hash),e.chat_instance&&t.append("chat_instance",e.chat_instance),e.chat_type&&t.append("chat_type",e.chat_type),e.start_param&&t.append("start_param",e.start_param),e.query_id&&t.append("query_id",e.query_id),l=t.toString(),console.log("[API] Сформирован initDataRaw из initDataUnsafe")}l?(e.headers.Authorization=`Bearer ${l}`,console.log("[API]",e.method?.toUpperCase(),e.url,"- Authorization установлен")):(console.error("[API] initDataRaw не найден! Проверьте, что приложение запущено из Telegram."),console.error("[API] Telegram.WebApp:",{initData:window.Telegram?.WebApp?.initData?"есть":"нет",initDataUnsafe:window.Telegram?.WebApp?.initDataUnsafe?"есть":"нет"}))}catch(t){console.error("[API] Ошибка при настройке запроса:",t)}return e}),d.interceptors.response.use(e=>(console.log("[API] Успешный ответ:",e.status,e.config.url),e),e=>{if(e.response){const{status:t,data:l}=e.response;console.error("[API] Ошибка ответа:",{status:t,url:e.config?.url,method:e.config?.method,data:l}),401===t?console.error("[API] Ошибка авторизации. Перезапустите приложение из Telegram."):403===t?"/subscription"!==window.location.pathname&&(window.location.href="/subscription"):404===t&&console.error("[API] Страница не найдена")}else e.request?(console.error("[API] Network Error - нет ответа от сервера:",{url:e.config?.url,method:e.config?.method,baseURL:e.config?.baseURL,message:e.message}),"ECONNABORTED"===e.code?console.error("[API] Запрос превысил таймаут"):"ERR_NETWORK"===e.code&&(console.error("[API] Ошибка сети. Возможные причины:"),console.error("  - CORS проблема (сервер не разрешает запросы с этого домена)"),console.error("  - Проблема с SSL сертификатом"),console.error("  - Сервер недоступен"),console.error("  - Неправильный URL:",e.config?.baseURL+e.config?.url))):console.error("[API] Ошибка настройки запроса:",e.message);return Promise.reject(e)});var v=d;const p={key:0,class:"debug-console"},m={class:"d-flex align-center"},b={class:"console-content"},k={class:"log-header"},g={class:"log-time"},y={class:"log-message"},f={key:0,class:"log-url"},h={key:1,class:"log-data"},_={key:0,class:"empty-state"},x={class:"console-content"},F={class:"log-header"},w={class:"log-time"},C={class:"log-message"},E={key:0,class:"log-data"},R={key:0,class:"empty-state"},V={class:"console-content"},P={class:"log-header"},W={class:"log-time"},L={class:"log-message"},X={key:0,class:"empty-state"};var B={__name:"DebugConsole",setup(e){const t=(0,n.KR)(!1),l=(0,n.KR)("errors"),a=(0,n.KR)([]),o=(0,n.KR)([]),i=(0,n.KR)([]),u=(0,n.KR)({show:!1,message:""});let c=null,d=null;const B=e=>new Date(e).toLocaleTimeString("ru-RU"),I=()=>{a.value=[],o.value=[],i.value=[]},T=async e=>{try{await navigator.clipboard.writeText(e),u.value={show:!0,message:"Скопировано в буфер обмена!"},setTimeout(()=>{u.value.show=!1},2e3)}catch(t){console.error("Ошибка при копировании:",t),u.value={show:!0,message:"Ошибка при копировании"},setTimeout(()=>{u.value.show=!1},2e3)}},A=async(e,t)=>{const l=JSON.stringify({timestamp:new Date(e.timestamp).toISOString(),message:e.message,method:e.method,url:e.url,data:e.data},null,2);await T(l)},K=async(e,t)=>{const l=JSON.stringify({timestamp:new Date(e.timestamp).toISOString(),method:e.method,url:e.url,status:e.status,response:e.response},null,2);await T(l)},U=async(e,t)=>{const l=JSON.stringify({timestamp:new Date(e.timestamp).toISOString(),message:e.message},null,2);await T(l)},S=e=>{a.value.unshift({timestamp:Date.now(),message:e.message||"Неизвестная ошибка",url:e.config?.url,method:e.config?.method?.toUpperCase(),data:e.response?.data||e.message}),a.value.length>50&&(a.value=a.value.slice(0,50))},D=e=>{const t={timestamp:Date.now(),method:e.method?.toUpperCase(),url:e.url,status:null,response:null};return o.value.unshift(t),o.value.length>100&&(o.value=o.value.slice(0,100)),t},O=(e,t)=>{e.status=t.status,e.response=t.data};return(0,s.sV)(()=>{c=v.interceptors.request.use(e=>{const t=D(e);return e._debugRequest=t,e}),d=v.interceptors.response.use(e=>(e.config._debugRequest&&O(e.config._debugRequest,e),e),e=>(e.config?._debugRequest&&O(e.config._debugRequest,e.response||{status:"Error"}),S(e),Promise.reject(e)));const e=console.error;console.error=(...t)=>{i.value.unshift({timestamp:Date.now(),message:t.map(e=>"object"===typeof e?JSON.stringify(e):String(e)).join(" ")}),i.value.length>100&&(i.value=i.value.slice(0,100)),e.apply(console,t)}}),(0,s.hi)(()=>{null!==c&&v.interceptors.request.eject(c),null!==d&&v.interceptors.response.eject(d)}),(e,n)=>{const c=(0,s.g2)("v-icon"),d=(0,s.g2)("v-chip"),v=(0,s.g2)("v-btn"),T=(0,s.g2)("v-card-title"),S=(0,s.g2)("v-tab"),D=(0,s.g2)("v-tabs"),O=(0,s.g2)("v-spacer"),z=(0,s.g2)("v-window-item"),j=(0,s.g2)("v-window"),$=(0,s.g2)("v-card-text"),q=(0,s.g2)("v-card"),N=(0,s.g2)("v-snackbar");return(0,s.uX)(),(0,s.CE)(s.FK,null,[t.value?((0,s.uX)(),(0,s.CE)("div",p,[(0,s.bF)(q,{elevation:"4",class:"console-card",style:{borderRadius:"16px 16px 0 0"}},{default:(0,s.k6)(()=>[(0,s.bF)(T,{class:"d-flex justify-space-between align-center pa-2"},{default:(0,s.k6)(()=>[(0,s.Lk)("div",m,[(0,s.bF)(c,{class:"mr-2"},{default:(0,s.k6)(()=>[...n[6]||(n[6]=[(0,s.eW)("mdi-console",-1)])]),_:1}),n[7]||(n[7]=(0,s.Lk)("span",{class:"text-body-1"},"Консоль отладки",-1)),a.value.length>0?((0,s.uX)(),(0,s.Wv)(d,{key:0,color:"error",size:"small",class:"ml-2"},{default:(0,s.k6)(()=>[(0,s.eW)((0,r.v_)(a.value.length),1)]),_:1})):(0,s.Q3)("",!0)]),(0,s.Lk)("div",null,[(0,s.bF)(v,{icon:"",size:"small",variant:"text",onClick:I},{default:(0,s.k6)(()=>[(0,s.bF)(c,null,{default:(0,s.k6)(()=>[...n[8]||(n[8]=[(0,s.eW)("mdi-delete",-1)])]),_:1})]),_:1}),(0,s.bF)(v,{icon:"",size:"small",variant:"text",onClick:n[0]||(n[0]=e=>t.value=!1)},{default:(0,s.k6)(()=>[(0,s.bF)(c,null,{default:(0,s.k6)(()=>[...n[9]||(n[9]=[(0,s.eW)("mdi-close",-1)])]),_:1})]),_:1})])]),_:1}),(0,s.bF)($,{class:"pa-0"},{default:(0,s.k6)(()=>[(0,s.bF)(D,{modelValue:l.value,"onUpdate:modelValue":n[1]||(n[1]=e=>l.value=e),density:"compact"},{default:(0,s.k6)(()=>[(0,s.bF)(S,{value:"errors"},{default:(0,s.k6)(()=>[n[10]||(n[10]=(0,s.eW)(" Ошибки ",-1)),a.value.length>0?((0,s.uX)(),(0,s.Wv)(d,{key:0,color:"error",size:"x-small",class:"ml-1"},{default:(0,s.k6)(()=>[(0,s.eW)((0,r.v_)(a.value.length),1)]),_:1})):(0,s.Q3)("",!0)]),_:1}),(0,s.bF)(S,{value:"requests"},{default:(0,s.k6)(()=>[n[11]||(n[11]=(0,s.eW)(" Запросы ",-1)),o.value.length>0?((0,s.uX)(),(0,s.Wv)(d,{key:0,color:"primary",size:"x-small",class:"ml-1"},{default:(0,s.k6)(()=>[(0,s.eW)((0,r.v_)(o.value.length),1)]),_:1})):(0,s.Q3)("",!0)]),_:1}),(0,s.bF)(S,{value:"logs"},{default:(0,s.k6)(()=>[...n[12]||(n[12]=[(0,s.eW)("Логи",-1)])]),_:1})]),_:1},8,["modelValue"]),(0,s.bF)(j,{modelValue:l.value,"onUpdate:modelValue":n[2]||(n[2]=e=>l.value=e)},{default:(0,s.k6)(()=>[(0,s.bF)(z,{value:"errors"},{default:(0,s.k6)(()=>[(0,s.Lk)("div",b,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.value,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"log-item error"},[(0,s.Lk)("div",k,[(0,s.bF)(c,{size:"small",color:"error"},{default:(0,s.k6)(()=>[...n[13]||(n[13]=[(0,s.eW)("mdi-alert-circle",-1)])]),_:1}),(0,s.Lk)("span",g,(0,r.v_)(B(e.timestamp)),1),(0,s.bF)(O),(0,s.bF)(v,{icon:"",size:"x-small",variant:"text",onClick:l=>A(e,t)},{default:(0,s.k6)(()=>[(0,s.bF)(c,{size:"small"},{default:(0,s.k6)(()=>[...n[14]||(n[14]=[(0,s.eW)("mdi-content-copy",-1)])]),_:1})]),_:1},8,["onClick"])]),(0,s.Lk)("div",y,(0,r.v_)(e.message),1),e.url?((0,s.uX)(),(0,s.CE)("div",f,(0,r.v_)(e.method)+" "+(0,r.v_)(e.url),1)):(0,s.Q3)("",!0),e.data?((0,s.uX)(),(0,s.CE)("div",h,[(0,s.Lk)("pre",null,(0,r.v_)(JSON.stringify(e.data,null,2)),1)])):(0,s.Q3)("",!0)]))),128)),0===a.value.length?((0,s.uX)(),(0,s.CE)("div",_," Нет ошибок ")):(0,s.Q3)("",!0)])]),_:1}),(0,s.bF)(z,{value:"requests"},{default:(0,s.k6)(()=>[(0,s.Lk)("div",x,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.value,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:(0,r.C4)(["log-item",e.status>=400?"error":e.status>=200?"success":""])},[(0,s.Lk)("div",F,[(0,s.bF)(c,{size:"small",color:e.status>=400?"error":e.status>=200?"success":"primary"},{default:(0,s.k6)(()=>[(0,s.eW)((0,r.v_)(e.status>=400?"mdi-alert-circle":e.status>=200?"mdi-check-circle":"mdi-loading"),1)]),_:2},1032,["color"]),(0,s.Lk)("span",w,(0,r.v_)(B(e.timestamp)),1),(0,s.bF)(d,{size:"x-small",color:e.status>=400?"error":e.status>=200?"success":"primary",class:"ml-2"},{default:(0,s.k6)(()=>[(0,s.eW)((0,r.v_)(e.status||"Pending"),1)]),_:2},1032,["color"]),(0,s.bF)(O),(0,s.bF)(v,{icon:"",size:"x-small",variant:"text",onClick:l=>K(e,t)},{default:(0,s.k6)(()=>[(0,s.bF)(c,{size:"small"},{default:(0,s.k6)(()=>[...n[15]||(n[15]=[(0,s.eW)("mdi-content-copy",-1)])]),_:1})]),_:1},8,["onClick"])]),(0,s.Lk)("div",C,(0,r.v_)(e.method)+" "+(0,r.v_)(e.url),1),e.response?((0,s.uX)(),(0,s.CE)("div",E,[(0,s.Lk)("pre",null,(0,r.v_)(JSON.stringify(e.response,null,2)),1)])):(0,s.Q3)("",!0)],2))),128)),0===o.value.length?((0,s.uX)(),(0,s.CE)("div",R," Нет запросов ")):(0,s.Q3)("",!0)])]),_:1}),(0,s.bF)(z,{value:"logs"},{default:(0,s.k6)(()=>[(0,s.Lk)("div",V,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.value,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"log-item"},[(0,s.Lk)("div",P,[(0,s.bF)(c,{size:"small",color:"info"},{default:(0,s.k6)(()=>[...n[16]||(n[16]=[(0,s.eW)("mdi-information",-1)])]),_:1}),(0,s.Lk)("span",W,(0,r.v_)(B(e.timestamp)),1),(0,s.bF)(O),(0,s.bF)(v,{icon:"",size:"x-small",variant:"text",onClick:l=>U(e,t)},{default:(0,s.k6)(()=>[(0,s.bF)(c,{size:"small"},{default:(0,s.k6)(()=>[...n[17]||(n[17]=[(0,s.eW)("mdi-content-copy",-1)])]),_:1})]),_:1},8,["onClick"])]),(0,s.Lk)("div",L,(0,r.v_)(e.message),1)]))),128)),0===i.value.length?((0,s.uX)(),(0,s.CE)("div",X," Нет логов ")):(0,s.Q3)("",!0)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})])):(0,s.Q3)("",!0),t.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(v,{key:1,class:"debug-console-toggle",size:"small",color:"grey-darken-1",icon:"mdi-console",onClick:n[3]||(n[3]=e=>t.value=!0)})),(0,s.bF)(N,{modelValue:u.value.show,"onUpdate:modelValue":n[5]||(n[5]=e=>u.value.show=e),timeout:2e3,color:"success",location:"top"},{actions:(0,s.k6)(()=>[(0,s.bF)(v,{variant:"text",onClick:n[4]||(n[4]=e=>u.value.show=!1)},{default:(0,s.k6)(()=>[...n[18]||(n[18]=[(0,s.eW)(" Закрыть ",-1)])]),_:1})]),default:(0,s.k6)(()=>[(0,s.eW)((0,r.v_)(u.value.message)+" ",1)]),_:1},8,["modelValue"])],64)}}},I=l(1241);const T=(0,I.A)(B,[["__scopeId","data-v-331a6b3f"]]);var A=T,K={__name:"App",setup(e){const t=(0,i.DP)(),l=()=>{if(window.Telegram?.WebApp?.themeParams){const e=window.Telegram.WebApp.themeParams,l=document.documentElement,o=e.bg_color||"#ffffff",s=a(o);t.global.name.value=s?"dark":"light",e.bg_color&&(l.style.setProperty("--tg-theme-bg-color",e.bg_color),document.body.style.backgroundColor=e.bg_color),e.text_color&&l.style.setProperty("--tg-theme-text-color",e.text_color),e.hint_color&&l.style.setProperty("--tg-theme-hint-color",e.hint_color),e.link_color&&l.style.setProperty("--tg-theme-link-color",e.link_color),e.button_color&&l.style.setProperty("--tg-theme-button-color",e.button_color),e.button_text_color&&l.style.setProperty("--tg-theme-button-text-color",e.button_text_color),e.secondary_bg_color&&l.style.setProperty("--tg-theme-secondary-bg-color",e.secondary_bg_color)}},a=e=>{if(!e)return!1;const t=e.replace("#",""),l=parseInt(t.substr(0,2),16),a=parseInt(t.substr(2,2),16),o=parseInt(t.substr(4,2),16),s=(299*l+587*a+114*o)/1e3;return s<128};return(0,s.sV)(()=>{l(),window.Telegram?.WebApp&&window.Telegram.WebApp.onEvent("themeChanged",l)}),(e,t)=>{const l=(0,s.g2)("router-view"),a=(0,s.g2)("v-main"),o=(0,s.g2)("v-app");return(0,s.uX)(),(0,s.Wv)(o,null,{default:(0,s.k6)(()=>[(0,s.bF)(a,null,{default:(0,s.k6)(()=>[(0,s.bF)(l)]),_:1}),(0,s.bF)(A)]),_:1})}}};const U=K;var S=U,D=l(8728);l(4114),l(2489);const O={getPages(e={}){return v.get("/pages",{params:e})},getPage(e){return v.get(`/pages/${e}`)},createPage(e){return v.post("/pages",e)},updatePage(e,t){return v.put(`/pages/${e}`,t)},deletePage(e){return v.delete(`/pages/${e}`)},searchPages(e,t={}){return v.get("/pages/search",{params:{q:e,...t}})},getBlockTypes(){return v.get("/pages/block-types")},createBlock(e,t){return v.post(`/pages/${e}/blocks`,t)},updateBlock(e,t,l){return v.put(`/pages/${e}/blocks/${t}`,l)},deleteBlock(e,t){return v.delete(`/pages/${e}/blocks/${t}`)}},z=(0,o.nY)("pages",{state:()=>({pages:[],currentPage:null,loading:!1,error:null,pagination:{page:0,size:20,total:0},searchQuery:"",blockTypes:[]}),getters:{isEmpty:e=>0===e.pages.length,hasMore:e=>{const{page:t,size:l,total:a}=e.pagination;return(t+1)*l<a}},actions:{async fetchPages(e={}){this.loading=!0,this.error=null;try{const t=await O.getPages({page:this.pagination.page,size:this.pagination.size,...e});return this.pages=t.data.content||t.data.pages||[],void 0!==t.data.totalElements&&(this.pagination.total=t.data.totalElements),t.data}catch(t){throw this.error=t.message,t}finally{this.loading=!1}},async searchPages(e,t={}){this.loading=!0,this.error=null,this.searchQuery=e;try{const l=await O.searchPages(e,{page:this.pagination.page,size:this.pagination.size,...t});return this.pages=l.data.content||l.data.pages||[],void 0!==l.data.totalElements&&(this.pagination.total=l.data.totalElements),l.data}catch(l){throw this.error=l.message,l}finally{this.loading=!1}},async fetchPage(e){this.loading=!0,this.error=null;try{const t=await O.getPage(e);return this.currentPage=t.data,t.data}catch(t){throw this.error=t.message,t}finally{this.loading=!1}},async createPage(e){this.loading=!0,this.error=null;try{const t=await O.createPage({title:e});return this.pages.unshift(t.data),t.data}catch(t){throw this.error=t.message,t}finally{this.loading=!1}},async updatePage(e,t){this.loading=!0,this.error=null;try{const l=await O.updatePage(e,t);this.currentPage?.id===e&&(this.currentPage=l.data);const a=this.pages.findIndex(t=>t.id===e);return-1!==a&&(this.pages[a]=l.data),l.data}catch(l){throw this.error=l.message,l}finally{this.loading=!1}},async deletePage(e){this.loading=!0,this.error=null;try{await O.deletePage(e),this.pages=this.pages.filter(t=>t.id!==e),this.currentPage?.id===e&&(this.currentPage=null)}catch(t){throw this.error=t.message,t}finally{this.loading=!1}},async fetchBlockTypes(){try{const e=await O.getBlockTypes();return this.blockTypes=e.data.blocks||[],this.blockTypes}catch(e){throw this.error=e.message,e}},async createBlock(e,t){this.loading=!0,this.error=null;try{const l=await O.createBlock(e,t);return this.currentPage?.id===e&&(this.currentPage.blocks||(this.currentPage.blocks=[]),this.currentPage.blocks.push(l.data),this.currentPage.blocks.sort((e,t)=>e.order-t.order)),l.data}catch(l){throw this.error=l.message,l}finally{this.loading=!1}},async updateBlock(e,t,l){this.loading=!0,this.error=null;try{const a=await O.updateBlock(e,t,l);if(this.currentPage?.id===e&&this.currentPage.blocks){const e=this.currentPage.blocks.findIndex(e=>e.id===t);-1!==e&&(this.currentPage.blocks[e]=a.data)}return a.data}catch(a){throw this.error=a.message,a}finally{this.loading=!1}},async deleteBlock(e,t){this.loading=!0,this.error=null;try{await O.deleteBlock(e,t),this.currentPage?.id===e&&this.currentPage.blocks&&(this.currentPage.blocks=this.currentPage.blocks.filter(e=>e.id!==t))}catch(l){throw this.error=l.message,l}finally{this.loading=!1}},resetPagination(){this.pagination.page=0},nextPage(){this.hasMore&&this.pagination.page++}}});function j(e,t){let l;return function(...a){const o=()=>{clearTimeout(l),e(...a)};clearTimeout(l),l=setTimeout(o,t)}}var $={__name:"CreatePageModal",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue","created"],setup(e,{emit:t}){const l=e,o=t,i=z(),r=(0,n.KR)(""),u=(0,n.KR)(!1),c=(0,n.KR)("");(0,s.wB)(()=>l.modelValue,e=>{e&&(r.value="",c.value="")});const d=async()=>{if(r.value.trim()){u.value=!0,c.value="";try{const e=await i.createPage(r.value.trim());o("created",e),o("update:modelValue",!1),r.value="",c.value=""}catch(e){if(console.error("Ошибка при создании страницы:",e),"ERR_NETWORK"===e.code||"Network Error"===e.message)c.value="Ошибка сети. Проверьте подключение к интернету и настройки CORS на сервере.";else if(e.response){const t=e.response.status,l=e.response.data;c.value=401===t?"Ошибка авторизации. Перезапустите приложение из Telegram.":403===t?"Недостаточно прав. Проверьте подписку.":400===t?l?.message||"Неверные данные. Проверьте введенное название.":l?.message||`Ошибка сервера (${t})`}else c.value=e.message||"Неизвестная ошибка"}finally{u.value=!1}}};return(t,l)=>{const o=(0,s.g2)("v-card-title"),i=(0,s.g2)("v-text-field"),n=(0,s.g2)("v-card-text"),v=(0,s.g2)("v-spacer"),p=(0,s.g2)("v-btn"),m=(0,s.g2)("v-card-actions"),b=(0,s.g2)("v-card"),k=(0,s.g2)("v-dialog");return(0,s.uX)(),(0,s.Wv)(k,{"model-value":e.modelValue,"max-width":"400","onUpdate:modelValue":l[2]||(l[2]=e=>t.$emit("update:modelValue",e))},{default:(0,s.k6)(()=>[(0,s.bF)(b,{style:{borderRadius:"24px"}},{default:(0,s.k6)(()=>[(0,s.bF)(o,{class:"text-h6"},{default:(0,s.k6)(()=>[...l[3]||(l[3]=[(0,s.eW)(" Создать новую страницу ",-1)])]),_:1}),(0,s.bF)(n,null,{default:(0,s.k6)(()=>[(0,s.bF)(i,{modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=e=>r.value=e),label:"Название страницы",variant:"outlined",density:"compact",autofocus:"",error:!!c.value,"error-messages":c.value,onKeydown:(0,a.jR)(d,["enter"])},null,8,["modelValue","error","error-messages"])]),_:1}),(0,s.bF)(m,null,{default:(0,s.k6)(()=>[(0,s.bF)(v),(0,s.bF)(p,{variant:"text",onClick:l[1]||(l[1]=e=>t.$emit("update:modelValue",!1))},{default:(0,s.k6)(()=>[...l[4]||(l[4]=[(0,s.eW)(" Отмена ",-1)])]),_:1}),(0,s.bF)(p,{color:"primary",loading:u.value,disabled:!r.value.trim(),onClick:d},{default:(0,s.k6)(()=>[...l[5]||(l[5]=[(0,s.eW)(" Создать ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}};const q=$;var N=q;const Q={key:0,class:"text-body-2"},M={key:1,class:"text-body-1"};var H={__name:"TextBlock",props:{block:{type:Object,required:!0},editable:{type:Boolean,default:!1},preview:{type:Boolean,default:!1}},emits:["edit","save","delete"],setup(e,{emit:t}){const l=e,o=t,i=(0,n.KR)(l.block.content||"");(0,s.wB)(()=>l.block.content,e=>{i.value=e||""});const u=()=>{o("save",{content:i.value})};return(t,l)=>{const o=(0,s.g2)("v-card-text"),n=(0,s.g2)("v-card"),c=(0,s.g2)("v-textarea");return e.editable?((0,s.uX)(),(0,s.Wv)(c,{key:1,modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=e=>i.value=e),variant:"outlined","auto-grow":"",rows:"2","hide-details":"",onBlur:u,onKeydown:(0,a.jR)((0,a.D$)(u,["ctrl"]),["enter"])},null,8,["modelValue","onKeydown"])):((0,s.uX)(),(0,s.Wv)(n,{key:0,elevation:"0",class:"text-block",style:{borderRadius:"16px"},onClick:l[0]||(l[0]=e=>t.$emit("edit"))},{default:(0,s.k6)(()=>[(0,s.bF)(o,null,{default:(0,s.k6)(()=>[e.preview?((0,s.uX)(),(0,s.CE)("div",Q,(0,r.v_)(e.block.content||"Текст"),1)):((0,s.uX)(),(0,s.CE)("div",M,(0,r.v_)(e.block.content||"Пустой текст"),1))]),_:1})]),_:1}))}}};const J=(0,I.A)(H,[["__scopeId","data-v-f66cf11a"]]);var Y=J;const G={key:0,class:"preview-items"},Z={class:"ml-2 text-body-2"},ee={key:1,class:"items-list"},te={key:2,class:"text-body-2 text-grey"},le={class:"d-flex justify-end mt-2"};var ae={__name:"ChecklistBlock",props:{block:{type:Object,required:!0},editable:{type:Boolean,default:!1},preview:{type:Boolean,default:!1}},emits:["edit","save","delete"],setup(e,{emit:t}){const l=e,o=t,i=(0,s.EW)(()=>l.block.items||[]),u=(0,n.KR)([...i.value]);(0,s.wB)(()=>l.block.items,e=>{u.value=e?[...e]:[]},{deep:!0});const c=e=>{if(!l.editable){const t=[...i.value];t[e].checked=!t[e].checked,o("save",{items:t})}},d=()=>{u.value.push({text:"",checked:!1})},v=e=>{u.value.splice(e,1)},p=()=>{o("save",{items:u.value.filter(e=>e.text.trim())})};return(t,l)=>{const o=(0,s.g2)("v-icon"),n=(0,s.g2)("v-checkbox"),m=(0,s.g2)("v-card-text"),b=(0,s.g2)("v-card"),k=(0,s.g2)("v-text-field"),g=(0,s.g2)("v-btn");return e.editable?((0,s.uX)(),(0,s.Wv)(b,{key:1,elevation:"0",variant:"outlined",style:{borderRadius:"16px"}},{default:(0,s.k6)(()=>[(0,s.bF)(m,null,{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(u.value,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"item-edit-row"},[(0,s.bF)(n,{modelValue:e.checked,"onUpdate:modelValue":t=>e.checked=t,"hide-details":"",density:"compact"},null,8,["modelValue","onUpdate:modelValue"]),(0,s.bF)(k,{modelValue:e.text,"onUpdate:modelValue":t=>e.text=t,variant:"plain",density:"compact","hide-details":"",placeholder:"Элемент списка",onKeydown:(0,a.jR)(d,["enter"])},null,8,["modelValue","onUpdate:modelValue"]),(0,s.bF)(g,{icon:"",size:"small",variant:"text",onClick:e=>v(t)},{default:(0,s.k6)(()=>[(0,s.bF)(o,{size:"small"},{default:(0,s.k6)(()=>[...l[1]||(l[1]=[(0,s.eW)("mdi-close",-1)])]),_:1})]),_:1},8,["onClick"])]))),128)),(0,s.bF)(g,{block:"",variant:"text","prepend-icon":"mdi-plus",onClick:d},{default:(0,s.k6)(()=>[...l[2]||(l[2]=[(0,s.eW)(" Добавить элемент ",-1)])]),_:1}),(0,s.Lk)("div",le,[(0,s.bF)(g,{size:"small",color:"primary",onClick:p},{default:(0,s.k6)(()=>[...l[3]||(l[3]=[(0,s.eW)(" Сохранить ",-1)])]),_:1})])]),_:1})]),_:1})):((0,s.uX)(),(0,s.Wv)(b,{key:0,elevation:"0",class:"checklist-block",style:{borderRadius:"16px"},onClick:l[0]||(l[0]=e=>t.$emit("edit"))},{default:(0,s.k6)(()=>[(0,s.bF)(m,null,{default:(0,s.k6)(()=>[e.preview&&i.value.length>0?((0,s.uX)(),(0,s.CE)("div",G,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.value.slice(0,2),(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"preview-item"},[(0,s.bF)(o,{size:"small",color:e.checked?"success":"grey"},{default:(0,s.k6)(()=>[(0,s.eW)((0,r.v_)(e.checked?"mdi-check-circle":"mdi-circle-outline"),1)]),_:2},1032,["color"]),(0,s.Lk)("span",Z,(0,r.v_)(e.text),1)]))),128))])):i.value.length>0?((0,s.uX)(),(0,s.CE)("div",ee,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.value,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"item-row"},[(0,s.bF)(n,{"model-value":e.checked,"hide-details":"",density:"compact",onClick:(0,a.D$)(e=>c(t),["stop"])},null,8,["model-value","onClick"]),(0,s.Lk)("span",{class:(0,r.C4)(["text-body-1 ml-2",{"text-decoration-line-through":e.checked}])},(0,r.v_)(e.text),3)]))),128))])):((0,s.uX)(),(0,s.CE)("div",te," Пустой чек-лист "))]),_:1})]),_:1}))}}};const oe=(0,I.A)(ae,[["__scopeId","data-v-0af89067"]]);var se=oe;const ie={class:"dashboard"},re={key:0,class:"empty-state"},ne={key:1,class:"masonry-grid"},ue=["onClick"],ce={key:0,class:"preview"},de={key:1,class:"text-grey text-body-2"},ve={class:"mt-2 text-caption text-grey"},pe={key:2,class:"text-center py-8"};var me={__name:"Dashboard",setup(e){const t=(0,D.rd)(),l=z(),a=(0,n.KR)(""),o=(0,n.KR)(!1),i=j(e=>{const t=e.target.value.trim();t?l.searchPages(t):l.fetchPages()},300),u=e=>{t.push(`/pages/${e}`)},c=()=>{o.value=!0},d=e=>{t.push(`/pages/${e.id}`)},v=e=>{if(!e)return"";const t=new Date(e),l=new Date,a=l-t,o=Math.floor(a/6e4),s=Math.floor(a/36e5),i=Math.floor(a/864e5);return o<1?"только что":o<60?`${o} мин. назад`:s<24?`${s} ч. назад`:i<7?`${i} дн. назад`:t.toLocaleDateString("ru-RU")},p=e=>{const t={TEXT:Y,CHECKLIST:se};return t[e]||Y};return(0,s.sV)(()=>{l.fetchPages()}),(e,t)=>{const m=(0,s.g2)("v-text-field"),b=(0,s.g2)("v-icon"),k=(0,s.g2)("v-btn"),g=(0,s.g2)("v-app-bar"),y=(0,s.g2)("v-card-title"),f=(0,s.g2)("v-card-text"),h=(0,s.g2)("v-card"),_=(0,s.g2)("v-progress-circular"),x=(0,s.g2)("v-container");return(0,s.uX)(),(0,s.CE)("div",ie,[(0,s.bF)(g,{elevation:"0",color:"transparent",class:"px-4"},{default:(0,s.k6)(()=>[(0,s.bF)(m,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e),placeholder:"Поиск заметок...","prepend-inner-icon":"mdi-magnify",variant:"solo-filled",density:"compact","hide-details":"",class:"search-field",onInput:(0,n.R1)(i)},null,8,["modelValue","onInput"]),(0,s.bF)(k,{icon:"",variant:"text",onClick:t[1]||(t[1]=t=>e.$router.push("/subscription"))},{default:(0,s.k6)(()=>[(0,s.bF)(b,null,{default:(0,s.k6)(()=>[...t[3]||(t[3]=[(0,s.eW)("mdi-account-circle",-1)])]),_:1})]),_:1})]),_:1}),(0,s.bF)(x,{class:"py-4"},{default:(0,s.k6)(()=>[!(0,n.R1)(l).loading&&(0,n.R1)(l).isEmpty?((0,s.uX)(),(0,s.CE)("div",re,[(0,s.bF)(b,{size:"80",color:"grey-lighten-1"},{default:(0,s.k6)(()=>[...t[4]||(t[4]=[(0,s.eW)("mdi-note-text-outline",-1)])]),_:1}),t[6]||(t[6]=(0,s.Lk)("h2",{class:"text-h6 mt-4 mb-2"},"Пока нет заметок",-1)),t[7]||(t[7]=(0,s.Lk)("p",{class:"text-body-2 text-grey"},"Создайте свою первую заметку",-1)),(0,s.bF)(k,{color:"primary",size:"large",class:"mt-4",onClick:c},{default:(0,s.k6)(()=>[...t[5]||(t[5]=[(0,s.eW)(" Создать первую заметку ",-1)])]),_:1})])):((0,s.uX)(),(0,s.CE)("div",ne,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,n.R1)(l).pages,e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"page-card",onClick:t=>u(e.id)},[(0,s.bF)(h,{elevation:"0",class:"page-card-content",style:{borderRadius:"24px"}},{default:(0,s.k6)(()=>[(0,s.bF)(y,{class:"text-h6 pb-2"},{default:(0,s.k6)(()=>[(0,s.eW)((0,r.v_)(e.title||"Без названия"),1)]),_:2},1024),(0,s.bF)(f,{class:"pt-0"},{default:(0,s.k6)(()=>[e.blocks&&e.blocks.length>0?((0,s.uX)(),(0,s.CE)("div",ce,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.blocks.slice(0,2),e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"preview-block"},[((0,s.uX)(),(0,s.Wv)((0,s.$y)(p(e.type)),{block:e,preview:!0},null,8,["block"]))]))),128))])):((0,s.uX)(),(0,s.CE)("div",de," Пустая страница ")),(0,s.Lk)("div",ve,(0,r.v_)(v(e.updatedAt)),1)]),_:2},1024)]),_:2},1024)],8,ue))),128))])),(0,n.R1)(l).loading?((0,s.uX)(),(0,s.CE)("div",pe,[(0,s.bF)(_,{indeterminate:"",color:"primary"})])):(0,s.Q3)("",!0)]),_:1}),(0,s.bF)(k,{class:"fab-button",size:"large",color:"primary",icon:"mdi-plus",onClick:c}),(0,s.bF)(N,{modelValue:o.value,"onUpdate:modelValue":t[2]||(t[2]=e=>o.value=e),onCreated:d},null,8,["modelValue"])])}}};const be=(0,I.A)(me,[["__scopeId","data-v-5244c045"]]);var ke=be;const ge={getSubscription(){return v.get("/subscription")},getLimits(){return v.get("/subscription/limits")},getHistory(){return v.get("/subscription/history")},getPlans(){return v.get("/subscription/plans")},createInvoice(e){return v.post("/subscription/create-invoice",{planId:e})},upgrade(e){return v.post("/subscription/upgrade",e)}},ye=(0,o.nY)("subscription",{state:()=>({subscription:null,limits:null,plans:[],history:[],loading:!1,error:null}),getters:{isPremium:e=>"PREMIUM"===e.subscription?.plan,isFree:e=>"FREE"===e.subscription?.plan,canUpgrade:e=>e.subscription?.canUpgrade||!1,pagesLimitReached:e=>e.limits?.pagesLimitReached||!1,remainingPages:e=>e.limits?.remainingPages||0,maxPages:e=>e.limits?.maxPages||3,currentPages:e=>e.limits?.currentPages||0,maxBlocksPerPage:e=>e.limits?.maxBlocksPerPage||10},actions:{async fetchSubscription(){this.loading=!0,this.error=null;try{const e=await ge.getSubscription();return this.subscription=e.data,e.data}catch(e){throw this.error=e.message,e}finally{this.loading=!1}},async fetchLimits(){this.loading=!0,this.error=null;try{const e=await ge.getLimits();return this.limits=e.data,e.data}catch(e){throw this.error=e.message,e}finally{this.loading=!1}},async fetchPlans(){this.loading=!0,this.error=null;try{const e=await ge.getPlans();return this.plans=e.data,e.data}catch(e){throw this.error=e.message,e}finally{this.loading=!1}},async fetchHistory(){this.loading=!0,this.error=null;try{const e=await ge.getHistory();return this.history=e.data,e.data}catch(e){throw this.error=e.message,e}finally{this.loading=!1}},async createInvoice(e){this.loading=!0,this.error=null;try{const t=await ge.createInvoice({planId:e});return t.data}catch(t){throw this.error=t.message,t}finally{this.loading=!1}},async upgrade(e){this.loading=!0,this.error=null;try{const t=await ge.upgrade(e);return this.subscription=t.data,await this.fetchLimits(),t.data}catch(t){throw this.error=t.message,t}finally{this.loading=!1}}}}),fe={key:0,class:"text-center py-8"},he={key:1,class:"block-types-grid"};var _e={__name:"BlockTypeSheet",props:{modelValue:{type:Boolean,required:!0},insertOrder:{type:Number,default:0}},emits:["update:modelValue","block-selected"],setup(e,{emit:t}){const l=e,a=t,o=(0,D.rd)(),i=z(),u=ye(),c=(0,n.KR)(!1),d=(0,n.KR)(!1),v=(0,n.KR)(null),p=(0,s.EW)(()=>u.isPremium),m=(0,s.EW)(()=>i.blockTypes.filter(e=>e.isFreeBlock||p.value)),b=e=>{const t={TEXT:"mdi-text",CHECKLIST:"mdi-format-list-checks",IDEA_CARD:"mdi-lightbulb-on",STATUS:"mdi-flag",HEADING:"mdi-format-header-1",QUOTE:"mdi-format-quote-close",DIVIDER:"mdi-minus",LINK:"mdi-link",BULLET_LIST:"mdi-format-list-bulleted",KEY_VALUE:"mdi-key-variant",PROS:"mdi-thumb-up",CONS:"mdi-thumb-down"};return t[e]||"mdi-text-box"},k=e=>{if(!e.isFreeBlock&&!p.value)return v.value=e,void(d.value=!0);a("block-selected",e.blockType),a("update:modelValue",!1)},g=()=>{d.value=!1,a("update:modelValue",!1),o.push("/subscription")};return(0,s.wB)(()=>l.modelValue,async e=>{if(e){c.value=!0;try{await i.fetchBlockTypes(),await u.fetchSubscription()}catch(t){console.error("Ошибка при загрузке типов блоков:",t)}finally{c.value=!1}}}),(0,s.sV)(async()=>{0===i.blockTypes.length&&await i.fetchBlockTypes(),await u.fetchSubscription()}),(t,l)=>{const a=(0,s.g2)("v-progress-circular"),o=(0,s.g2)("v-icon"),i=(0,s.g2)("v-card-text"),n=(0,s.g2)("v-card"),u=(0,s.g2)("v-sheet"),v=(0,s.g2)("v-bottom-sheet"),y=(0,s.g2)("v-card-title"),f=(0,s.g2)("v-spacer"),h=(0,s.g2)("v-btn"),_=(0,s.g2)("v-card-actions"),x=(0,s.g2)("v-dialog");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(v,{"model-value":e.modelValue,"onUpdate:modelValue":l[0]||(l[0]=e=>t.$emit("update:modelValue",e))},{default:(0,s.k6)(()=>[(0,s.bF)(u,{style:{borderRadius:"24px 24px 0 0"},class:"pa-4"},{default:(0,s.k6)(()=>[l[4]||(l[4]=(0,s.Lk)("div",{class:"text-h6 mb-4"},"Выберите тип блока",-1)),c.value?((0,s.uX)(),(0,s.CE)("div",fe,[(0,s.bF)(a,{indeterminate:"",color:"primary"})])):((0,s.uX)(),(0,s.CE)("div",he,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(m.value,e=>((0,s.uX)(),(0,s.Wv)(n,{key:e.blockType,elevation:"0",class:(0,r.C4)(["block-type-card",{locked:!e.isFreeBlock&&!p.value}]),style:{borderRadius:"16px"},onClick:t=>k(e)},{default:(0,s.k6)(()=>[(0,s.bF)(i,{class:"text-center"},{default:(0,s.k6)(()=>[(0,s.bF)(o,{size:40,color:e.isFreeBlock||p.value?"primary":"grey"},{default:(0,s.k6)(()=>[(0,s.eW)((0,r.v_)(b(e.blockType)),1)]),_:2},1032,["color"]),(0,s.Lk)("div",{class:(0,r.C4)(["text-body-2 mt-2",e.isFreeBlock||p.value?"":"text-grey"])},(0,r.v_)(e.blockName),3),e.isFreeBlock||p.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(o,{key:0,size:"small",color:"grey",class:"mt-1"},{default:(0,s.k6)(()=>[...l[3]||(l[3]=[(0,s.eW)(" mdi-lock ",-1)])]),_:1}))]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))]))]),_:1})]),_:1},8,["model-value"]),(0,s.bF)(x,{modelValue:d.value,"onUpdate:modelValue":l[2]||(l[2]=e=>d.value=e),"max-width":"400"},{default:(0,s.k6)(()=>[(0,s.bF)(n,{style:{borderRadius:"24px"}},{default:(0,s.k6)(()=>[(0,s.bF)(y,{class:"text-h6"},{default:(0,s.k6)(()=>[...l[5]||(l[5]=[(0,s.eW)(" Premium функция ",-1)])]),_:1}),(0,s.bF)(i,null,{default:(0,s.k6)(()=>[...l[6]||(l[6]=[(0,s.Lk)("p",{class:"text-body-1"}," Этот тип блока доступен только в Premium плане. ",-1),(0,s.Lk)("p",{class:"text-body-2 text-grey mt-2"}," Обновите подписку, чтобы получить доступ ко всем функциям. ",-1)])]),_:1}),(0,s.bF)(_,null,{default:(0,s.k6)(()=>[(0,s.bF)(f),(0,s.bF)(h,{variant:"text",onClick:l[1]||(l[1]=e=>d.value=!1)},{default:(0,s.k6)(()=>[...l[7]||(l[7]=[(0,s.eW)(" Отмена ",-1)])]),_:1}),(0,s.bF)(h,{color:"primary",onClick:g},{default:(0,s.k6)(()=>[...l[8]||(l[8]=[(0,s.eW)(" Перейти к подписке ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}};const xe=(0,I.A)(_e,[["__scopeId","data-v-8af4141a"]]);var Fe=xe;const we={class:"text-body-1"};var Ce={__name:"ConfirmDeleteModal",props:{modelValue:{type:Boolean,required:!0},title:{type:String,default:"Подтвердите удаление"},message:{type:String,default:"Вы уверены, что хотите удалить этот элемент?"}},emits:["update:modelValue","confirm"],setup(e,{emit:t}){const l=t,a=()=>{l("confirm"),l("update:modelValue",!1)};return(t,l)=>{const o=(0,s.g2)("v-card-title"),i=(0,s.g2)("v-card-text"),n=(0,s.g2)("v-spacer"),u=(0,s.g2)("v-btn"),c=(0,s.g2)("v-card-actions"),d=(0,s.g2)("v-card"),v=(0,s.g2)("v-dialog");return(0,s.uX)(),(0,s.Wv)(v,{"model-value":e.modelValue,"max-width":"400","onUpdate:modelValue":l[1]||(l[1]=e=>t.$emit("update:modelValue",e))},{default:(0,s.k6)(()=>[(0,s.bF)(d,{style:{borderRadius:"24px"}},{default:(0,s.k6)(()=>[(0,s.bF)(o,{class:"text-h6"},{default:(0,s.k6)(()=>[(0,s.eW)((0,r.v_)(e.title),1)]),_:1}),(0,s.bF)(i,null,{default:(0,s.k6)(()=>[(0,s.Lk)("p",we,(0,r.v_)(e.message),1),l[2]||(l[2]=(0,s.Lk)("p",{class:"text-body-2 text-grey mt-2"}," Это действие нельзя отменить. ",-1))]),_:1}),(0,s.bF)(c,null,{default:(0,s.k6)(()=>[(0,s.bF)(n),(0,s.bF)(u,{variant:"text",onClick:l[0]||(l[0]=e=>t.$emit("update:modelValue",!1))},{default:(0,s.k6)(()=>[...l[3]||(l[3]=[(0,s.eW)(" Отмена ",-1)])]),_:1}),(0,s.bF)(u,{color:"error",onClick:a},{default:(0,s.k6)(()=>[...l[4]||(l[4]=[(0,s.eW)(" Удалить ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}};const Ee=Ce;var Re=Ee;const Ve={class:"d-flex align-center mb-2"},Pe={class:"text-body-1"},We={class:"d-flex justify-end mt-2"};var Le={__name:"IdeaCardBlock",props:{block:{type:Object,required:!0},editable:{type:Boolean,default:!1}},emits:["edit","save","delete"],setup(e,{emit:t}){const l=e,a=t,o=(0,n.KR)(l.block.content||"");(0,s.wB)(()=>l.block.content,e=>{o.value=e||""});const i=()=>{a("save",{content:o.value})};return(t,l)=>{const a=(0,s.g2)("v-icon"),n=(0,s.g2)("v-card-text"),u=(0,s.g2)("v-card"),c=(0,s.g2)("v-textarea"),d=(0,s.g2)("v-btn");return e.editable?((0,s.uX)(),(0,s.Wv)(u,{key:1,elevation:"0",variant:"outlined",style:{borderRadius:"16px"}},{default:(0,s.k6)(()=>[(0,s.bF)(n,null,{default:(0,s.k6)(()=>[(0,s.bF)(c,{modelValue:o.value,"onUpdate:modelValue":l[1]||(l[1]=e=>o.value=e),variant:"outlined","auto-grow":"",rows:"3","hide-details":"",placeholder:"Опишите вашу идею..."},null,8,["modelValue"]),(0,s.Lk)("div",We,[(0,s.bF)(d,{size:"small",color:"primary",onClick:i},{default:(0,s.k6)(()=>[...l[4]||(l[4]=[(0,s.eW)(" Сохранить ",-1)])]),_:1})])]),_:1})]),_:1})):((0,s.uX)(),(0,s.Wv)(u,{key:0,elevation:"0",class:"idea-card-block",style:{borderRadius:"16px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},onClick:l[0]||(l[0]=e=>t.$emit("edit"))},{default:(0,s.k6)(()=>[(0,s.bF)(n,null,{default:(0,s.k6)(()=>[(0,s.Lk)("div",Ve,[(0,s.bF)(a,{color:"white"},{default:(0,s.k6)(()=>[...l[2]||(l[2]=[(0,s.eW)("mdi-lightbulb-on",-1)])]),_:1}),l[3]||(l[3]=(0,s.Lk)("span",{class:"ml-2 text-body-2 font-weight-bold"},"Идея",-1))]),(0,s.Lk)("div",Pe,(0,r.v_)(e.block.content||"Ваша идея..."),1)]),_:1})]),_:1}))}}};const Xe=(0,I.A)(Le,[["__scopeId","data-v-3b7e10b1"]]);var Be=Xe;const Ie={class:"d-flex justify-end mt-2"};var Te={__name:"StatusBlock",props:{block:{type:Object,required:!0},editable:{type:Boolean,default:!1}},emits:["edit","save","delete"],setup(e,{emit:t}){const l=e,a=t,o=(0,n.KR)(l.block.status||"TODO"),i=(0,n.KR)(l.block.color||"blue"),u=[{title:"К выполнению",value:"TODO"},{title:"В работе",value:"IN_PROGRESS"},{title:"Завершено",value:"DONE"},{title:"Отменено",value:"CANCELLED"}],c=[{title:"Синий",value:"blue"},{title:"Зеленый",value:"green"},{title:"Оранжевый",value:"orange"},{title:"Красный",value:"red"},{title:"Фиолетовый",value:"purple"}],d=e=>{const t=u.find(t=>t.value===e);return t?t.title:e},v=e=>{const t={blue:"primary",green:"success",orange:"warning",red:"error",purple:"purple"};return t[e]||"primary"};(0,s.wB)(()=>l.block.status,e=>{o.value=e||"TODO"}),(0,s.wB)(()=>l.block.color,e=>{i.value=e||"blue"});const p=()=>{a("save",{status:o.value,color:i.value})};return(t,l)=>{const a=(0,s.g2)("v-chip"),n=(0,s.g2)("v-card-text"),m=(0,s.g2)("v-card"),b=(0,s.g2)("v-select"),k=(0,s.g2)("v-btn");return e.editable?((0,s.uX)(),(0,s.Wv)(m,{key:1,elevation:"0",variant:"outlined",style:{borderRadius:"16px"}},{default:(0,s.k6)(()=>[(0,s.bF)(n,null,{default:(0,s.k6)(()=>[(0,s.bF)(b,{modelValue:o.value,"onUpdate:modelValue":l[1]||(l[1]=e=>o.value=e),items:u,label:"Статус",variant:"outlined",density:"compact"},null,8,["modelValue"]),(0,s.bF)(b,{modelValue:i.value,"onUpdate:modelValue":l[2]||(l[2]=e=>i.value=e),items:c,label:"Цвет",variant:"outlined",density:"compact"},null,8,["modelValue"]),(0,s.Lk)("div",Ie,[(0,s.bF)(k,{size:"small",color:"primary",onClick:p},{default:(0,s.k6)(()=>[...l[3]||(l[3]=[(0,s.eW)(" Сохранить ",-1)])]),_:1})])]),_:1})]),_:1})):((0,s.uX)(),(0,s.Wv)(m,{key:0,elevation:"0",class:"status-block",style:{borderRadius:"16px"},onClick:l[0]||(l[0]=e=>t.$emit("edit"))},{default:(0,s.k6)(()=>[(0,s.bF)(n,null,{default:(0,s.k6)(()=>[(0,s.bF)(a,{color:v(e.block.color||"blue"),size:"large"},{default:(0,s.k6)(()=>[(0,s.eW)((0,r.v_)(d(e.block.status)),1)]),_:1},8,["color"])]),_:1})]),_:1}))}}};const Ae=(0,I.A)(Te,[["__scopeId","data-v-e4f441ac"]]);var Ke=Ae;const Ue={key:0,class:"text-h4 font-weight-bold"},Se={key:1,class:"text-h5 font-weight-bold"},De={key:2,class:"text-h6 font-weight-bold"},Oe={class:"d-flex justify-end mt-2"};var ze={__name:"HeadingBlock",props:{block:{type:Object,required:!0},editable:{type:Boolean,default:!1}},emits:["edit","save","delete"],setup(e,{emit:t}){const l=e,a=t,o=(0,n.KR)(l.block.content||""),i=(0,n.KR)(l.block.level||1),u=[{title:"Уровень 1",value:1},{title:"Уровень 2",value:2},{title:"Уровень 3",value:3}];(0,s.wB)(()=>l.block.content,e=>{o.value=e||""}),(0,s.wB)(()=>l.block.level,e=>{i.value=e||1});const c=()=>{a("save",{content:o.value,level:i.value})};return(t,l)=>{const a=(0,s.g2)("v-text-field"),n=(0,s.g2)("v-select"),d=(0,s.g2)("v-btn"),v=(0,s.g2)("v-card-text"),p=(0,s.g2)("v-card");return e.editable?((0,s.uX)(),(0,s.Wv)(p,{key:1,elevation:"0",variant:"outlined",style:{borderRadius:"16px"}},{default:(0,s.k6)(()=>[(0,s.bF)(v,null,{default:(0,s.k6)(()=>[(0,s.bF)(a,{modelValue:o.value,"onUpdate:modelValue":l[1]||(l[1]=e=>o.value=e),variant:"outlined",density:"compact",label:"Заголовок","hide-details":""},null,8,["modelValue"]),(0,s.bF)(n,{modelValue:i.value,"onUpdate:modelValue":l[2]||(l[2]=e=>i.value=e),items:u,label:"Уровень",variant:"outlined",density:"compact",class:"mt-2"},null,8,["modelValue"]),(0,s.Lk)("div",Oe,[(0,s.bF)(d,{size:"small",color:"primary",onClick:c},{default:(0,s.k6)(()=>[...l[3]||(l[3]=[(0,s.eW)(" Сохранить ",-1)])]),_:1})])]),_:1})]),_:1})):((0,s.uX)(),(0,s.CE)("div",{key:0,onClick:l[0]||(l[0]=e=>t.$emit("edit"))},[1===e.block.level?((0,s.uX)(),(0,s.CE)("h2",Ue,(0,r.v_)(e.block.content||"Заголовок 1"),1)):2===e.block.level?((0,s.uX)(),(0,s.CE)("h3",Se,(0,r.v_)(e.block.content||"Заголовок 2"),1)):((0,s.uX)(),(0,s.CE)("h4",De,(0,r.v_)(e.block.content||"Заголовок 3"),1))]))}}};const je=(0,I.A)(ze,[["__scopeId","data-v-0cc3d982"]]);var $e=je;const qe={class:"text-body-1 font-italic"},Ne={key:0,class:"text-caption text-grey mt-2"},Qe={class:"d-flex justify-end mt-2"};var Me={__name:"QuoteBlock",props:{block:{type:Object,required:!0},editable:{type:Boolean,default:!1}},emits:["edit","save","delete"],setup(e,{emit:t}){const l=e,a=t,o=(0,n.KR)(l.block.content||""),i=(0,n.KR)(l.block.author||"");(0,s.wB)(()=>l.block.content,e=>{o.value=e||""}),(0,s.wB)(()=>l.block.author,e=>{i.value=e||""});const u=()=>{a("save",{content:o.value,author:i.value})};return(t,l)=>{const a=(0,s.g2)("v-card-text"),n=(0,s.g2)("v-card"),c=(0,s.g2)("v-textarea"),d=(0,s.g2)("v-text-field"),v=(0,s.g2)("v-btn");return e.editable?((0,s.uX)(),(0,s.Wv)(n,{key:1,elevation:"0",variant:"outlined",style:{borderRadius:"16px"}},{default:(0,s.k6)(()=>[(0,s.bF)(a,null,{default:(0,s.k6)(()=>[(0,s.bF)(c,{modelValue:o.value,"onUpdate:modelValue":l[1]||(l[1]=e=>o.value=e),variant:"outlined","auto-grow":"",rows:"2",label:"Цитата","hide-details":""},null,8,["modelValue"]),(0,s.bF)(d,{modelValue:i.value,"onUpdate:modelValue":l[2]||(l[2]=e=>i.value=e),variant:"outlined",density:"compact",label:"Автор (необязательно)","hide-details":"",class:"mt-2"},null,8,["modelValue"]),(0,s.Lk)("div",Qe,[(0,s.bF)(v,{size:"small",color:"primary",onClick:u},{default:(0,s.k6)(()=>[...l[3]||(l[3]=[(0,s.eW)(" Сохранить ",-1)])]),_:1})])]),_:1})]),_:1})):((0,s.uX)(),(0,s.Wv)(n,{key:0,elevation:"0",class:"quote-block",style:{borderRadius:"16px",borderLeft:"4px solid primary"},onClick:l[0]||(l[0]=e=>t.$emit("edit"))},{default:(0,s.k6)(()=>[(0,s.bF)(a,null,{default:(0,s.k6)(()=>[(0,s.Lk)("div",qe,' "'+(0,r.v_)(e.block.content||"Цитата")+'" ',1),e.block.author?((0,s.uX)(),(0,s.CE)("div",Ne," — "+(0,r.v_)(e.block.author),1)):(0,s.Q3)("",!0)]),_:1})]),_:1}))}}};const He=(0,I.A)(Me,[["__scopeId","data-v-5b745dcc"]]);var Je=He,Ye={__name:"DividerBlock",props:{block:{type:Object,required:!0},editable:{type:Boolean,default:!1}},setup(e){return(e,t)=>{const l=(0,s.g2)("v-divider");return(0,s.uX)(),(0,s.Wv)(l,{class:"my-4"})}}};const Ge=Ye;var Ze=Ge;const et={class:"d-flex align-center"},tt=["href"],lt={key:0,class:"text-caption text-grey mt-1"},at={class:"d-flex justify-end mt-2"};var ot={__name:"LinkBlock",props:{block:{type:Object,required:!0},editable:{type:Boolean,default:!1}},emits:["edit","save","delete"],setup(e,{emit:t}){const l=e,o=t,i=(0,n.KR)(l.block.url||""),u=(0,n.KR)(l.block.title||""),c=(0,n.KR)(l.block.description||"");(0,s.wB)(()=>l.block.url,e=>{i.value=e||""}),(0,s.wB)(()=>l.block.title,e=>{u.value=e||""}),(0,s.wB)(()=>l.block.description,e=>{c.value=e||""});const d=()=>{o("save",{url:i.value,title:u.value,description:c.value})};return(t,l)=>{const o=(0,s.g2)("v-icon"),n=(0,s.g2)("v-card-text"),v=(0,s.g2)("v-card"),p=(0,s.g2)("v-text-field"),m=(0,s.g2)("v-btn");return e.editable?((0,s.uX)(),(0,s.Wv)(v,{key:1,elevation:"0",variant:"outlined",style:{borderRadius:"16px"}},{default:(0,s.k6)(()=>[(0,s.bF)(n,null,{default:(0,s.k6)(()=>[(0,s.bF)(p,{modelValue:i.value,"onUpdate:modelValue":l[2]||(l[2]=e=>i.value=e),variant:"outlined",density:"compact",label:"URL","hide-details":""},null,8,["modelValue"]),(0,s.bF)(p,{modelValue:u.value,"onUpdate:modelValue":l[3]||(l[3]=e=>u.value=e),variant:"outlined",density:"compact",label:"Название","hide-details":"",class:"mt-2"},null,8,["modelValue"]),(0,s.bF)(p,{modelValue:c.value,"onUpdate:modelValue":l[4]||(l[4]=e=>c.value=e),variant:"outlined",density:"compact",label:"Описание (необязательно)","hide-details":"",class:"mt-2"},null,8,["modelValue"]),(0,s.Lk)("div",at,[(0,s.bF)(m,{size:"small",color:"primary",onClick:d},{default:(0,s.k6)(()=>[...l[6]||(l[6]=[(0,s.eW)(" Сохранить ",-1)])]),_:1})])]),_:1})]),_:1})):((0,s.uX)(),(0,s.Wv)(v,{key:0,elevation:"0",class:"link-block",style:{borderRadius:"16px"},onClick:l[1]||(l[1]=e=>t.$emit("edit"))},{default:(0,s.k6)(()=>[(0,s.bF)(n,null,{default:(0,s.k6)(()=>[(0,s.Lk)("div",et,[(0,s.bF)(o,{class:"mr-2"},{default:(0,s.k6)(()=>[...l[5]||(l[5]=[(0,s.eW)("mdi-link",-1)])]),_:1}),(0,s.Lk)("a",{href:e.block.url,target:"_blank",class:"text-body-1 text-primary",onClick:l[0]||(l[0]=(0,a.D$)(()=>{},["stop"]))},(0,r.v_)(e.block.title||e.block.url),9,tt)]),e.block.description?((0,s.uX)(),(0,s.CE)("div",lt,(0,r.v_)(e.block.description),1)):(0,s.Q3)("",!0)]),_:1})]),_:1}))}}};const st=(0,I.A)(ot,[["__scopeId","data-v-0f41892c"]]);var it=st;const rt={key:0,class:"bullet-list"},nt={key:1,class:"text-body-2 text-grey"},ut={class:"d-flex justify-end mt-2"};var ct={__name:"BulletListBlock",props:{block:{type:Object,required:!0},editable:{type:Boolean,default:!1}},emits:["edit","save","delete"],setup(e,{emit:t}){const l=e,o=t,i=l.block.items||[],u=(0,n.KR)([...i]);(0,s.wB)(()=>l.block.items,e=>{u.value=e?[...e]:[]},{deep:!0});const c=()=>{u.value.push("")},d=e=>{u.value.splice(e,1)},v=()=>{o("save",{items:u.value.filter(e=>e.trim())})};return(t,l)=>{const o=(0,s.g2)("v-card-text"),p=(0,s.g2)("v-card"),m=(0,s.g2)("v-text-field"),b=(0,s.g2)("v-icon"),k=(0,s.g2)("v-btn");return e.editable?((0,s.uX)(),(0,s.Wv)(p,{key:1,elevation:"0",variant:"outlined",style:{borderRadius:"16px"}},{default:(0,s.k6)(()=>[(0,s.bF)(o,null,{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(u.value,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"item-edit-row"},[(0,s.bF)(m,{modelValue:u.value[t],"onUpdate:modelValue":e=>u.value[t]=e,variant:"plain",density:"compact","hide-details":"",placeholder:"Элемент списка",onKeydown:(0,a.jR)(c,["enter"])},null,8,["modelValue","onUpdate:modelValue"]),(0,s.bF)(k,{icon:"",size:"small",variant:"text",onClick:e=>d(t)},{default:(0,s.k6)(()=>[(0,s.bF)(b,{size:"small"},{default:(0,s.k6)(()=>[...l[1]||(l[1]=[(0,s.eW)("mdi-close",-1)])]),_:1})]),_:1},8,["onClick"])]))),128)),(0,s.bF)(k,{block:"",variant:"text","prepend-icon":"mdi-plus",onClick:c},{default:(0,s.k6)(()=>[...l[2]||(l[2]=[(0,s.eW)(" Добавить элемент ",-1)])]),_:1}),(0,s.Lk)("div",ut,[(0,s.bF)(k,{size:"small",color:"primary",onClick:v},{default:(0,s.k6)(()=>[...l[3]||(l[3]=[(0,s.eW)(" Сохранить ",-1)])]),_:1})])]),_:1})]),_:1})):((0,s.uX)(),(0,s.Wv)(p,{key:0,elevation:"0",class:"bullet-list-block",style:{borderRadius:"16px"},onClick:l[0]||(l[0]=e=>t.$emit("edit"))},{default:(0,s.k6)(()=>[(0,s.bF)(o,null,{default:(0,s.k6)(()=>[(0,n.R1)(i).length>0?((0,s.uX)(),(0,s.CE)("ul",rt,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,n.R1)(i),(e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t,class:"text-body-1"},(0,r.v_)(e),1))),128))])):((0,s.uX)(),(0,s.CE)("div",nt," Пустой список "))]),_:1})]),_:1}))}}};const dt=(0,I.A)(ct,[["__scopeId","data-v-aa9cb8ce"]]);var vt=dt;const pt={class:"font-weight-bold text-body-2"},mt={class:"text-body-1 ml-2"},bt={key:0,class:"text-body-2 text-grey"},kt={class:"d-flex justify-end mt-2"};var gt={__name:"KeyValueBlock",props:{block:{type:Object,required:!0},editable:{type:Boolean,default:!1}},emits:["edit","save","delete"],setup(e,{emit:t}){const l=e,a=t,o=l.block.pairs||[],i=(0,n.KR)(o.length>0?[...o]:[{key:"",value:""}]);(0,s.wB)(()=>l.block.pairs,e=>{i.value=e&&e.length>0?[...e]:[{key:"",value:""}]},{deep:!0});const u=()=>{i.value.push({key:"",value:""})},c=e=>{i.value.splice(e,1)},d=()=>{a("save",{pairs:i.value.filter(e=>e.key.trim()&&e.value.trim())})};return(t,l)=>{const a=(0,s.g2)("v-card-text"),v=(0,s.g2)("v-card"),p=(0,s.g2)("v-text-field"),m=(0,s.g2)("v-icon"),b=(0,s.g2)("v-btn");return e.editable?((0,s.uX)(),(0,s.Wv)(v,{key:1,elevation:"0",variant:"outlined",style:{borderRadius:"16px"}},{default:(0,s.k6)(()=>[(0,s.bF)(a,null,{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.value,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"pair-edit-row"},[(0,s.bF)(p,{modelValue:e.key,"onUpdate:modelValue":t=>e.key=t,variant:"plain",density:"compact",placeholder:"Ключ","hide-details":""},null,8,["modelValue","onUpdate:modelValue"]),(0,s.bF)(p,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,variant:"plain",density:"compact",placeholder:"Значение","hide-details":""},null,8,["modelValue","onUpdate:modelValue"]),(0,s.bF)(b,{icon:"",size:"small",variant:"text",onClick:e=>c(t)},{default:(0,s.k6)(()=>[(0,s.bF)(m,{size:"small"},{default:(0,s.k6)(()=>[...l[1]||(l[1]=[(0,s.eW)("mdi-close",-1)])]),_:1})]),_:1},8,["onClick"])]))),128)),(0,s.bF)(b,{block:"",variant:"text","prepend-icon":"mdi-plus",onClick:u},{default:(0,s.k6)(()=>[...l[2]||(l[2]=[(0,s.eW)(" Добавить пару ",-1)])]),_:1}),(0,s.Lk)("div",kt,[(0,s.bF)(b,{size:"small",color:"primary",onClick:d},{default:(0,s.k6)(()=>[...l[3]||(l[3]=[(0,s.eW)(" Сохранить ",-1)])]),_:1})])]),_:1})]),_:1})):((0,s.uX)(),(0,s.Wv)(v,{key:0,elevation:"0",class:"key-value-block",style:{borderRadius:"16px"},onClick:l[0]||(l[0]=e=>t.$emit("edit"))},{default:(0,s.k6)(()=>[(0,s.bF)(a,null,{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,n.R1)(o),(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"key-value-pair"},[(0,s.Lk)("span",pt,(0,r.v_)(e.key)+":",1),(0,s.Lk)("span",mt,(0,r.v_)(e.value),1)]))),128)),0===(0,n.R1)(o).length?((0,s.uX)(),(0,s.CE)("div",bt," Пустой список ")):(0,s.Q3)("",!0)]),_:1})]),_:1}))}}};const yt=(0,I.A)(gt,[["__scopeId","data-v-49e136e9"]]);var ft=yt;const ht={class:"d-flex"},_t={class:"flex-1 mr-2"},xt={key:0,class:"pros-list"},Ft={key:1,class:"text-body-2 text-grey"},wt={class:"flex-1 ml-2"},Ct={key:0,class:"cons-list"},Et={key:1,class:"text-body-2 text-grey"},Rt={class:"d-flex"},Vt={class:"flex-1 mr-2"},Pt={class:"flex-1 ml-2"},Wt={class:"d-flex justify-end mt-2"};var Lt={__name:"ProsConsBlock",props:{block:{type:Object,required:!0},editable:{type:Boolean,default:!1}},emits:["edit","save","delete"],setup(e,{emit:t}){const l=e,a=t,o=(0,s.EW)(()=>"PROS"===l.block.type),i=(0,s.EW)(()=>o.value&&l.block.items||[]),u=(0,s.EW)(()=>o.value?[]:l.block.items||[]),c=(0,n.KR)([...i.value]),d=(0,n.KR)([...u.value]);(0,s.wB)(()=>l.block.items,e=>{o.value?c.value=e?[...e]:[]:d.value=e?[...e]:[]},{deep:!0});const v=()=>{c.value.push("")},p=e=>{c.value.splice(e,1)},m=()=>{d.value.push("")},b=e=>{d.value.splice(e,1)},k=()=>{o.value?a("save",{items:c.value.filter(e=>e.trim())}):a("save",{items:d.value.filter(e=>e.trim())})};return(t,l)=>{const a=(0,s.g2)("v-divider"),o=(0,s.g2)("v-card-text"),n=(0,s.g2)("v-card"),g=(0,s.g2)("v-text-field"),y=(0,s.g2)("v-icon"),f=(0,s.g2)("v-btn");return e.editable?((0,s.uX)(),(0,s.Wv)(n,{key:1,elevation:"0",variant:"outlined",style:{borderRadius:"16px"}},{default:(0,s.k6)(()=>[(0,s.bF)(o,null,{default:(0,s.k6)(()=>[(0,s.Lk)("div",Rt,[(0,s.Lk)("div",Vt,[l[5]||(l[5]=(0,s.Lk)("div",{class:"text-caption font-weight-bold text-success mb-2"},"Плюсы",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(c.value,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"item-edit-row"},[(0,s.bF)(g,{modelValue:c.value[t],"onUpdate:modelValue":e=>c.value[t]=e,variant:"plain",density:"compact",placeholder:"Плюс","hide-details":""},null,8,["modelValue","onUpdate:modelValue"]),(0,s.bF)(f,{icon:"",size:"small",variant:"text",onClick:e=>p(t)},{default:(0,s.k6)(()=>[(0,s.bF)(y,{size:"small"},{default:(0,s.k6)(()=>[...l[3]||(l[3]=[(0,s.eW)("mdi-close",-1)])]),_:1})]),_:1},8,["onClick"])]))),128)),(0,s.bF)(f,{block:"",variant:"text",size:"small","prepend-icon":"mdi-plus",onClick:v},{default:(0,s.k6)(()=>[...l[4]||(l[4]=[(0,s.eW)(" Добавить ",-1)])]),_:1})]),(0,s.bF)(a,{vertical:""}),(0,s.Lk)("div",Pt,[l[8]||(l[8]=(0,s.Lk)("div",{class:"text-caption font-weight-bold text-error mb-2"},"Минусы",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(d.value,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"item-edit-row"},[(0,s.bF)(g,{modelValue:d.value[t],"onUpdate:modelValue":e=>d.value[t]=e,variant:"plain",density:"compact",placeholder:"Минус","hide-details":""},null,8,["modelValue","onUpdate:modelValue"]),(0,s.bF)(f,{icon:"",size:"small",variant:"text",onClick:e=>b(t)},{default:(0,s.k6)(()=>[(0,s.bF)(y,{size:"small"},{default:(0,s.k6)(()=>[...l[6]||(l[6]=[(0,s.eW)("mdi-close",-1)])]),_:1})]),_:1},8,["onClick"])]))),128)),(0,s.bF)(f,{block:"",variant:"text",size:"small","prepend-icon":"mdi-plus",onClick:m},{default:(0,s.k6)(()=>[...l[7]||(l[7]=[(0,s.eW)(" Добавить ",-1)])]),_:1})])]),(0,s.Lk)("div",Wt,[(0,s.bF)(f,{size:"small",color:"primary",onClick:k},{default:(0,s.k6)(()=>[...l[9]||(l[9]=[(0,s.eW)(" Сохранить ",-1)])]),_:1})])]),_:1})]),_:1})):((0,s.uX)(),(0,s.Wv)(n,{key:0,elevation:"0",class:"pros-cons-block",style:{borderRadius:"16px"},onClick:l[0]||(l[0]=e=>t.$emit("edit"))},{default:(0,s.k6)(()=>[(0,s.bF)(o,null,{default:(0,s.k6)(()=>[(0,s.Lk)("div",ht,[(0,s.Lk)("div",_t,[l[1]||(l[1]=(0,s.Lk)("div",{class:"text-caption font-weight-bold text-success mb-2"},"Плюсы",-1)),i.value.length>0?((0,s.uX)(),(0,s.CE)("ul",xt,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.value,(e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t,class:"text-body-2"},(0,r.v_)(e),1))),128))])):((0,s.uX)(),(0,s.CE)("div",Ft,"Нет плюсов"))]),(0,s.bF)(a,{vertical:""}),(0,s.Lk)("div",wt,[l[2]||(l[2]=(0,s.Lk)("div",{class:"text-caption font-weight-bold text-error mb-2"},"Минусы",-1)),u.value.length>0?((0,s.uX)(),(0,s.CE)("ul",Ct,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(u.value,(e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t,class:"text-body-2"},(0,r.v_)(e),1))),128))])):((0,s.uX)(),(0,s.CE)("div",Et,"Нет минусов"))])])]),_:1})]),_:1}))}}};const Xt=(0,I.A)(Lt,[["__scopeId","data-v-77bdca82"]]);var Bt=Xt;const It={class:"page-editor"},Tt={key:0,class:"text-center py-8"},At={key:1},Kt={class:"add-block-divider"},Ut={key:0,class:"empty-blocks"};var St={__name:"PageEditor",setup(e){const t=(0,D.lq)(),l=(0,D.rd)(),a=z(),o=t.params.pageId,i=(0,n.KR)(""),r=(0,n.KR)(null),u=(0,n.KR)(!1),c=(0,n.KR)(0),d=(0,n.KR)(!1),v=(0,s.EW)(()=>a.currentPage?.blocks?[...a.currentPage.blocks].sort((e,t)=>e.order-t.order):[]),p=e=>{const t={TEXT:Y,CHECKLIST:se,IDEA_CARD:Be,STATUS:Ke,HEADING:$e,QUOTE:Je,DIVIDER:Ze,LINK:it,BULLET_LIST:vt,KEY_VALUE:ft,PROS:Bt,CONS:Bt};return t[e]||Y},m=async()=>{i.value&&i.value!==a.currentPage?.title&&await a.updatePage(o,{title:i.value})},b=e=>{r.value=e},k=async(e,t)=>{await a.updateBlock(o,e,t),r.value=null},g=async e=>{await a.deleteBlock(o,e)},y=e=>{c.value=e,u.value=!0},f=async e=>{const t={type:e,order:c.value};"TEXT"===e?t.content="":"CHECKLIST"===e?t.items=[]:"IDEA_CARD"===e?t.content="":"STATUS"===e&&(t.status="TODO",t.color="blue"),await a.createBlock(o,t),u.value=!1},h=()=>{d.value=!0},_=async()=>{await a.deletePage(o),l.push("/")};return(0,s.sV)(async()=>{window.Telegram?.WebApp?.BackButton&&(window.Telegram.WebApp.BackButton.show(),window.Telegram.WebApp.BackButton.onClick(()=>{l.push("/")})),await a.fetchPage(o),a.currentPage&&(i.value=a.currentPage.title||"")}),(0,s.wB)(()=>a.currentPage,e=>{e&&(i.value=e.title||"")}),(e,t)=>{const l=(0,s.g2)("v-text-field"),o=(0,s.g2)("v-icon"),x=(0,s.g2)("v-btn"),F=(0,s.g2)("v-list-item-title"),w=(0,s.g2)("v-list-item"),C=(0,s.g2)("v-list"),E=(0,s.g2)("v-menu"),R=(0,s.g2)("v-app-bar"),V=(0,s.g2)("v-progress-circular"),P=(0,s.g2)("v-container");return(0,s.uX)(),(0,s.CE)("div",It,[(0,s.bF)(R,{elevation:"0",color:"transparent",class:"px-4"},{default:(0,s.k6)(()=>[(0,s.bF)(l,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),placeholder:"Название страницы...",variant:"plain","hide-details":"",class:"title-input",onBlur:m},null,8,["modelValue"]),(0,s.bF)(E,null,{activator:(0,s.k6)(({props:e})=>[(0,s.bF)(x,(0,s.v6)({icon:"",variant:"text"},e),{default:(0,s.k6)(()=>[(0,s.bF)(o,null,{default:(0,s.k6)(()=>[...t[3]||(t[3]=[(0,s.eW)("mdi-dots-vertical",-1)])]),_:1})]),_:1},16)]),default:(0,s.k6)(()=>[(0,s.bF)(C,null,{default:(0,s.k6)(()=>[(0,s.bF)(w,{onClick:h},{default:(0,s.k6)(()=>[(0,s.bF)(F,null,{default:(0,s.k6)(()=>[...t[4]||(t[4]=[(0,s.eW)("Удалить страницу",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),(0,s.bF)(P,{class:"py-4"},{default:(0,s.k6)(()=>[(0,n.R1)(a).loading?((0,s.uX)(),(0,s.CE)("div",Tt,[(0,s.bF)(V,{indeterminate:"",color:"primary"})])):(0,n.R1)(a).currentPage?((0,s.uX)(),(0,s.CE)("div",At,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(v.value,(e,l)=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"block-container"},[((0,s.uX)(),(0,s.Wv)((0,s.$y)(p(e.type)),{block:e,editable:r.value===e.id,onEdit:t=>b(e.id),onSave:t=>k(e.id,t),onDelete:t=>g(e.id)},null,40,["block","editable","onEdit","onSave","onDelete"])),(0,s.Lk)("div",Kt,[(0,s.bF)(x,{icon:"",size:"small",variant:"text",color:"grey",onClick:e=>y(l+1)},{default:(0,s.k6)(()=>[(0,s.bF)(o,null,{default:(0,s.k6)(()=>[...t[5]||(t[5]=[(0,s.eW)("mdi-plus",-1)])]),_:1})]),_:1},8,["onClick"])])]))),128)),0===v.value.length?((0,s.uX)(),(0,s.CE)("div",Ut,[(0,s.bF)(o,{size:"60",color:"grey-lighten-1"},{default:(0,s.k6)(()=>[...t[6]||(t[6]=[(0,s.eW)("mdi-text-box-outline",-1)])]),_:1}),t[7]||(t[7]=(0,s.Lk)("p",{class:"text-body-2 text-grey mt-4"},"Нажмите + чтобы добавить блок",-1))])):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0)]),_:1}),(0,s.bF)(Fe,{modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=e=>u.value=e),"insert-order":c.value,onBlockSelected:f},null,8,["modelValue","insert-order"]),(0,s.bF)(Re,{modelValue:d.value,"onUpdate:modelValue":t[2]||(t[2]=e=>d.value=e),title:"Удалить страницу?",onConfirm:_},null,8,["modelValue"])])}}};const Dt=(0,I.A)(St,[["__scopeId","data-v-9734180a"]]);var Ot=Dt,zt={__name:"PaymentSuccessModal",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue","close"],setup(e,{emit:t}){const l=t,a=()=>{l("close"),l("update:modelValue",!1)};return(t,l)=>{const o=(0,s.g2)("v-card-text"),i=(0,s.g2)("v-btn"),r=(0,s.g2)("v-card-actions"),n=(0,s.g2)("v-card"),u=(0,s.g2)("v-dialog");return(0,s.uX)(),(0,s.Wv)(u,{"model-value":e.modelValue,"max-width":"400",persistent:"","onUpdate:modelValue":l[0]||(l[0]=e=>t.$emit("update:modelValue",e))},{default:(0,s.k6)(()=>[(0,s.bF)(n,{style:{borderRadius:"24px"}},{default:(0,s.k6)(()=>[(0,s.bF)(o,{class:"text-center py-8"},{default:(0,s.k6)(()=>[...l[1]||(l[1]=[(0,s.Lk)("div",{class:"confetti"},"🎉",-1),(0,s.Lk)("h2",{class:"text-h5 mt-4 mb-2"},"Подписка активирована!",-1),(0,s.Lk)("p",{class:"text-body-1 text-grey"}," Теперь у вас есть доступ ко всем Premium функциям ",-1)])]),_:1}),(0,s.bF)(r,null,{default:(0,s.k6)(()=>[(0,s.bF)(i,{block:"",color:"primary",size:"large",onClick:a},{default:(0,s.k6)(()=>[...l[2]||(l[2]=[(0,s.eW)(" Начать пользоваться ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}};const jt=(0,I.A)(zt,[["__scopeId","data-v-4b20f3a0"]]);var $t=jt;const qt={class:"subscription"},Nt={class:"d-flex align-center justify-space-between"},Qt={class:"text-h5 font-weight-bold"},Mt={key:0,class:"text-caption text-grey mt-1"},Ht={class:"mb-4"},Jt={class:"d-flex justify-space-between mb-2"},Yt={class:"text-body-2"},Gt={key:0,class:"text-caption text-error mt-1"},Zt={class:"d-flex justify-space-between mb-2"},el={class:"text-body-2"},tl={class:"plans-list"},ll={class:"d-flex justify-space-between align-center mb-2"},al={class:"text-h6 font-weight-bold"},ol={class:"text-h4 font-weight-bold text-primary mt-2"},sl={class:"text-body-2 text-grey mb-2"};var il={__name:"Subscription",setup(e){const t=ye(),l=(0,n.KR)(!1),o=e=>e?new Date(e).toLocaleDateString("ru-RU"):"",i=async e=>{try{const a=await t.createInvoice(e.id);a.invoiceLink&&(window.Telegram?.WebApp?.openInvoice?window.Telegram.WebApp.openInvoice(a.invoiceLink,e=>{"paid"===e&&(l.value=!0,t.fetchSubscription(),t.fetchLimits())}):window.open(a.invoiceLink,"_blank"))}catch(a){console.error("Ошибка при создании инвойса:",a)}},u=()=>{l.value=!1};return(0,s.sV)(async()=>{await t.fetchSubscription(),await t.fetchLimits(),await t.fetchPlans()}),(e,c)=>{const d=(0,s.g2)("v-icon"),v=(0,s.g2)("v-btn"),p=(0,s.g2)("v-app-bar-title"),m=(0,s.g2)("v-app-bar"),b=(0,s.g2)("v-card-title"),k=(0,s.g2)("v-chip"),g=(0,s.g2)("v-card-text"),y=(0,s.g2)("v-card"),f=(0,s.g2)("v-progress-linear"),h=(0,s.g2)("v-list-item-title"),_=(0,s.g2)("v-list-item"),x=(0,s.g2)("v-list"),F=(0,s.g2)("v-container");return(0,s.uX)(),(0,s.CE)("div",qt,[(0,s.bF)(m,{elevation:"0",color:"transparent",class:"px-4"},{default:(0,s.k6)(()=>[(0,s.bF)(v,{icon:"",variant:"text",onClick:c[0]||(c[0]=t=>e.$router.push("/"))},{default:(0,s.k6)(()=>[(0,s.bF)(d,null,{default:(0,s.k6)(()=>[...c[2]||(c[2]=[(0,s.eW)("mdi-arrow-left",-1)])]),_:1})]),_:1}),(0,s.bF)(p,null,{default:(0,s.k6)(()=>[...c[3]||(c[3]=[(0,s.eW)("Подписка",-1)])]),_:1})]),_:1}),(0,s.bF)(F,{class:"py-4"},{default:(0,s.k6)(()=>[(0,s.bF)(y,{elevation:"0",class:"mb-4",style:{borderRadius:"24px"}},{default:(0,s.k6)(()=>[(0,s.bF)(b,{class:"text-h6"},{default:(0,s.k6)(()=>[...c[4]||(c[4]=[(0,s.eW)(" Текущий план ",-1)])]),_:1}),(0,s.bF)(g,null,{default:(0,s.k6)(()=>[(0,s.Lk)("div",Nt,[(0,s.Lk)("div",null,[(0,s.Lk)("div",Qt,(0,r.v_)((0,n.R1)(t).subscription?.planName||"FREE"),1),(0,n.R1)(t).isPremium&&(0,n.R1)(t).subscription?.endDate?((0,s.uX)(),(0,s.CE)("div",Mt," До "+(0,r.v_)(o((0,n.R1)(t).subscription.endDate)),1)):(0,s.Q3)("",!0)]),(0,s.bF)(k,{color:(0,n.R1)(t).isPremium?"success":"grey",size:"large"},{default:(0,s.k6)(()=>[(0,s.eW)((0,r.v_)((0,n.R1)(t).isPremium?"PREMIUM":"FREE"),1)]),_:1},8,["color"])])]),_:1})]),_:1}),(0,s.bF)(y,{elevation:"0",class:"mb-4",style:{borderRadius:"24px"}},{default:(0,s.k6)(()=>[(0,s.bF)(b,{class:"text-h6"},{default:(0,s.k6)(()=>[...c[5]||(c[5]=[(0,s.eW)(" Лимиты использования ",-1)])]),_:1}),(0,s.bF)(g,null,{default:(0,s.k6)(()=>[(0,s.Lk)("div",Ht,[(0,s.Lk)("div",Jt,[c[6]||(c[6]=(0,s.Lk)("span",{class:"text-body-2"},"Страницы",-1)),(0,s.Lk)("span",Yt,(0,r.v_)((0,n.R1)(t).currentPages)+" / "+(0,r.v_)((0,n.R1)(t).maxPages),1)]),(0,s.bF)(f,{"model-value":(0,n.R1)(t).currentPages/(0,n.R1)(t).maxPages*100,color:(0,n.R1)(t).pagesLimitReached?"error":"primary",height:"8",rounded:""},null,8,["model-value","color"]),(0,n.R1)(t).pagesLimitReached?((0,s.uX)(),(0,s.CE)("div",Gt," Достигнут лимит страниц ")):(0,s.Q3)("",!0)]),(0,s.Lk)("div",null,[(0,s.Lk)("div",Zt,[c[7]||(c[7]=(0,s.Lk)("span",{class:"text-body-2"},"Блоков на странице",-1)),(0,s.Lk)("span",el," Макс. "+(0,r.v_)((0,n.R1)(t).maxBlocksPerPage),1)])])]),_:1})]),_:1}),(0,n.R1)(t).canUpgrade?((0,s.uX)(),(0,s.Wv)(y,{key:0,elevation:"0",style:{borderRadius:"24px"}},{default:(0,s.k6)(()=>[(0,s.bF)(b,{class:"text-h6"},{default:(0,s.k6)(()=>[...c[8]||(c[8]=[(0,s.eW)(" Доступные планы ",-1)])]),_:1}),(0,s.bF)(g,null,{default:(0,s.k6)(()=>[(0,s.Lk)("div",tl,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,n.R1)(t).plans,e=>((0,s.uX)(),(0,s.Wv)(y,{key:e.id,elevation:"0",class:"plan-card mb-3",style:(0,r.Tr)({borderRadius:"16px",border:e.recommended?"2px solid primary":"1px solid rgba(0,0,0,0.1)"}),onClick:t=>i(e)},{default:(0,s.k6)(()=>[(0,s.bF)(g,null,{default:(0,s.k6)(()=>[(0,s.Lk)("div",ll,[(0,s.Lk)("div",null,[(0,s.Lk)("div",al,(0,r.v_)(e.name),1),(0,s.Lk)("div",ol,(0,r.v_)(e.price)+" ⭐ ",1)]),e.recommended?((0,s.uX)(),(0,s.Wv)(k,{key:0,color:"primary",size:"small"},{default:(0,s.k6)(()=>[...c[9]||(c[9]=[(0,s.eW)(" Рекомендуется ",-1)])]),_:1})):(0,s.Q3)("",!0)]),(0,s.Lk)("div",sl,(0,r.v_)(e.durationDays)+" дней ",1),(0,s.bF)(x,{density:"compact",class:"pa-0"},{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.benefits,e=>((0,s.uX)(),(0,s.Wv)(_,{key:e,class:"pa-0"},{prepend:(0,s.k6)(()=>[(0,s.bF)(d,{size:"small",color:"success"},{default:(0,s.k6)(()=>[...c[10]||(c[10]=[(0,s.eW)("mdi-check",-1)])]),_:1})]),default:(0,s.k6)(()=>[(0,s.bF)(h,{class:"text-body-2"},{default:(0,s.k6)(()=>[(0,s.eW)((0,r.v_)(e),1)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024),(0,s.bF)(v,{block:"",color:"primary",class:"mt-3",onClick:(0,a.D$)(t=>i(e),["stop"])},{default:(0,s.k6)(()=>[...c[11]||(c[11]=[(0,s.eW)(" Выбрать ",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1032,["style","onClick"]))),128))])]),_:1})]),_:1})):(0,s.Q3)("",!0)]),_:1}),(0,s.bF)($t,{modelValue:l.value,"onUpdate:modelValue":c[1]||(c[1]=e=>l.value=e),onClose:u},null,8,["modelValue"])])}}};const rl=(0,I.A)(il,[["__scopeId","data-v-7365fb97"]]);var nl=rl;const ul=[{path:"/",name:"Dashboard",component:ke},{path:"/pages/:pageId",name:"PageEditor",component:Ot,props:!0},{path:"/subscription",name:"Subscription",component:nl}],cl=(0,D.aE)({history:(0,D.LA)(),routes:ul});var dl=cl,vl=l(6169),pl=l(880),ml=l(4597),bl=(l(5524),(0,vl.$N)({components:pl,directives:ml,theme:{defaultTheme:"light",themes:{light:{colors:{primary:"#0088cc",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107",background:"#F8F9FA",surface:"#FFFFFF","on-surface":"#000000"}},dark:{colors:{primary:"#5C9CE6",secondary:"#B0B0B0",accent:"#82B1FF",error:"#FF5252",info:"#64B5F6",success:"#81C784",warning:"#FFB74D",background:"#121212",surface:"#1E1E1E","on-surface":"#FFFFFF"}}}},defaults:{VCard:{elevation:0,style:"border-radius: 24px; box-shadow: 0 4px 20px rgba(0,0,0,0.08);"},VBtn:{style:"border-radius: 16px; text-transform: none;"},VTextField:{variant:"solo-filled",style:"border-radius: 16px;"}}}));function kl(){try{const e=(0,c.aO)();if(window.Telegram?.WebApp?.themeParams){const e=window.Telegram.WebApp.themeParams,t=document.documentElement;e.bg_color&&t.style.setProperty("--tg-theme-bg-color",e.bg_color),e.text_color&&t.style.setProperty("--tg-theme-text-color",e.text_color),e.hint_color&&t.style.setProperty("--tg-theme-hint-color",e.hint_color),e.link_color&&t.style.setProperty("--tg-theme-link-color",e.link_color),e.button_color&&t.style.setProperty("--tg-theme-button-color",e.button_color),e.button_text_color&&t.style.setProperty("--tg-theme-button-text-color",e.button_text_color)}return{launchParams:e}}catch(e){return console.warn("Telegram SDK не доступен:",e),null}}const gl=(0,a.Ef)(S),yl=(0,o.Ey)();gl.use(yl),gl.use(dl),gl.use(bl),kl(),gl.mount("#app")}},t={};function l(a){var o=t[a];if(void 0!==o)return o.exports;var s=t[a]={exports:{}};return e[a].call(s.exports,s,s.exports,l),s.exports}l.m=e,function(){var e=[];l.O=function(t,a,o,s){if(!a){var i=1/0;for(c=0;c<e.length;c++){a=e[c][0],o=e[c][1],s=e[c][2];for(var r=!0,n=0;n<a.length;n++)(!1&s||i>=s)&&Object.keys(l.O).every(function(e){return l.O[e](a[n])})?a.splice(n--,1):(r=!1,s<i&&(i=s));if(r){e.splice(c--,1);var u=o();void 0!==u&&(t=u)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[a,o,s]}}(),function(){l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,{a:t}),t}}(),function(){l.d=function(e,t){for(var a in t)l.o(t,a)&&!l.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};l.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,s,i=a[0],r=a[1],n=a[2],u=0;if(i.some(function(t){return 0!==e[t]})){for(o in r)l.o(r,o)&&(l.m[o]=r[o]);if(n)var c=n(l)}for(t&&t(a);u<i.length;u++)s=i[u],l.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return l.O(c)},a=self["webpackChunkmini_notes_ui"]=self["webpackChunkmini_notes_ui"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=l.O(void 0,[504],function(){return l(1303)});a=l.O(a)})();
//# sourceMappingURL=app.74c185e8.js.map