(function(){"use strict";var e={3541:function(e,t,l){var a=l(5130),o=l(657),i=l(6768),s={__name:"App",setup(e){return(0,i.sV)(()=>{if(window.Telegram?.WebApp?.themeParams){const e=window.Telegram.WebApp.themeParams,t=document.documentElement;e.bg_color&&(t.style.setProperty("--tg-theme-bg-color",e.bg_color),document.body.style.backgroundColor=e.bg_color)}}),(e,t)=>{const l=(0,i.g2)("router-view"),a=(0,i.g2)("v-main"),o=(0,i.g2)("v-app");return(0,i.uX)(),(0,i.Wv)(o,null,{default:(0,i.k6)(()=>[(0,i.bF)(a,null,{default:(0,i.k6)(()=>[(0,i.bF)(l)]),_:1})]),_:1})}}};const r=s;var n=r,c=l(8728),u=(l(4114),l(144)),d=l(4232),v=(l(8111),l(2489),l(3110),l(4603),l(7566),l(8721),l(4373)),p=l(781);const m=v.A.create({baseURL:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_API_URL||"https://owa.my-tg-notes.ru/test/api"});m.interceptors.request.use(e=>{try{let l=null;try{const e=(0,p.aO)();l=e?.initDataRaw}catch(t){if(window.Telegram?.WebApp?.initData)l=window.Telegram.WebApp.initData;else if(window.Telegram?.WebApp?.initDataUnsafe){const e=window.Telegram.WebApp.initDataUnsafe,t=new URLSearchParams;e.user&&t.append("user",JSON.stringify(e.user)),e.auth_date&&t.append("auth_date",e.auth_date),e.hash&&t.append("hash",e.hash),l=t.toString()}}l&&(e.headers.Authorization=`tma ${l}`)}catch(t){console.error("ÐŸÑ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½Ð¾ Ð²Ð½Ðµ Telegram",t)}return e}),m.interceptors.response.use(e=>e,e=>{if(e.response){const{status:t}=e.response;401===t?console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ð¸. ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð¸Ð· Telegram."):403===t?"/subscription"!==window.location.pathname&&(window.location.href="/subscription"):404===t&&console.error("Ð¡Ñ‚Ñ€Ð°Ð½Ð¸Ñ†Ð° Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ð°")}return Promise.reject(e)});var b=m;const k={getPages(e={}){return b.get("/pages",{params:e})},getPage(e){return b.get(`/pages/${e}`)},createPage(e){return b.post("/pages",e)},updatePage(e,t){return b.put(`/pages/${e}`,t)},deletePage(e){return b.delete(`/pages/${e}`)},searchPages(e,t={}){return b.get("/pages/search",{params:{q:e,...t}})},getBlockTypes(){return b.get("/pages/block-types")},createBlock(e,t){return b.post(`/pages/${e}/blocks`,t)},updateBlock(e,t,l){return b.put(`/pages/${e}/blocks/${t}`,l)},deleteBlock(e,t){return b.delete(`/pages/${e}/blocks/${t}`)}},g=(0,o.nY)("pages",{state:()=>({pages:[],currentPage:null,loading:!1,error:null,pagination:{page:0,size:20,total:0},searchQuery:"",blockTypes:[]}),getters:{isEmpty:e=>0===e.pages.length,hasMore:e=>{const{page:t,size:l,total:a}=e.pagination;return(t+1)*l<a}},actions:{async fetchPages(e={}){this.loading=!0,this.error=null;try{const t=await k.getPages({page:this.pagination.page,size:this.pagination.size,...e});return this.pages=t.data.content||t.data.pages||[],void 0!==t.data.totalElements&&(this.pagination.total=t.data.totalElements),t.data}catch(t){throw this.error=t.message,t}finally{this.loading=!1}},async searchPages(e,t={}){this.loading=!0,this.error=null,this.searchQuery=e;try{const l=await k.searchPages(e,{page:this.pagination.page,size:this.pagination.size,...t});return this.pages=l.data.content||l.data.pages||[],void 0!==l.data.totalElements&&(this.pagination.total=l.data.totalElements),l.data}catch(l){throw this.error=l.message,l}finally{this.loading=!1}},async fetchPage(e){this.loading=!0,this.error=null;try{const t=await k.getPage(e);return this.currentPage=t.data,t.data}catch(t){throw this.error=t.message,t}finally{this.loading=!1}},async createPage(e){this.loading=!0,this.error=null;try{const t=await k.createPage({title:e});return this.pages.unshift(t.data),t.data}catch(t){throw this.error=t.message,t}finally{this.loading=!1}},async updatePage(e,t){this.loading=!0,this.error=null;try{const l=await k.updatePage(e,t);this.currentPage?.id===e&&(this.currentPage=l.data);const a=this.pages.findIndex(t=>t.id===e);return-1!==a&&(this.pages[a]=l.data),l.data}catch(l){throw this.error=l.message,l}finally{this.loading=!1}},async deletePage(e){this.loading=!0,this.error=null;try{await k.deletePage(e),this.pages=this.pages.filter(t=>t.id!==e),this.currentPage?.id===e&&(this.currentPage=null)}catch(t){throw this.error=t.message,t}finally{this.loading=!1}},async fetchBlockTypes(){try{const e=await k.getBlockTypes();return this.blockTypes=e.data.blocks||[],this.blockTypes}catch(e){throw this.error=e.message,e}},async createBlock(e,t){this.loading=!0,this.error=null;try{const l=await k.createBlock(e,t);return this.currentPage?.id===e&&(this.currentPage.blocks||(this.currentPage.blocks=[]),this.currentPage.blocks.push(l.data),this.currentPage.blocks.sort((e,t)=>e.order-t.order)),l.data}catch(l){throw this.error=l.message,l}finally{this.loading=!1}},async updateBlock(e,t,l){this.loading=!0,this.error=null;try{const a=await k.updateBlock(e,t,l);if(this.currentPage?.id===e&&this.currentPage.blocks){const e=this.currentPage.blocks.findIndex(e=>e.id===t);-1!==e&&(this.currentPage.blocks[e]=a.data)}return a.data}catch(a){throw this.error=a.message,a}finally{this.loading=!1}},async deleteBlock(e,t){this.loading=!0,this.error=null;try{await k.deleteBlock(e,t),this.currentPage?.id===e&&this.currentPage.blocks&&(this.currentPage.blocks=this.currentPage.blocks.filter(e=>e.id!==t))}catch(l){throw this.error=l.message,l}finally{this.loading=!1}},resetPagination(){this.pagination.page=0},nextPage(){this.hasMore&&this.pagination.page++}}});function y(e,t){let l;return function(...a){const o=()=>{clearTimeout(l),e(...a)};clearTimeout(l),l=setTimeout(o,t)}}var h={__name:"CreatePageModal",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue","created"],setup(e,{emit:t}){const l=e,o=t,s=g(),r=(0,u.KR)(""),n=(0,u.KR)(!1);(0,i.wB)(()=>l.modelValue,e=>{e&&(r.value="")});const c=async()=>{if(r.value.trim()){n.value=!0;try{const e=await s.createPage(r.value.trim());o("created",e),o("update:modelValue",!1),r.value=""}catch(e){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ð¸ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñ‹:",e)}finally{n.value=!1}}};return(t,l)=>{const o=(0,i.g2)("v-card-title"),s=(0,i.g2)("v-text-field"),u=(0,i.g2)("v-card-text"),d=(0,i.g2)("v-spacer"),v=(0,i.g2)("v-btn"),p=(0,i.g2)("v-card-actions"),m=(0,i.g2)("v-card"),b=(0,i.g2)("v-dialog");return(0,i.uX)(),(0,i.Wv)(b,{"model-value":e.modelValue,"max-width":"400","onUpdate:modelValue":l[2]||(l[2]=e=>t.$emit("update:modelValue",e))},{default:(0,i.k6)(()=>[(0,i.bF)(m,{style:{borderRadius:"24px"}},{default:(0,i.k6)(()=>[(0,i.bF)(o,{class:"text-h6"},{default:(0,i.k6)(()=>[...l[3]||(l[3]=[(0,i.eW)(" Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð½Ð¾Ð²ÑƒÑŽ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñƒ ",-1)])]),_:1}),(0,i.bF)(u,null,{default:(0,i.k6)(()=>[(0,i.bF)(s,{modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=e=>r.value=e),label:"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñ‹",variant:"outlined",density:"compact",autofocus:"",onKeydown:(0,a.jR)(c,["enter"])},null,8,["modelValue"])]),_:1}),(0,i.bF)(p,null,{default:(0,i.k6)(()=>[(0,i.bF)(d),(0,i.bF)(v,{variant:"text",onClick:l[1]||(l[1]=e=>t.$emit("update:modelValue",!1))},{default:(0,i.k6)(()=>[...l[4]||(l[4]=[(0,i.eW)(" ÐžÑ‚Ð¼ÐµÐ½Ð° ",-1)])]),_:1}),(0,i.bF)(v,{color:"primary",loading:n.value,disabled:!r.value.trim(),onClick:c},{default:(0,i.k6)(()=>[...l[5]||(l[5]=[(0,i.eW)(" Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}};const f=h;var _=f;const x={key:0,class:"text-body-2"},F={key:1,class:"text-body-1"};var w={__name:"TextBlock",props:{block:{type:Object,required:!0},editable:{type:Boolean,default:!1},preview:{type:Boolean,default:!1}},emits:["edit","save","delete"],setup(e,{emit:t}){const l=e,o=t,s=(0,u.KR)(l.block.content||"");(0,i.wB)(()=>l.block.content,e=>{s.value=e||""});const r=()=>{o("save",{content:s.value})};return(t,l)=>{const o=(0,i.g2)("v-card-text"),n=(0,i.g2)("v-card"),c=(0,i.g2)("v-textarea");return e.editable?((0,i.uX)(),(0,i.Wv)(c,{key:1,modelValue:s.value,"onUpdate:modelValue":l[1]||(l[1]=e=>s.value=e),variant:"outlined","auto-grow":"",rows:"2","hide-details":"",onBlur:r,onKeydown:(0,a.jR)((0,a.D$)(r,["ctrl"]),["enter"])},null,8,["modelValue","onKeydown"])):((0,i.uX)(),(0,i.Wv)(n,{key:0,elevation:"0",class:"text-block",style:{borderRadius:"16px"},onClick:l[0]||(l[0]=e=>t.$emit("edit"))},{default:(0,i.k6)(()=>[(0,i.bF)(o,null,{default:(0,i.k6)(()=>[e.preview?((0,i.uX)(),(0,i.CE)("div",x,(0,d.v_)(e.block.content||"Ð¢ÐµÐºÑÑ‚"),1)):((0,i.uX)(),(0,i.CE)("div",F,(0,d.v_)(e.block.content||"ÐŸÑƒÑÑ‚Ð¾Ð¹ Ñ‚ÐµÐºÑÑ‚"),1))]),_:1})]),_:1}))}}},C=l(1241);const V=(0,C.A)(w,[["__scopeId","data-v-f66cf11a"]]);var E=V;const R={key:0,class:"preview-items"},P={class:"ml-2 text-body-2"},W={key:1,class:"items-list"},X={key:2,class:"text-body-2 text-grey"},L={class:"d-flex justify-end mt-2"};var B={__name:"ChecklistBlock",props:{block:{type:Object,required:!0},editable:{type:Boolean,default:!1},preview:{type:Boolean,default:!1}},emits:["edit","save","delete"],setup(e,{emit:t}){const l=e,o=t,s=(0,i.EW)(()=>l.block.items||[]),r=(0,u.KR)([...s.value]);(0,i.wB)(()=>l.block.items,e=>{r.value=e?[...e]:[]},{deep:!0});const n=e=>{if(!l.editable){const t=[...s.value];t[e].checked=!t[e].checked,o("save",{items:t})}},c=()=>{r.value.push({text:"",checked:!1})},v=e=>{r.value.splice(e,1)},p=()=>{o("save",{items:r.value.filter(e=>e.text.trim())})};return(t,l)=>{const o=(0,i.g2)("v-icon"),u=(0,i.g2)("v-checkbox"),m=(0,i.g2)("v-card-text"),b=(0,i.g2)("v-card"),k=(0,i.g2)("v-text-field"),g=(0,i.g2)("v-btn");return e.editable?((0,i.uX)(),(0,i.Wv)(b,{key:1,elevation:"0",variant:"outlined",style:{borderRadius:"16px"}},{default:(0,i.k6)(()=>[(0,i.bF)(m,null,{default:(0,i.k6)(()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.value,(e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t,class:"item-edit-row"},[(0,i.bF)(u,{modelValue:e.checked,"onUpdate:modelValue":t=>e.checked=t,"hide-details":"",density:"compact"},null,8,["modelValue","onUpdate:modelValue"]),(0,i.bF)(k,{modelValue:e.text,"onUpdate:modelValue":t=>e.text=t,variant:"plain",density:"compact","hide-details":"",placeholder:"Ð­Ð»ÐµÐ¼ÐµÐ½Ñ‚ ÑÐ¿Ð¸ÑÐºÐ°",onKeydown:(0,a.jR)(c,["enter"])},null,8,["modelValue","onUpdate:modelValue"]),(0,i.bF)(g,{icon:"",size:"small",variant:"text",onClick:e=>v(t)},{default:(0,i.k6)(()=>[(0,i.bF)(o,{size:"small"},{default:(0,i.k6)(()=>[...l[1]||(l[1]=[(0,i.eW)("mdi-close",-1)])]),_:1})]),_:1},8,["onClick"])]))),128)),(0,i.bF)(g,{block:"",variant:"text","prepend-icon":"mdi-plus",onClick:c},{default:(0,i.k6)(()=>[...l[2]||(l[2]=[(0,i.eW)(" Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚ ",-1)])]),_:1}),(0,i.Lk)("div",L,[(0,i.bF)(g,{size:"small",color:"primary",onClick:p},{default:(0,i.k6)(()=>[...l[3]||(l[3]=[(0,i.eW)(" Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ ",-1)])]),_:1})])]),_:1})]),_:1})):((0,i.uX)(),(0,i.Wv)(b,{key:0,elevation:"0",class:"checklist-block",style:{borderRadius:"16px"},onClick:l[0]||(l[0]=e=>t.$emit("edit"))},{default:(0,i.k6)(()=>[(0,i.bF)(m,null,{default:(0,i.k6)(()=>[e.preview&&s.value.length>0?((0,i.uX)(),(0,i.CE)("div",R,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.value.slice(0,2),(e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t,class:"preview-item"},[(0,i.bF)(o,{size:"small",color:e.checked?"success":"grey"},{default:(0,i.k6)(()=>[(0,i.eW)((0,d.v_)(e.checked?"mdi-check-circle":"mdi-circle-outline"),1)]),_:2},1032,["color"]),(0,i.Lk)("span",P,(0,d.v_)(e.text),1)]))),128))])):s.value.length>0?((0,i.uX)(),(0,i.CE)("div",W,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.value,(e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t,class:"item-row"},[(0,i.bF)(u,{"model-value":e.checked,"hide-details":"",density:"compact",onClick:(0,a.D$)(e=>n(t),["stop"])},null,8,["model-value","onClick"]),(0,i.Lk)("span",{class:(0,d.C4)(["text-body-1 ml-2",{"text-decoration-line-through":e.checked}])},(0,d.v_)(e.text),3)]))),128))])):((0,i.uX)(),(0,i.CE)("div",X," ÐŸÑƒÑÑ‚Ð¾Ð¹ Ñ‡ÐµÐº-Ð»Ð¸ÑÑ‚ "))]),_:1})]),_:1}))}}};const T=(0,C.A)(B,[["__scopeId","data-v-0af89067"]]);var I=T;const K={class:"dashboard"},U={key:0,class:"empty-state"},A={key:1,class:"masonry-grid"},S=["onClick"],O={key:0,class:"preview"},D={key:1,class:"text-grey text-body-2"},z={class:"mt-2 text-caption text-grey"},$={key:2,class:"text-center py-8"};var j={__name:"Dashboard",setup(e){const t=(0,c.rd)(),l=g(),a=(0,u.KR)(""),o=(0,u.KR)(!1),s=y(e=>{const t=e.target.value.trim();t?l.searchPages(t):l.fetchPages()},300),r=e=>{t.push(`/pages/${e}`)},n=()=>{o.value=!0},v=e=>{t.push(`/pages/${e.id}`)},p=e=>{if(!e)return"";const t=new Date(e),l=new Date,a=l-t,o=Math.floor(a/6e4),i=Math.floor(a/36e5),s=Math.floor(a/864e5);return o<1?"Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ‡Ñ‚Ð¾":o<60?`${o} Ð¼Ð¸Ð½. Ð½Ð°Ð·Ð°Ð´`:i<24?`${i} Ñ‡. Ð½Ð°Ð·Ð°Ð´`:s<7?`${s} Ð´Ð½. Ð½Ð°Ð·Ð°Ð´`:t.toLocaleDateString("ru-RU")},m=e=>{const t={TEXT:E,CHECKLIST:I};return t[e]||E};return(0,i.sV)(()=>{l.fetchPages()}),(e,t)=>{const c=(0,i.g2)("v-text-field"),b=(0,i.g2)("v-icon"),k=(0,i.g2)("v-btn"),g=(0,i.g2)("v-app-bar"),y=(0,i.g2)("v-card-title"),h=(0,i.g2)("v-card-text"),f=(0,i.g2)("v-card"),x=(0,i.g2)("v-progress-circular"),F=(0,i.g2)("v-container");return(0,i.uX)(),(0,i.CE)("div",K,[(0,i.bF)(g,{elevation:"0",color:"transparent",class:"px-4"},{default:(0,i.k6)(()=>[(0,i.bF)(c,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e),placeholder:"ÐŸÐ¾Ð¸ÑÐº Ð·Ð°Ð¼ÐµÑ‚Ð¾Ðº...","prepend-inner-icon":"mdi-magnify",variant:"solo-filled",density:"compact","hide-details":"",class:"search-field",onInput:(0,u.R1)(s)},null,8,["modelValue","onInput"]),(0,i.bF)(k,{icon:"",variant:"text",onClick:t[1]||(t[1]=t=>e.$router.push("/subscription"))},{default:(0,i.k6)(()=>[(0,i.bF)(b,null,{default:(0,i.k6)(()=>[...t[3]||(t[3]=[(0,i.eW)("mdi-account-circle",-1)])]),_:1})]),_:1})]),_:1}),(0,i.bF)(F,{class:"py-4"},{default:(0,i.k6)(()=>[!(0,u.R1)(l).loading&&(0,u.R1)(l).isEmpty?((0,i.uX)(),(0,i.CE)("div",U,[(0,i.bF)(b,{size:"80",color:"grey-lighten-1"},{default:(0,i.k6)(()=>[...t[4]||(t[4]=[(0,i.eW)("mdi-note-text-outline",-1)])]),_:1}),t[6]||(t[6]=(0,i.Lk)("h2",{class:"text-h6 mt-4 mb-2"},"ÐŸÐ¾ÐºÐ° Ð½ÐµÑ‚ Ð·Ð°Ð¼ÐµÑ‚Ð¾Ðº",-1)),t[7]||(t[7]=(0,i.Lk)("p",{class:"text-body-2 text-grey"},"Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ ÑÐ²Ð¾ÑŽ Ð¿ÐµÑ€Ð²ÑƒÑŽ Ð·Ð°Ð¼ÐµÑ‚ÐºÑƒ",-1)),(0,i.bF)(k,{color:"primary",size:"large",class:"mt-4",onClick:n},{default:(0,i.k6)(()=>[...t[5]||(t[5]=[(0,i.eW)(" Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð¿ÐµÑ€Ð²ÑƒÑŽ Ð·Ð°Ð¼ÐµÑ‚ÐºÑƒ ",-1)])]),_:1})])):((0,i.uX)(),(0,i.CE)("div",A,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)((0,u.R1)(l).pages,e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"page-card",onClick:t=>r(e.id)},[(0,i.bF)(f,{elevation:"0",class:"page-card-content",style:{borderRadius:"24px"}},{default:(0,i.k6)(()=>[(0,i.bF)(y,{class:"text-h6 pb-2"},{default:(0,i.k6)(()=>[(0,i.eW)((0,d.v_)(e.title||"Ð‘ÐµÐ· Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ñ"),1)]),_:2},1024),(0,i.bF)(h,{class:"pt-0"},{default:(0,i.k6)(()=>[e.blocks&&e.blocks.length>0?((0,i.uX)(),(0,i.CE)("div",O,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.blocks.slice(0,2),e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"preview-block"},[((0,i.uX)(),(0,i.Wv)((0,i.$y)(m(e.type)),{block:e,preview:!0},null,8,["block"]))]))),128))])):((0,i.uX)(),(0,i.CE)("div",D," ÐŸÑƒÑÑ‚Ð°Ñ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ð° ")),(0,i.Lk)("div",z,(0,d.v_)(p(e.updatedAt)),1)]),_:2},1024)]),_:2},1024)],8,S))),128))])),(0,u.R1)(l).loading?((0,i.uX)(),(0,i.CE)("div",$,[(0,i.bF)(x,{indeterminate:"",color:"primary"})])):(0,i.Q3)("",!0)]),_:1}),(0,i.bF)(k,{class:"fab-button",size:"large",color:"primary",icon:"mdi-plus",onClick:n}),(0,i.bF)(_,{modelValue:o.value,"onUpdate:modelValue":t[2]||(t[2]=e=>o.value=e),onCreated:v},null,8,["modelValue"])])}}};const q=(0,C.A)(j,[["__scopeId","data-v-5244c045"]]);var N=q;const Q={getSubscription(){return b.get("/subscription")},getLimits(){return b.get("/subscription/limits")},getHistory(){return b.get("/subscription/history")},getPlans(){return b.get("/subscription/plans")},createInvoice(e){return b.post("/subscription/create-invoice",{planId:e})},upgrade(e){return b.post("/subscription/upgrade",e)}},M=(0,o.nY)("subscription",{state:()=>({subscription:null,limits:null,plans:[],history:[],loading:!1,error:null}),getters:{isPremium:e=>"PREMIUM"===e.subscription?.plan,isFree:e=>"FREE"===e.subscription?.plan,canUpgrade:e=>e.subscription?.canUpgrade||!1,pagesLimitReached:e=>e.limits?.pagesLimitReached||!1,remainingPages:e=>e.limits?.remainingPages||0,maxPages:e=>e.limits?.maxPages||3,currentPages:e=>e.limits?.currentPages||0,maxBlocksPerPage:e=>e.limits?.maxBlocksPerPage||10},actions:{async fetchSubscription(){this.loading=!0,this.error=null;try{const e=await Q.getSubscription();return this.subscription=e.data,e.data}catch(e){throw this.error=e.message,e}finally{this.loading=!1}},async fetchLimits(){this.loading=!0,this.error=null;try{const e=await Q.getLimits();return this.limits=e.data,e.data}catch(e){throw this.error=e.message,e}finally{this.loading=!1}},async fetchPlans(){this.loading=!0,this.error=null;try{const e=await Q.getPlans();return this.plans=e.data,e.data}catch(e){throw this.error=e.message,e}finally{this.loading=!1}},async fetchHistory(){this.loading=!0,this.error=null;try{const e=await Q.getHistory();return this.history=e.data,e.data}catch(e){throw this.error=e.message,e}finally{this.loading=!1}},async createInvoice(e){this.loading=!0,this.error=null;try{const t=await Q.createInvoice({planId:e});return t.data}catch(t){throw this.error=t.message,t}finally{this.loading=!1}},async upgrade(e){this.loading=!0,this.error=null;try{const t=await Q.upgrade(e);return this.subscription=t.data,await this.fetchLimits(),t.data}catch(t){throw this.error=t.message,t}finally{this.loading=!1}}}}),H={key:0,class:"text-center py-8"},Y={key:1,class:"block-types-grid"};var G={__name:"BlockTypeSheet",props:{modelValue:{type:Boolean,required:!0},insertOrder:{type:Number,default:0}},emits:["update:modelValue","block-selected"],setup(e,{emit:t}){const l=e,a=t,o=(0,c.rd)(),s=g(),r=M(),n=(0,u.KR)(!1),v=(0,u.KR)(!1),p=(0,u.KR)(null),m=(0,i.EW)(()=>r.isPremium),b=(0,i.EW)(()=>s.blockTypes.filter(e=>e.isFreeBlock||m.value)),k=e=>{const t={TEXT:"mdi-text",CHECKLIST:"mdi-format-list-checks",IDEA_CARD:"mdi-lightbulb-on",STATUS:"mdi-flag",HEADING:"mdi-format-header-1",QUOTE:"mdi-format-quote-close",DIVIDER:"mdi-minus",LINK:"mdi-link",BULLET_LIST:"mdi-format-list-bulleted",KEY_VALUE:"mdi-key-variant",PROS:"mdi-thumb-up",CONS:"mdi-thumb-down"};return t[e]||"mdi-text-box"},y=e=>{if(!e.isFreeBlock&&!m.value)return p.value=e,void(v.value=!0);a("block-selected",e.blockType),a("update:modelValue",!1)},h=()=>{v.value=!1,a("update:modelValue",!1),o.push("/subscription")};return(0,i.wB)(()=>l.modelValue,async e=>{if(e){n.value=!0;try{await s.fetchBlockTypes(),await r.fetchSubscription()}catch(t){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐµ Ñ‚Ð¸Ð¿Ð¾Ð² Ð±Ð»Ð¾ÐºÐ¾Ð²:",t)}finally{n.value=!1}}}),(0,i.sV)(async()=>{0===s.blockTypes.length&&await s.fetchBlockTypes(),await r.fetchSubscription()}),(t,l)=>{const a=(0,i.g2)("v-progress-circular"),o=(0,i.g2)("v-icon"),s=(0,i.g2)("v-card-text"),r=(0,i.g2)("v-card"),c=(0,i.g2)("v-sheet"),u=(0,i.g2)("v-bottom-sheet"),p=(0,i.g2)("v-card-title"),g=(0,i.g2)("v-spacer"),f=(0,i.g2)("v-btn"),_=(0,i.g2)("v-card-actions"),x=(0,i.g2)("v-dialog");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)(u,{"model-value":e.modelValue,"onUpdate:modelValue":l[0]||(l[0]=e=>t.$emit("update:modelValue",e))},{default:(0,i.k6)(()=>[(0,i.bF)(c,{style:{borderRadius:"24px 24px 0 0"},class:"pa-4"},{default:(0,i.k6)(()=>[l[4]||(l[4]=(0,i.Lk)("div",{class:"text-h6 mb-4"},"Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ‚Ð¸Ð¿ Ð±Ð»Ð¾ÐºÐ°",-1)),n.value?((0,i.uX)(),(0,i.CE)("div",H,[(0,i.bF)(a,{indeterminate:"",color:"primary"})])):((0,i.uX)(),(0,i.CE)("div",Y,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(b.value,e=>((0,i.uX)(),(0,i.Wv)(r,{key:e.blockType,elevation:"0",class:(0,d.C4)(["block-type-card",{locked:!e.isFreeBlock&&!m.value}]),style:{borderRadius:"16px"},onClick:t=>y(e)},{default:(0,i.k6)(()=>[(0,i.bF)(s,{class:"text-center"},{default:(0,i.k6)(()=>[(0,i.bF)(o,{size:40,color:e.isFreeBlock||m.value?"primary":"grey"},{default:(0,i.k6)(()=>[(0,i.eW)((0,d.v_)(k(e.blockType)),1)]),_:2},1032,["color"]),(0,i.Lk)("div",{class:(0,d.C4)(["text-body-2 mt-2",e.isFreeBlock||m.value?"":"text-grey"])},(0,d.v_)(e.blockName),3),e.isFreeBlock||m.value?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(o,{key:0,size:"small",color:"grey",class:"mt-1"},{default:(0,i.k6)(()=>[...l[3]||(l[3]=[(0,i.eW)(" mdi-lock ",-1)])]),_:1}))]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))]))]),_:1})]),_:1},8,["model-value"]),(0,i.bF)(x,{modelValue:v.value,"onUpdate:modelValue":l[2]||(l[2]=e=>v.value=e),"max-width":"400"},{default:(0,i.k6)(()=>[(0,i.bF)(r,{style:{borderRadius:"24px"}},{default:(0,i.k6)(()=>[(0,i.bF)(p,{class:"text-h6"},{default:(0,i.k6)(()=>[...l[5]||(l[5]=[(0,i.eW)(" Premium Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ ",-1)])]),_:1}),(0,i.bF)(s,null,{default:(0,i.k6)(()=>[...l[6]||(l[6]=[(0,i.Lk)("p",{class:"text-body-1"}," Ð­Ñ‚Ð¾Ñ‚ Ñ‚Ð¸Ð¿ Ð±Ð»Ð¾ÐºÐ° Ð´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð² Premium Ð¿Ð»Ð°Ð½Ðµ. ",-1),(0,i.Lk)("p",{class:"text-body-2 text-grey mt-2"}," ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐºÑƒ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð´Ð¾ÑÑ‚ÑƒÐ¿ ÐºÐ¾ Ð²ÑÐµÐ¼ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑÐ¼. ",-1)])]),_:1}),(0,i.bF)(_,null,{default:(0,i.k6)(()=>[(0,i.bF)(g),(0,i.bF)(f,{variant:"text",onClick:l[1]||(l[1]=e=>v.value=!1)},{default:(0,i.k6)(()=>[...l[7]||(l[7]=[(0,i.eW)(" ÐžÑ‚Ð¼ÐµÐ½Ð° ",-1)])]),_:1}),(0,i.bF)(f,{color:"primary",onClick:h},{default:(0,i.k6)(()=>[...l[8]||(l[8]=[(0,i.eW)(" ÐŸÐµÑ€ÐµÐ¹Ñ‚Ð¸ Ðº Ð¿Ð¾Ð´Ð¿Ð¸ÑÐºÐµ ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}};const J=(0,C.A)(G,[["__scopeId","data-v-8af4141a"]]);var Z=J;const ee={class:"text-body-1"};var te={__name:"ConfirmDeleteModal",props:{modelValue:{type:Boolean,required:!0},title:{type:String,default:"ÐŸÐ¾Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¸Ñ‚Ðµ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ðµ"},message:{type:String,default:"Ð’Ñ‹ ÑƒÐ²ÐµÑ€ÐµÐ½Ñ‹, Ñ‡Ñ‚Ð¾ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ ÑÑ‚Ð¾Ñ‚ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚?"}},emits:["update:modelValue","confirm"],setup(e,{emit:t}){const l=t,a=()=>{l("confirm"),l("update:modelValue",!1)};return(t,l)=>{const o=(0,i.g2)("v-card-title"),s=(0,i.g2)("v-card-text"),r=(0,i.g2)("v-spacer"),n=(0,i.g2)("v-btn"),c=(0,i.g2)("v-card-actions"),u=(0,i.g2)("v-card"),v=(0,i.g2)("v-dialog");return(0,i.uX)(),(0,i.Wv)(v,{"model-value":e.modelValue,"max-width":"400","onUpdate:modelValue":l[1]||(l[1]=e=>t.$emit("update:modelValue",e))},{default:(0,i.k6)(()=>[(0,i.bF)(u,{style:{borderRadius:"24px"}},{default:(0,i.k6)(()=>[(0,i.bF)(o,{class:"text-h6"},{default:(0,i.k6)(()=>[(0,i.eW)((0,d.v_)(e.title),1)]),_:1}),(0,i.bF)(s,null,{default:(0,i.k6)(()=>[(0,i.Lk)("p",ee,(0,d.v_)(e.message),1),l[2]||(l[2]=(0,i.Lk)("p",{class:"text-body-2 text-grey mt-2"}," Ð­Ñ‚Ð¾ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ Ð½ÐµÐ»ÑŒÐ·Ñ Ð¾Ñ‚Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ. ",-1))]),_:1}),(0,i.bF)(c,null,{default:(0,i.k6)(()=>[(0,i.bF)(r),(0,i.bF)(n,{variant:"text",onClick:l[0]||(l[0]=e=>t.$emit("update:modelValue",!1))},{default:(0,i.k6)(()=>[...l[3]||(l[3]=[(0,i.eW)(" ÐžÑ‚Ð¼ÐµÐ½Ð° ",-1)])]),_:1}),(0,i.bF)(n,{color:"error",onClick:a},{default:(0,i.k6)(()=>[...l[4]||(l[4]=[(0,i.eW)(" Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}};const le=te;var ae=le;const oe={class:"d-flex align-center mb-2"},ie={class:"text-body-1"},se={class:"d-flex justify-end mt-2"};var re={__name:"IdeaCardBlock",props:{block:{type:Object,required:!0},editable:{type:Boolean,default:!1}},emits:["edit","save","delete"],setup(e,{emit:t}){const l=e,a=t,o=(0,u.KR)(l.block.content||"");(0,i.wB)(()=>l.block.content,e=>{o.value=e||""});const s=()=>{a("save",{content:o.value})};return(t,l)=>{const a=(0,i.g2)("v-icon"),r=(0,i.g2)("v-card-text"),n=(0,i.g2)("v-card"),c=(0,i.g2)("v-textarea"),u=(0,i.g2)("v-btn");return e.editable?((0,i.uX)(),(0,i.Wv)(n,{key:1,elevation:"0",variant:"outlined",style:{borderRadius:"16px"}},{default:(0,i.k6)(()=>[(0,i.bF)(r,null,{default:(0,i.k6)(()=>[(0,i.bF)(c,{modelValue:o.value,"onUpdate:modelValue":l[1]||(l[1]=e=>o.value=e),variant:"outlined","auto-grow":"",rows:"3","hide-details":"",placeholder:"ÐžÐ¿Ð¸ÑˆÐ¸Ñ‚Ðµ Ð²Ð°ÑˆÑƒ Ð¸Ð´ÐµÑŽ..."},null,8,["modelValue"]),(0,i.Lk)("div",se,[(0,i.bF)(u,{size:"small",color:"primary",onClick:s},{default:(0,i.k6)(()=>[...l[4]||(l[4]=[(0,i.eW)(" Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ ",-1)])]),_:1})])]),_:1})]),_:1})):((0,i.uX)(),(0,i.Wv)(n,{key:0,elevation:"0",class:"idea-card-block",style:{borderRadius:"16px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},onClick:l[0]||(l[0]=e=>t.$emit("edit"))},{default:(0,i.k6)(()=>[(0,i.bF)(r,null,{default:(0,i.k6)(()=>[(0,i.Lk)("div",oe,[(0,i.bF)(a,{color:"white"},{default:(0,i.k6)(()=>[...l[2]||(l[2]=[(0,i.eW)("mdi-lightbulb-on",-1)])]),_:1}),l[3]||(l[3]=(0,i.Lk)("span",{class:"ml-2 text-body-2 font-weight-bold"},"Ð˜Ð´ÐµÑ",-1))]),(0,i.Lk)("div",ie,(0,d.v_)(e.block.content||"Ð’Ð°ÑˆÐ° Ð¸Ð´ÐµÑ..."),1)]),_:1})]),_:1}))}}};const ne=(0,C.A)(re,[["__scopeId","data-v-3b7e10b1"]]);var ce=ne;const ue={class:"d-flex justify-end mt-2"};var de={__name:"StatusBlock",props:{block:{type:Object,required:!0},editable:{type:Boolean,default:!1}},emits:["edit","save","delete"],setup(e,{emit:t}){const l=e,a=t,o=(0,u.KR)(l.block.status||"TODO"),s=(0,u.KR)(l.block.color||"blue"),r=[{title:"Ðš Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸ÑŽ",value:"TODO"},{title:"Ð’ Ñ€Ð°Ð±Ð¾Ñ‚Ðµ",value:"IN_PROGRESS"},{title:"Ð—Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¾",value:"DONE"},{title:"ÐžÑ‚Ð¼ÐµÐ½ÐµÐ½Ð¾",value:"CANCELLED"}],n=[{title:"Ð¡Ð¸Ð½Ð¸Ð¹",value:"blue"},{title:"Ð—ÐµÐ»ÐµÐ½Ñ‹Ð¹",value:"green"},{title:"ÐžÑ€Ð°Ð½Ð¶ÐµÐ²Ñ‹Ð¹",value:"orange"},{title:"ÐšÑ€Ð°ÑÐ½Ñ‹Ð¹",value:"red"},{title:"Ð¤Ð¸Ð¾Ð»ÐµÑ‚Ð¾Ð²Ñ‹Ð¹",value:"purple"}],c=e=>{const t=r.find(t=>t.value===e);return t?t.title:e},v=e=>{const t={blue:"primary",green:"success",orange:"warning",red:"error",purple:"purple"};return t[e]||"primary"};(0,i.wB)(()=>l.block.status,e=>{o.value=e||"TODO"}),(0,i.wB)(()=>l.block.color,e=>{s.value=e||"blue"});const p=()=>{a("save",{status:o.value,color:s.value})};return(t,l)=>{const a=(0,i.g2)("v-chip"),u=(0,i.g2)("v-card-text"),m=(0,i.g2)("v-card"),b=(0,i.g2)("v-select"),k=(0,i.g2)("v-btn");return e.editable?((0,i.uX)(),(0,i.Wv)(m,{key:1,elevation:"0",variant:"outlined",style:{borderRadius:"16px"}},{default:(0,i.k6)(()=>[(0,i.bF)(u,null,{default:(0,i.k6)(()=>[(0,i.bF)(b,{modelValue:o.value,"onUpdate:modelValue":l[1]||(l[1]=e=>o.value=e),items:r,label:"Ð¡Ñ‚Ð°Ñ‚ÑƒÑ",variant:"outlined",density:"compact"},null,8,["modelValue"]),(0,i.bF)(b,{modelValue:s.value,"onUpdate:modelValue":l[2]||(l[2]=e=>s.value=e),items:n,label:"Ð¦Ð²ÐµÑ‚",variant:"outlined",density:"compact"},null,8,["modelValue"]),(0,i.Lk)("div",ue,[(0,i.bF)(k,{size:"small",color:"primary",onClick:p},{default:(0,i.k6)(()=>[...l[3]||(l[3]=[(0,i.eW)(" Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ ",-1)])]),_:1})])]),_:1})]),_:1})):((0,i.uX)(),(0,i.Wv)(m,{key:0,elevation:"0",class:"status-block",style:{borderRadius:"16px"},onClick:l[0]||(l[0]=e=>t.$emit("edit"))},{default:(0,i.k6)(()=>[(0,i.bF)(u,null,{default:(0,i.k6)(()=>[(0,i.bF)(a,{color:v(e.block.color||"blue"),size:"large"},{default:(0,i.k6)(()=>[(0,i.eW)((0,d.v_)(c(e.block.status)),1)]),_:1},8,["color"])]),_:1})]),_:1}))}}};const ve=(0,C.A)(de,[["__scopeId","data-v-e4f441ac"]]);var pe=ve;const me={key:0,class:"text-h4 font-weight-bold"},be={key:1,class:"text-h5 font-weight-bold"},ke={key:2,class:"text-h6 font-weight-bold"},ge={class:"d-flex justify-end mt-2"};var ye={__name:"HeadingBlock",props:{block:{type:Object,required:!0},editable:{type:Boolean,default:!1}},emits:["edit","save","delete"],setup(e,{emit:t}){const l=e,a=t,o=(0,u.KR)(l.block.content||""),s=(0,u.KR)(l.block.level||1),r=[{title:"Ð£Ñ€Ð¾Ð²ÐµÐ½ÑŒ 1",value:1},{title:"Ð£Ñ€Ð¾Ð²ÐµÐ½ÑŒ 2",value:2},{title:"Ð£Ñ€Ð¾Ð²ÐµÐ½ÑŒ 3",value:3}];(0,i.wB)(()=>l.block.content,e=>{o.value=e||""}),(0,i.wB)(()=>l.block.level,e=>{s.value=e||1});const n=()=>{a("save",{content:o.value,level:s.value})};return(t,l)=>{const a=(0,i.g2)("v-text-field"),c=(0,i.g2)("v-select"),u=(0,i.g2)("v-btn"),v=(0,i.g2)("v-card-text"),p=(0,i.g2)("v-card");return e.editable?((0,i.uX)(),(0,i.Wv)(p,{key:1,elevation:"0",variant:"outlined",style:{borderRadius:"16px"}},{default:(0,i.k6)(()=>[(0,i.bF)(v,null,{default:(0,i.k6)(()=>[(0,i.bF)(a,{modelValue:o.value,"onUpdate:modelValue":l[1]||(l[1]=e=>o.value=e),variant:"outlined",density:"compact",label:"Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº","hide-details":""},null,8,["modelValue"]),(0,i.bF)(c,{modelValue:s.value,"onUpdate:modelValue":l[2]||(l[2]=e=>s.value=e),items:r,label:"Ð£Ñ€Ð¾Ð²ÐµÐ½ÑŒ",variant:"outlined",density:"compact",class:"mt-2"},null,8,["modelValue"]),(0,i.Lk)("div",ge,[(0,i.bF)(u,{size:"small",color:"primary",onClick:n},{default:(0,i.k6)(()=>[...l[3]||(l[3]=[(0,i.eW)(" Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ ",-1)])]),_:1})])]),_:1})]),_:1})):((0,i.uX)(),(0,i.CE)("div",{key:0,onClick:l[0]||(l[0]=e=>t.$emit("edit"))},[1===e.block.level?((0,i.uX)(),(0,i.CE)("h2",me,(0,d.v_)(e.block.content||"Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº 1"),1)):2===e.block.level?((0,i.uX)(),(0,i.CE)("h3",be,(0,d.v_)(e.block.content||"Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº 2"),1)):((0,i.uX)(),(0,i.CE)("h4",ke,(0,d.v_)(e.block.content||"Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº 3"),1))]))}}};const he=(0,C.A)(ye,[["__scopeId","data-v-0cc3d982"]]);var fe=he;const _e={class:"text-body-1 font-italic"},xe={key:0,class:"text-caption text-grey mt-2"},Fe={class:"d-flex justify-end mt-2"};var we={__name:"QuoteBlock",props:{block:{type:Object,required:!0},editable:{type:Boolean,default:!1}},emits:["edit","save","delete"],setup(e,{emit:t}){const l=e,a=t,o=(0,u.KR)(l.block.content||""),s=(0,u.KR)(l.block.author||"");(0,i.wB)(()=>l.block.content,e=>{o.value=e||""}),(0,i.wB)(()=>l.block.author,e=>{s.value=e||""});const r=()=>{a("save",{content:o.value,author:s.value})};return(t,l)=>{const a=(0,i.g2)("v-card-text"),n=(0,i.g2)("v-card"),c=(0,i.g2)("v-textarea"),u=(0,i.g2)("v-text-field"),v=(0,i.g2)("v-btn");return e.editable?((0,i.uX)(),(0,i.Wv)(n,{key:1,elevation:"0",variant:"outlined",style:{borderRadius:"16px"}},{default:(0,i.k6)(()=>[(0,i.bF)(a,null,{default:(0,i.k6)(()=>[(0,i.bF)(c,{modelValue:o.value,"onUpdate:modelValue":l[1]||(l[1]=e=>o.value=e),variant:"outlined","auto-grow":"",rows:"2",label:"Ð¦Ð¸Ñ‚Ð°Ñ‚Ð°","hide-details":""},null,8,["modelValue"]),(0,i.bF)(u,{modelValue:s.value,"onUpdate:modelValue":l[2]||(l[2]=e=>s.value=e),variant:"outlined",density:"compact",label:"ÐÐ²Ñ‚Ð¾Ñ€ (Ð½ÐµÐ¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾)","hide-details":"",class:"mt-2"},null,8,["modelValue"]),(0,i.Lk)("div",Fe,[(0,i.bF)(v,{size:"small",color:"primary",onClick:r},{default:(0,i.k6)(()=>[...l[3]||(l[3]=[(0,i.eW)(" Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ ",-1)])]),_:1})])]),_:1})]),_:1})):((0,i.uX)(),(0,i.Wv)(n,{key:0,elevation:"0",class:"quote-block",style:{borderRadius:"16px",borderLeft:"4px solid primary"},onClick:l[0]||(l[0]=e=>t.$emit("edit"))},{default:(0,i.k6)(()=>[(0,i.bF)(a,null,{default:(0,i.k6)(()=>[(0,i.Lk)("div",_e,' "'+(0,d.v_)(e.block.content||"Ð¦Ð¸Ñ‚Ð°Ñ‚Ð°")+'" ',1),e.block.author?((0,i.uX)(),(0,i.CE)("div",xe," â€” "+(0,d.v_)(e.block.author),1)):(0,i.Q3)("",!0)]),_:1})]),_:1}))}}};const Ce=(0,C.A)(we,[["__scopeId","data-v-5b745dcc"]]);var Ve=Ce,Ee={__name:"DividerBlock",props:{block:{type:Object,required:!0},editable:{type:Boolean,default:!1}},setup(e){return(e,t)=>{const l=(0,i.g2)("v-divider");return(0,i.uX)(),(0,i.Wv)(l,{class:"my-4"})}}};const Re=Ee;var Pe=Re;const We={class:"d-flex align-center"},Xe=["href"],Le={key:0,class:"text-caption text-grey mt-1"},Be={class:"d-flex justify-end mt-2"};var Te={__name:"LinkBlock",props:{block:{type:Object,required:!0},editable:{type:Boolean,default:!1}},emits:["edit","save","delete"],setup(e,{emit:t}){const l=e,o=t,s=(0,u.KR)(l.block.url||""),r=(0,u.KR)(l.block.title||""),n=(0,u.KR)(l.block.description||"");(0,i.wB)(()=>l.block.url,e=>{s.value=e||""}),(0,i.wB)(()=>l.block.title,e=>{r.value=e||""}),(0,i.wB)(()=>l.block.description,e=>{n.value=e||""});const c=()=>{o("save",{url:s.value,title:r.value,description:n.value})};return(t,l)=>{const o=(0,i.g2)("v-icon"),u=(0,i.g2)("v-card-text"),v=(0,i.g2)("v-card"),p=(0,i.g2)("v-text-field"),m=(0,i.g2)("v-btn");return e.editable?((0,i.uX)(),(0,i.Wv)(v,{key:1,elevation:"0",variant:"outlined",style:{borderRadius:"16px"}},{default:(0,i.k6)(()=>[(0,i.bF)(u,null,{default:(0,i.k6)(()=>[(0,i.bF)(p,{modelValue:s.value,"onUpdate:modelValue":l[2]||(l[2]=e=>s.value=e),variant:"outlined",density:"compact",label:"URL","hide-details":""},null,8,["modelValue"]),(0,i.bF)(p,{modelValue:r.value,"onUpdate:modelValue":l[3]||(l[3]=e=>r.value=e),variant:"outlined",density:"compact",label:"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ","hide-details":"",class:"mt-2"},null,8,["modelValue"]),(0,i.bF)(p,{modelValue:n.value,"onUpdate:modelValue":l[4]||(l[4]=e=>n.value=e),variant:"outlined",density:"compact",label:"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ (Ð½ÐµÐ¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾)","hide-details":"",class:"mt-2"},null,8,["modelValue"]),(0,i.Lk)("div",Be,[(0,i.bF)(m,{size:"small",color:"primary",onClick:c},{default:(0,i.k6)(()=>[...l[6]||(l[6]=[(0,i.eW)(" Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ ",-1)])]),_:1})])]),_:1})]),_:1})):((0,i.uX)(),(0,i.Wv)(v,{key:0,elevation:"0",class:"link-block",style:{borderRadius:"16px"},onClick:l[1]||(l[1]=e=>t.$emit("edit"))},{default:(0,i.k6)(()=>[(0,i.bF)(u,null,{default:(0,i.k6)(()=>[(0,i.Lk)("div",We,[(0,i.bF)(o,{class:"mr-2"},{default:(0,i.k6)(()=>[...l[5]||(l[5]=[(0,i.eW)("mdi-link",-1)])]),_:1}),(0,i.Lk)("a",{href:e.block.url,target:"_blank",class:"text-body-1 text-primary",onClick:l[0]||(l[0]=(0,a.D$)(()=>{},["stop"]))},(0,d.v_)(e.block.title||e.block.url),9,Xe)]),e.block.description?((0,i.uX)(),(0,i.CE)("div",Le,(0,d.v_)(e.block.description),1)):(0,i.Q3)("",!0)]),_:1})]),_:1}))}}};const Ie=(0,C.A)(Te,[["__scopeId","data-v-0f41892c"]]);var Ke=Ie;const Ue={key:0,class:"bullet-list"},Ae={key:1,class:"text-body-2 text-grey"},Se={class:"d-flex justify-end mt-2"};var Oe={__name:"BulletListBlock",props:{block:{type:Object,required:!0},editable:{type:Boolean,default:!1}},emits:["edit","save","delete"],setup(e,{emit:t}){const l=e,o=t,s=l.block.items||[],r=(0,u.KR)([...s]);(0,i.wB)(()=>l.block.items,e=>{r.value=e?[...e]:[]},{deep:!0});const n=()=>{r.value.push("")},c=e=>{r.value.splice(e,1)},v=()=>{o("save",{items:r.value.filter(e=>e.trim())})};return(t,l)=>{const o=(0,i.g2)("v-card-text"),p=(0,i.g2)("v-card"),m=(0,i.g2)("v-text-field"),b=(0,i.g2)("v-icon"),k=(0,i.g2)("v-btn");return e.editable?((0,i.uX)(),(0,i.Wv)(p,{key:1,elevation:"0",variant:"outlined",style:{borderRadius:"16px"}},{default:(0,i.k6)(()=>[(0,i.bF)(o,null,{default:(0,i.k6)(()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.value,(e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t,class:"item-edit-row"},[(0,i.bF)(m,{modelValue:r.value[t],"onUpdate:modelValue":e=>r.value[t]=e,variant:"plain",density:"compact","hide-details":"",placeholder:"Ð­Ð»ÐµÐ¼ÐµÐ½Ñ‚ ÑÐ¿Ð¸ÑÐºÐ°",onKeydown:(0,a.jR)(n,["enter"])},null,8,["modelValue","onUpdate:modelValue"]),(0,i.bF)(k,{icon:"",size:"small",variant:"text",onClick:e=>c(t)},{default:(0,i.k6)(()=>[(0,i.bF)(b,{size:"small"},{default:(0,i.k6)(()=>[...l[1]||(l[1]=[(0,i.eW)("mdi-close",-1)])]),_:1})]),_:1},8,["onClick"])]))),128)),(0,i.bF)(k,{block:"",variant:"text","prepend-icon":"mdi-plus",onClick:n},{default:(0,i.k6)(()=>[...l[2]||(l[2]=[(0,i.eW)(" Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚ ",-1)])]),_:1}),(0,i.Lk)("div",Se,[(0,i.bF)(k,{size:"small",color:"primary",onClick:v},{default:(0,i.k6)(()=>[...l[3]||(l[3]=[(0,i.eW)(" Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ ",-1)])]),_:1})])]),_:1})]),_:1})):((0,i.uX)(),(0,i.Wv)(p,{key:0,elevation:"0",class:"bullet-list-block",style:{borderRadius:"16px"},onClick:l[0]||(l[0]=e=>t.$emit("edit"))},{default:(0,i.k6)(()=>[(0,i.bF)(o,null,{default:(0,i.k6)(()=>[(0,u.R1)(s).length>0?((0,i.uX)(),(0,i.CE)("ul",Ue,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)((0,u.R1)(s),(e,t)=>((0,i.uX)(),(0,i.CE)("li",{key:t,class:"text-body-1"},(0,d.v_)(e),1))),128))])):((0,i.uX)(),(0,i.CE)("div",Ae," ÐŸÑƒÑÑ‚Ð¾Ð¹ ÑÐ¿Ð¸ÑÐ¾Ðº "))]),_:1})]),_:1}))}}};const De=(0,C.A)(Oe,[["__scopeId","data-v-aa9cb8ce"]]);var ze=De;const $e={class:"font-weight-bold text-body-2"},je={class:"text-body-1 ml-2"},qe={key:0,class:"text-body-2 text-grey"},Ne={class:"d-flex justify-end mt-2"};var Qe={__name:"KeyValueBlock",props:{block:{type:Object,required:!0},editable:{type:Boolean,default:!1}},emits:["edit","save","delete"],setup(e,{emit:t}){const l=e,a=t,o=l.block.pairs||[],s=(0,u.KR)(o.length>0?[...o]:[{key:"",value:""}]);(0,i.wB)(()=>l.block.pairs,e=>{s.value=e&&e.length>0?[...e]:[{key:"",value:""}]},{deep:!0});const r=()=>{s.value.push({key:"",value:""})},n=e=>{s.value.splice(e,1)},c=()=>{a("save",{pairs:s.value.filter(e=>e.key.trim()&&e.value.trim())})};return(t,l)=>{const a=(0,i.g2)("v-card-text"),v=(0,i.g2)("v-card"),p=(0,i.g2)("v-text-field"),m=(0,i.g2)("v-icon"),b=(0,i.g2)("v-btn");return e.editable?((0,i.uX)(),(0,i.Wv)(v,{key:1,elevation:"0",variant:"outlined",style:{borderRadius:"16px"}},{default:(0,i.k6)(()=>[(0,i.bF)(a,null,{default:(0,i.k6)(()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.value,(e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t,class:"pair-edit-row"},[(0,i.bF)(p,{modelValue:e.key,"onUpdate:modelValue":t=>e.key=t,variant:"plain",density:"compact",placeholder:"ÐšÐ»ÑŽÑ‡","hide-details":""},null,8,["modelValue","onUpdate:modelValue"]),(0,i.bF)(p,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,variant:"plain",density:"compact",placeholder:"Ð—Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ","hide-details":""},null,8,["modelValue","onUpdate:modelValue"]),(0,i.bF)(b,{icon:"",size:"small",variant:"text",onClick:e=>n(t)},{default:(0,i.k6)(()=>[(0,i.bF)(m,{size:"small"},{default:(0,i.k6)(()=>[...l[1]||(l[1]=[(0,i.eW)("mdi-close",-1)])]),_:1})]),_:1},8,["onClick"])]))),128)),(0,i.bF)(b,{block:"",variant:"text","prepend-icon":"mdi-plus",onClick:r},{default:(0,i.k6)(()=>[...l[2]||(l[2]=[(0,i.eW)(" Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð¿Ð°Ñ€Ñƒ ",-1)])]),_:1}),(0,i.Lk)("div",Ne,[(0,i.bF)(b,{size:"small",color:"primary",onClick:c},{default:(0,i.k6)(()=>[...l[3]||(l[3]=[(0,i.eW)(" Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ ",-1)])]),_:1})])]),_:1})]),_:1})):((0,i.uX)(),(0,i.Wv)(v,{key:0,elevation:"0",class:"key-value-block",style:{borderRadius:"16px"},onClick:l[0]||(l[0]=e=>t.$emit("edit"))},{default:(0,i.k6)(()=>[(0,i.bF)(a,null,{default:(0,i.k6)(()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)((0,u.R1)(o),(e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t,class:"key-value-pair"},[(0,i.Lk)("span",$e,(0,d.v_)(e.key)+":",1),(0,i.Lk)("span",je,(0,d.v_)(e.value),1)]))),128)),0===(0,u.R1)(o).length?((0,i.uX)(),(0,i.CE)("div",qe," ÐŸÑƒÑÑ‚Ð¾Ð¹ ÑÐ¿Ð¸ÑÐ¾Ðº ")):(0,i.Q3)("",!0)]),_:1})]),_:1}))}}};const Me=(0,C.A)(Qe,[["__scopeId","data-v-49e136e9"]]);var He=Me;const Ye={class:"d-flex"},Ge={class:"flex-1 mr-2"},Je={key:0,class:"pros-list"},Ze={key:1,class:"text-body-2 text-grey"},et={class:"flex-1 ml-2"},tt={key:0,class:"cons-list"},lt={key:1,class:"text-body-2 text-grey"},at={class:"d-flex"},ot={class:"flex-1 mr-2"},it={class:"flex-1 ml-2"},st={class:"d-flex justify-end mt-2"};var rt={__name:"ProsConsBlock",props:{block:{type:Object,required:!0},editable:{type:Boolean,default:!1}},emits:["edit","save","delete"],setup(e,{emit:t}){const l=e,a=t,o=(0,i.EW)(()=>"PROS"===l.block.type),s=(0,i.EW)(()=>o.value&&l.block.items||[]),r=(0,i.EW)(()=>o.value?[]:l.block.items||[]),n=(0,u.KR)([...s.value]),c=(0,u.KR)([...r.value]);(0,i.wB)(()=>l.block.items,e=>{o.value?n.value=e?[...e]:[]:c.value=e?[...e]:[]},{deep:!0});const v=()=>{n.value.push("")},p=e=>{n.value.splice(e,1)},m=()=>{c.value.push("")},b=e=>{c.value.splice(e,1)},k=()=>{o.value?a("save",{items:n.value.filter(e=>e.trim())}):a("save",{items:c.value.filter(e=>e.trim())})};return(t,l)=>{const a=(0,i.g2)("v-divider"),o=(0,i.g2)("v-card-text"),u=(0,i.g2)("v-card"),g=(0,i.g2)("v-text-field"),y=(0,i.g2)("v-icon"),h=(0,i.g2)("v-btn");return e.editable?((0,i.uX)(),(0,i.Wv)(u,{key:1,elevation:"0",variant:"outlined",style:{borderRadius:"16px"}},{default:(0,i.k6)(()=>[(0,i.bF)(o,null,{default:(0,i.k6)(()=>[(0,i.Lk)("div",at,[(0,i.Lk)("div",ot,[l[5]||(l[5]=(0,i.Lk)("div",{class:"text-caption font-weight-bold text-success mb-2"},"ÐŸÐ»ÑŽÑÑ‹",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.value,(e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t,class:"item-edit-row"},[(0,i.bF)(g,{modelValue:n.value[t],"onUpdate:modelValue":e=>n.value[t]=e,variant:"plain",density:"compact",placeholder:"ÐŸÐ»ÑŽÑ","hide-details":""},null,8,["modelValue","onUpdate:modelValue"]),(0,i.bF)(h,{icon:"",size:"small",variant:"text",onClick:e=>p(t)},{default:(0,i.k6)(()=>[(0,i.bF)(y,{size:"small"},{default:(0,i.k6)(()=>[...l[3]||(l[3]=[(0,i.eW)("mdi-close",-1)])]),_:1})]),_:1},8,["onClick"])]))),128)),(0,i.bF)(h,{block:"",variant:"text",size:"small","prepend-icon":"mdi-plus",onClick:v},{default:(0,i.k6)(()=>[...l[4]||(l[4]=[(0,i.eW)(" Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ",-1)])]),_:1})]),(0,i.bF)(a,{vertical:""}),(0,i.Lk)("div",it,[l[8]||(l[8]=(0,i.Lk)("div",{class:"text-caption font-weight-bold text-error mb-2"},"ÐœÐ¸Ð½ÑƒÑÑ‹",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(c.value,(e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t,class:"item-edit-row"},[(0,i.bF)(g,{modelValue:c.value[t],"onUpdate:modelValue":e=>c.value[t]=e,variant:"plain",density:"compact",placeholder:"ÐœÐ¸Ð½ÑƒÑ","hide-details":""},null,8,["modelValue","onUpdate:modelValue"]),(0,i.bF)(h,{icon:"",size:"small",variant:"text",onClick:e=>b(t)},{default:(0,i.k6)(()=>[(0,i.bF)(y,{size:"small"},{default:(0,i.k6)(()=>[...l[6]||(l[6]=[(0,i.eW)("mdi-close",-1)])]),_:1})]),_:1},8,["onClick"])]))),128)),(0,i.bF)(h,{block:"",variant:"text",size:"small","prepend-icon":"mdi-plus",onClick:m},{default:(0,i.k6)(()=>[...l[7]||(l[7]=[(0,i.eW)(" Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ",-1)])]),_:1})])]),(0,i.Lk)("div",st,[(0,i.bF)(h,{size:"small",color:"primary",onClick:k},{default:(0,i.k6)(()=>[...l[9]||(l[9]=[(0,i.eW)(" Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ ",-1)])]),_:1})])]),_:1})]),_:1})):((0,i.uX)(),(0,i.Wv)(u,{key:0,elevation:"0",class:"pros-cons-block",style:{borderRadius:"16px"},onClick:l[0]||(l[0]=e=>t.$emit("edit"))},{default:(0,i.k6)(()=>[(0,i.bF)(o,null,{default:(0,i.k6)(()=>[(0,i.Lk)("div",Ye,[(0,i.Lk)("div",Ge,[l[1]||(l[1]=(0,i.Lk)("div",{class:"text-caption font-weight-bold text-success mb-2"},"ÐŸÐ»ÑŽÑÑ‹",-1)),s.value.length>0?((0,i.uX)(),(0,i.CE)("ul",Je,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.value,(e,t)=>((0,i.uX)(),(0,i.CE)("li",{key:t,class:"text-body-2"},(0,d.v_)(e),1))),128))])):((0,i.uX)(),(0,i.CE)("div",Ze,"ÐÐµÑ‚ Ð¿Ð»ÑŽÑÐ¾Ð²"))]),(0,i.bF)(a,{vertical:""}),(0,i.Lk)("div",et,[l[2]||(l[2]=(0,i.Lk)("div",{class:"text-caption font-weight-bold text-error mb-2"},"ÐœÐ¸Ð½ÑƒÑÑ‹",-1)),r.value.length>0?((0,i.uX)(),(0,i.CE)("ul",tt,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.value,(e,t)=>((0,i.uX)(),(0,i.CE)("li",{key:t,class:"text-body-2"},(0,d.v_)(e),1))),128))])):((0,i.uX)(),(0,i.CE)("div",lt,"ÐÐµÑ‚ Ð¼Ð¸Ð½ÑƒÑÐ¾Ð²"))])])]),_:1})]),_:1}))}}};const nt=(0,C.A)(rt,[["__scopeId","data-v-77bdca82"]]);var ct=nt;const ut={class:"page-editor"},dt={key:0,class:"text-center py-8"},vt={key:1},pt={class:"add-block-divider"},mt={key:0,class:"empty-blocks"};var bt={__name:"PageEditor",setup(e){const t=(0,c.lq)(),l=(0,c.rd)(),a=g(),o=t.params.pageId,s=(0,u.KR)(""),r=(0,u.KR)(null),n=(0,u.KR)(!1),d=(0,u.KR)(0),v=(0,u.KR)(!1),p=(0,i.EW)(()=>a.currentPage?.blocks?[...a.currentPage.blocks].sort((e,t)=>e.order-t.order):[]),m=e=>{const t={TEXT:E,CHECKLIST:I,IDEA_CARD:ce,STATUS:pe,HEADING:fe,QUOTE:Ve,DIVIDER:Pe,LINK:Ke,BULLET_LIST:ze,KEY_VALUE:He,PROS:ct,CONS:ct};return t[e]||E},b=async()=>{s.value&&s.value!==a.currentPage?.title&&await a.updatePage(o,{title:s.value})},k=e=>{r.value=e},y=async(e,t)=>{await a.updateBlock(o,e,t),r.value=null},h=async e=>{await a.deleteBlock(o,e)},f=e=>{d.value=e,n.value=!0},_=async e=>{const t={type:e,order:d.value};"TEXT"===e?t.content="":"CHECKLIST"===e?t.items=[]:"IDEA_CARD"===e?t.content="":"STATUS"===e&&(t.status="TODO",t.color="blue"),await a.createBlock(o,t),n.value=!1},x=()=>{v.value=!0},F=async()=>{await a.deletePage(o),l.push("/")};return(0,i.sV)(async()=>{window.Telegram?.WebApp?.BackButton&&(window.Telegram.WebApp.BackButton.show(),window.Telegram.WebApp.BackButton.onClick(()=>{l.push("/")})),await a.fetchPage(o),a.currentPage&&(s.value=a.currentPage.title||"")}),(0,i.wB)(()=>a.currentPage,e=>{e&&(s.value=e.title||"")}),(e,t)=>{const l=(0,i.g2)("v-text-field"),o=(0,i.g2)("v-icon"),c=(0,i.g2)("v-btn"),g=(0,i.g2)("v-list-item-title"),w=(0,i.g2)("v-list-item"),C=(0,i.g2)("v-list"),V=(0,i.g2)("v-menu"),E=(0,i.g2)("v-app-bar"),R=(0,i.g2)("v-progress-circular"),P=(0,i.g2)("v-container");return(0,i.uX)(),(0,i.CE)("div",ut,[(0,i.bF)(E,{elevation:"0",color:"transparent",class:"px-4"},{default:(0,i.k6)(()=>[(0,i.bF)(l,{modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),placeholder:"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñ‹...",variant:"plain","hide-details":"",class:"title-input",onBlur:b},null,8,["modelValue"]),(0,i.bF)(V,null,{activator:(0,i.k6)(({props:e})=>[(0,i.bF)(c,(0,i.v6)({icon:"",variant:"text"},e),{default:(0,i.k6)(()=>[(0,i.bF)(o,null,{default:(0,i.k6)(()=>[...t[3]||(t[3]=[(0,i.eW)("mdi-dots-vertical",-1)])]),_:1})]),_:1},16)]),default:(0,i.k6)(()=>[(0,i.bF)(C,null,{default:(0,i.k6)(()=>[(0,i.bF)(w,{onClick:x},{default:(0,i.k6)(()=>[(0,i.bF)(g,null,{default:(0,i.k6)(()=>[...t[4]||(t[4]=[(0,i.eW)("Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñƒ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),(0,i.bF)(P,{class:"py-4"},{default:(0,i.k6)(()=>[(0,u.R1)(a).loading?((0,i.uX)(),(0,i.CE)("div",dt,[(0,i.bF)(R,{indeterminate:"",color:"primary"})])):(0,u.R1)(a).currentPage?((0,i.uX)(),(0,i.CE)("div",vt,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(p.value,(e,l)=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"block-container"},[((0,i.uX)(),(0,i.Wv)((0,i.$y)(m(e.type)),{block:e,editable:r.value===e.id,onEdit:t=>k(e.id),onSave:t=>y(e.id,t),onDelete:t=>h(e.id)},null,40,["block","editable","onEdit","onSave","onDelete"])),(0,i.Lk)("div",pt,[(0,i.bF)(c,{icon:"",size:"small",variant:"text",color:"grey",onClick:e=>f(l+1)},{default:(0,i.k6)(()=>[(0,i.bF)(o,null,{default:(0,i.k6)(()=>[...t[5]||(t[5]=[(0,i.eW)("mdi-plus",-1)])]),_:1})]),_:1},8,["onClick"])])]))),128)),0===p.value.length?((0,i.uX)(),(0,i.CE)("div",mt,[(0,i.bF)(o,{size:"60",color:"grey-lighten-1"},{default:(0,i.k6)(()=>[...t[6]||(t[6]=[(0,i.eW)("mdi-text-box-outline",-1)])]),_:1}),t[7]||(t[7]=(0,i.Lk)("p",{class:"text-body-2 text-grey mt-4"},"ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ + Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð±Ð»Ð¾Ðº",-1))])):(0,i.Q3)("",!0)])):(0,i.Q3)("",!0)]),_:1}),(0,i.bF)(Z,{modelValue:n.value,"onUpdate:modelValue":t[1]||(t[1]=e=>n.value=e),"insert-order":d.value,onBlockSelected:_},null,8,["modelValue","insert-order"]),(0,i.bF)(ae,{modelValue:v.value,"onUpdate:modelValue":t[2]||(t[2]=e=>v.value=e),title:"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñƒ?",onConfirm:F},null,8,["modelValue"])])}}};const kt=(0,C.A)(bt,[["__scopeId","data-v-9734180a"]]);var gt=kt,yt={__name:"PaymentSuccessModal",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue","close"],setup(e,{emit:t}){const l=t,a=()=>{l("close"),l("update:modelValue",!1)};return(t,l)=>{const o=(0,i.g2)("v-card-text"),s=(0,i.g2)("v-btn"),r=(0,i.g2)("v-card-actions"),n=(0,i.g2)("v-card"),c=(0,i.g2)("v-dialog");return(0,i.uX)(),(0,i.Wv)(c,{"model-value":e.modelValue,"max-width":"400",persistent:"","onUpdate:modelValue":l[0]||(l[0]=e=>t.$emit("update:modelValue",e))},{default:(0,i.k6)(()=>[(0,i.bF)(n,{style:{borderRadius:"24px"}},{default:(0,i.k6)(()=>[(0,i.bF)(o,{class:"text-center py-8"},{default:(0,i.k6)(()=>[...l[1]||(l[1]=[(0,i.Lk)("div",{class:"confetti"},"ðŸŽ‰",-1),(0,i.Lk)("h2",{class:"text-h5 mt-4 mb-2"},"ÐŸÐ¾Ð´Ð¿Ð¸ÑÐºÐ° Ð°ÐºÑ‚Ð¸Ð²Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð°!",-1),(0,i.Lk)("p",{class:"text-body-1 text-grey"}," Ð¢ÐµÐ¿ÐµÑ€ÑŒ Ñƒ Ð²Ð°Ñ ÐµÑÑ‚ÑŒ Ð´Ð¾ÑÑ‚ÑƒÐ¿ ÐºÐ¾ Ð²ÑÐµÐ¼ Premium Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑÐ¼ ",-1)])]),_:1}),(0,i.bF)(r,null,{default:(0,i.k6)(()=>[(0,i.bF)(s,{block:"",color:"primary",size:"large",onClick:a},{default:(0,i.k6)(()=>[...l[2]||(l[2]=[(0,i.eW)(" ÐÐ°Ñ‡Ð°Ñ‚ÑŒ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒÑÑ ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}};const ht=(0,C.A)(yt,[["__scopeId","data-v-4b20f3a0"]]);var ft=ht;const _t={class:"subscription"},xt={class:"d-flex align-center justify-space-between"},Ft={class:"text-h5 font-weight-bold"},wt={key:0,class:"text-caption text-grey mt-1"},Ct={class:"mb-4"},Vt={class:"d-flex justify-space-between mb-2"},Et={class:"text-body-2"},Rt={key:0,class:"text-caption text-error mt-1"},Pt={class:"d-flex justify-space-between mb-2"},Wt={class:"text-body-2"},Xt={class:"plans-list"},Lt={class:"d-flex justify-space-between align-center mb-2"},Bt={class:"text-h6 font-weight-bold"},Tt={class:"text-h4 font-weight-bold text-primary mt-2"},It={class:"text-body-2 text-grey mb-2"};var Kt={__name:"Subscription",setup(e){const t=M(),l=(0,u.KR)(!1),o=e=>e?new Date(e).toLocaleDateString("ru-RU"):"",s=async e=>{try{const a=await t.createInvoice(e.id);a.invoiceLink&&(window.Telegram?.WebApp?.openInvoice?window.Telegram.WebApp.openInvoice(a.invoiceLink,e=>{"paid"===e&&(l.value=!0,t.fetchSubscription(),t.fetchLimits())}):window.open(a.invoiceLink,"_blank"))}catch(a){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ð¸ Ð¸Ð½Ð²Ð¾Ð¹ÑÐ°:",a)}},r=()=>{l.value=!1};return(0,i.sV)(async()=>{await t.fetchSubscription(),await t.fetchLimits(),await t.fetchPlans()}),(e,n)=>{const c=(0,i.g2)("v-icon"),v=(0,i.g2)("v-btn"),p=(0,i.g2)("v-app-bar-title"),m=(0,i.g2)("v-app-bar"),b=(0,i.g2)("v-card-title"),k=(0,i.g2)("v-chip"),g=(0,i.g2)("v-card-text"),y=(0,i.g2)("v-card"),h=(0,i.g2)("v-progress-linear"),f=(0,i.g2)("v-list-item-title"),_=(0,i.g2)("v-list-item"),x=(0,i.g2)("v-list"),F=(0,i.g2)("v-container");return(0,i.uX)(),(0,i.CE)("div",_t,[(0,i.bF)(m,{elevation:"0",color:"transparent",class:"px-4"},{default:(0,i.k6)(()=>[(0,i.bF)(v,{icon:"",variant:"text",onClick:n[0]||(n[0]=t=>e.$router.push("/"))},{default:(0,i.k6)(()=>[(0,i.bF)(c,null,{default:(0,i.k6)(()=>[...n[2]||(n[2]=[(0,i.eW)("mdi-arrow-left",-1)])]),_:1})]),_:1}),(0,i.bF)(p,null,{default:(0,i.k6)(()=>[...n[3]||(n[3]=[(0,i.eW)("ÐŸÐ¾Ð´Ð¿Ð¸ÑÐºÐ°",-1)])]),_:1})]),_:1}),(0,i.bF)(F,{class:"py-4"},{default:(0,i.k6)(()=>[(0,i.bF)(y,{elevation:"0",class:"mb-4",style:{borderRadius:"24px"}},{default:(0,i.k6)(()=>[(0,i.bF)(b,{class:"text-h6"},{default:(0,i.k6)(()=>[...n[4]||(n[4]=[(0,i.eW)(" Ð¢ÐµÐºÑƒÑ‰Ð¸Ð¹ Ð¿Ð»Ð°Ð½ ",-1)])]),_:1}),(0,i.bF)(g,null,{default:(0,i.k6)(()=>[(0,i.Lk)("div",xt,[(0,i.Lk)("div",null,[(0,i.Lk)("div",Ft,(0,d.v_)((0,u.R1)(t).subscription?.planName||"FREE"),1),(0,u.R1)(t).isPremium&&(0,u.R1)(t).subscription?.endDate?((0,i.uX)(),(0,i.CE)("div",wt," Ð”Ð¾ "+(0,d.v_)(o((0,u.R1)(t).subscription.endDate)),1)):(0,i.Q3)("",!0)]),(0,i.bF)(k,{color:(0,u.R1)(t).isPremium?"success":"grey",size:"large"},{default:(0,i.k6)(()=>[(0,i.eW)((0,d.v_)((0,u.R1)(t).isPremium?"PREMIUM":"FREE"),1)]),_:1},8,["color"])])]),_:1})]),_:1}),(0,i.bF)(y,{elevation:"0",class:"mb-4",style:{borderRadius:"24px"}},{default:(0,i.k6)(()=>[(0,i.bF)(b,{class:"text-h6"},{default:(0,i.k6)(()=>[...n[5]||(n[5]=[(0,i.eW)(" Ð›Ð¸Ð¼Ð¸Ñ‚Ñ‹ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ ",-1)])]),_:1}),(0,i.bF)(g,null,{default:(0,i.k6)(()=>[(0,i.Lk)("div",Ct,[(0,i.Lk)("div",Vt,[n[6]||(n[6]=(0,i.Lk)("span",{class:"text-body-2"},"Ð¡Ñ‚Ñ€Ð°Ð½Ð¸Ñ†Ñ‹",-1)),(0,i.Lk)("span",Et,(0,d.v_)((0,u.R1)(t).currentPages)+" / "+(0,d.v_)((0,u.R1)(t).maxPages),1)]),(0,i.bF)(h,{"model-value":(0,u.R1)(t).currentPages/(0,u.R1)(t).maxPages*100,color:(0,u.R1)(t).pagesLimitReached?"error":"primary",height:"8",rounded:""},null,8,["model-value","color"]),(0,u.R1)(t).pagesLimitReached?((0,i.uX)(),(0,i.CE)("div",Rt," Ð”Ð¾ÑÑ‚Ð¸Ð³Ð½ÑƒÑ‚ Ð»Ð¸Ð¼Ð¸Ñ‚ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ† ")):(0,i.Q3)("",!0)]),(0,i.Lk)("div",null,[(0,i.Lk)("div",Pt,[n[7]||(n[7]=(0,i.Lk)("span",{class:"text-body-2"},"Ð‘Ð»Ð¾ÐºÐ¾Ð² Ð½Ð° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ðµ",-1)),(0,i.Lk)("span",Wt," ÐœÐ°ÐºÑ. "+(0,d.v_)((0,u.R1)(t).maxBlocksPerPage),1)])])]),_:1})]),_:1}),(0,u.R1)(t).canUpgrade?((0,i.uX)(),(0,i.Wv)(y,{key:0,elevation:"0",style:{borderRadius:"24px"}},{default:(0,i.k6)(()=>[(0,i.bF)(b,{class:"text-h6"},{default:(0,i.k6)(()=>[...n[8]||(n[8]=[(0,i.eW)(" Ð”Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹Ðµ Ð¿Ð»Ð°Ð½Ñ‹ ",-1)])]),_:1}),(0,i.bF)(g,null,{default:(0,i.k6)(()=>[(0,i.Lk)("div",Xt,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)((0,u.R1)(t).plans,e=>((0,i.uX)(),(0,i.Wv)(y,{key:e.id,elevation:"0",class:"plan-card mb-3",style:(0,d.Tr)({borderRadius:"16px",border:e.recommended?"2px solid primary":"1px solid rgba(0,0,0,0.1)"}),onClick:t=>s(e)},{default:(0,i.k6)(()=>[(0,i.bF)(g,null,{default:(0,i.k6)(()=>[(0,i.Lk)("div",Lt,[(0,i.Lk)("div",null,[(0,i.Lk)("div",Bt,(0,d.v_)(e.name),1),(0,i.Lk)("div",Tt,(0,d.v_)(e.price)+" â­ ",1)]),e.recommended?((0,i.uX)(),(0,i.Wv)(k,{key:0,color:"primary",size:"small"},{default:(0,i.k6)(()=>[...n[9]||(n[9]=[(0,i.eW)(" Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ ",-1)])]),_:1})):(0,i.Q3)("",!0)]),(0,i.Lk)("div",It,(0,d.v_)(e.durationDays)+" Ð´Ð½ÐµÐ¹ ",1),(0,i.bF)(x,{density:"compact",class:"pa-0"},{default:(0,i.k6)(()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.benefits,e=>((0,i.uX)(),(0,i.Wv)(_,{key:e,class:"pa-0"},{prepend:(0,i.k6)(()=>[(0,i.bF)(c,{size:"small",color:"success"},{default:(0,i.k6)(()=>[...n[10]||(n[10]=[(0,i.eW)("mdi-check",-1)])]),_:1})]),default:(0,i.k6)(()=>[(0,i.bF)(f,{class:"text-body-2"},{default:(0,i.k6)(()=>[(0,i.eW)((0,d.v_)(e),1)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024),(0,i.bF)(v,{block:"",color:"primary",class:"mt-3",onClick:(0,a.D$)(t=>s(e),["stop"])},{default:(0,i.k6)(()=>[...n[11]||(n[11]=[(0,i.eW)(" Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ ",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1032,["style","onClick"]))),128))])]),_:1})]),_:1})):(0,i.Q3)("",!0)]),_:1}),(0,i.bF)(ft,{modelValue:l.value,"onUpdate:modelValue":n[1]||(n[1]=e=>l.value=e),onClose:r},null,8,["modelValue"])])}}};const Ut=(0,C.A)(Kt,[["__scopeId","data-v-7365fb97"]]);var At=Ut;const St=[{path:"/",name:"Dashboard",component:N},{path:"/pages/:pageId",name:"PageEditor",component:gt,props:!0},{path:"/subscription",name:"Subscription",component:At}],Ot=(0,c.aE)({history:(0,c.LA)(),routes:St});var Dt=Ot,zt=l(6169),$t=l(880),jt=l(4597),qt=(l(5524),(0,zt.$N)({components:$t,directives:jt,theme:{defaultTheme:"light",themes:{light:{colors:{primary:"#0088cc",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107",background:"#F8F9FA",surface:"#FFFFFF"}}}},defaults:{VCard:{elevation:0,style:"border-radius: 24px; box-shadow: 0 4px 20px rgba(0,0,0,0.08);"},VBtn:{style:"border-radius: 16px; text-transform: none;"},VTextField:{variant:"solo-filled",style:"border-radius: 16px;"}}}));function Nt(){try{const e=(0,p.aO)();if(window.Telegram?.WebApp?.themeParams){const e=window.Telegram.WebApp.themeParams,t=document.documentElement;e.bg_color&&t.style.setProperty("--tg-theme-bg-color",e.bg_color),e.text_color&&t.style.setProperty("--tg-theme-text-color",e.text_color),e.hint_color&&t.style.setProperty("--tg-theme-hint-color",e.hint_color),e.link_color&&t.style.setProperty("--tg-theme-link-color",e.link_color),e.button_color&&t.style.setProperty("--tg-theme-button-color",e.button_color),e.button_text_color&&t.style.setProperty("--tg-theme-button-text-color",e.button_text_color)}return{launchParams:e}}catch(e){return console.warn("Telegram SDK Ð½Ðµ Ð´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½:",e),null}}const Qt=(0,a.Ef)(n),Mt=(0,o.Ey)();Qt.use(Mt),Qt.use(Dt),Qt.use(qt),Nt(),Qt.mount("#app")}},t={};function l(a){var o=t[a];if(void 0!==o)return o.exports;var i=t[a]={exports:{}};return e[a].call(i.exports,i,i.exports,l),i.exports}l.m=e,function(){var e=[];l.O=function(t,a,o,i){if(!a){var s=1/0;for(u=0;u<e.length;u++){a=e[u][0],o=e[u][1],i=e[u][2];for(var r=!0,n=0;n<a.length;n++)(!1&i||s>=i)&&Object.keys(l.O).every(function(e){return l.O[e](a[n])})?a.splice(n--,1):(r=!1,i<s&&(s=i));if(r){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[a,o,i]}}(),function(){l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,{a:t}),t}}(),function(){l.d=function(e,t){for(var a in t)l.o(t,a)&&!l.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};l.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,i,s=a[0],r=a[1],n=a[2],c=0;if(s.some(function(t){return 0!==e[t]})){for(o in r)l.o(r,o)&&(l.m[o]=r[o]);if(n)var u=n(l)}for(t&&t(a);c<s.length;c++)i=s[c],l.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return l.O(u)},a=self["webpackChunkmini_notes_ui"]=self["webpackChunkmini_notes_ui"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=l.O(void 0,[504],function(){return l(3541)});a=l.O(a)})();
//# sourceMappingURL=app.f8218f6d.js.map