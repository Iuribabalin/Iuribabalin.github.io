"use strict";(self["webpackChunkmini_notes_ui"]=self["webpackChunkmini_notes_ui"]||[]).push([[237],{5560:function(e,a,t){t.r(a),t.d(a,{default:function(){return W}});var s=t(6768),i=t(5130),o=t(4232),n=t(365);const c={class:"pages-view"},l={class:"pages-header"},r={class:"pages-header__icon"},d={class:"pages-search"},u={class:"pages-search__wrapper"},p={class:"pages-content"},g={key:0,class:"pages-loading"};function h(e,a,t,h,_,m){const k=(0,s.g2)("EmptyState"),y=(0,s.g2)("PageCard"),v=(0,s.g2)("CreatePageModal");return(0,s.uX)(),(0,s.CE)("div",c,[(0,s.Lk)("div",l,[(0,s.Lk)("div",r,[(0,s.bF)(n.w,{icon:"mdi-note-multiple-outline",size:"28"})]),a[7]||(a[7]=(0,s.Lk)("div",{class:"pages-header__content"},[(0,s.Lk)("h1",{class:"pages-header__title"},"Mini Notes"),(0,s.Lk)("p",{class:"pages-header__subtitle"},"Ваши заметки")],-1)),(0,s.Lk)("button",{class:"pages-header__settings",onClick:a[0]||(a[0]=(...e)=>m.goToSubscription&&m.goToSubscription(...e))},[(0,s.bF)(n.w,{icon:"mdi-cog-outline",size:"22"})])]),(0,s.Lk)("div",d,[(0,s.Lk)("div",u,[(0,s.bF)(n.w,{icon:"mdi-magnify",size:"20",class:"pages-search__icon"}),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>_.searchQuery=e),type:"text",class:"pages-search__input",placeholder:"Поиск страниц...",onInput:a[2]||(a[2]=(...e)=>m.onSearchInput&&m.onSearchInput(...e))},null,544),[[i.Jo,_.searchQuery]]),_.searchQuery?((0,s.uX)(),(0,s.CE)("button",{key:0,class:"pages-search__clear",onClick:a[3]||(a[3]=(...e)=>m.clearSearch&&m.clearSearch(...e))},[(0,s.bF)(n.w,{icon:"mdi-close",size:"18"})])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",p,[_.loading?((0,s.uX)(),(0,s.CE)("div",g,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(3,e=>(0,s.Lk)("div",{class:"pages-loading__card",key:e},[...a[8]||(a[8]=[(0,s.Lk)("div",{class:"pages-loading__icon"},null,-1),(0,s.Lk)("div",{class:"pages-loading__text"},[(0,s.Lk)("div",{class:"pages-loading__title"}),(0,s.Lk)("div",{class:"pages-loading__meta"})],-1)])])),64))])):0!==_.pages.length||_.searchQuery?0===_.pages.length&&_.searchQuery?((0,s.uX)(),(0,s.Wv)(k,{key:2,icon:"mdi-magnify",title:"Ничего не найдено",subtitle:"Попробуйте изменить запрос"})):((0,s.uX)(),(0,s.Wv)(i.F,{key:3,name:"fade-up",tag:"div",class:"pages-list"},{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(_.pages,(e,a)=>((0,s.uX)(),(0,s.Wv)(y,{key:e.id,page:e,style:(0,o.Tr)({transitionDelay:.05*a+"s"})},null,8,["page","style"]))),128))]),_:1})):((0,s.uX)(),(0,s.Wv)(k,{key:1,icon:"mdi-note-plus-outline",title:"Нет страниц",subtitle:"Создайте первую страницу для ваших заметок","action-text":"Создать страницу",onAction:a[4]||(a[4]=e=>_.showCreateModal=!0)}))]),(0,s.Lk)("button",{class:"pages-fab",onClick:a[5]||(a[5]=e=>_.showCreateModal=!0)},[(0,s.bF)(n.w,{icon:"mdi-plus",size:"28"})]),(0,s.bF)(v,{ref:"createModal",show:_.showCreateModal,onClose:a[6]||(a[6]=e=>_.showCreateModal=!1),onCreate:m.createPage},null,8,["show","onCreate"])])}t(4114);const _={class:"page-card__icon-wrapper"},m={class:"page-card__content"},k={class:"page-card__title"},y={class:"page-card__meta"},v={class:"page-card__blocks"},b={class:"page-card__date"};function C(e,a,t,i,c,l){return(0,s.uX)(),(0,s.CE)("div",{class:"page-card",onClick:a[0]||(a[0]=(...e)=>l.goToPage&&l.goToPage(...e))},[(0,s.Lk)("div",_,[(0,s.bF)(n.w,{icon:"mdi-note-text-outline",size:"24"})]),(0,s.Lk)("div",m,[(0,s.Lk)("h3",k,(0,o.v_)(t.page.title),1),(0,s.Lk)("div",y,[(0,s.Lk)("span",v,[(0,s.bF)(n.w,{icon:"mdi-view-grid-outline",size:"14"}),(0,s.eW)(" "+(0,o.v_)(t.page.blockCount)+" "+(0,o.v_)(l.blocksLabel),1)]),(0,s.Lk)("span",b,(0,o.v_)(l.formattedDate),1)])]),(0,s.bF)(n.w,{icon:"mdi-chevron-right",size:"20",class:"page-card__arrow"})])}var w={name:"PageCard",props:{page:{type:Object,required:!0}},computed:{blocksLabel(){const e=this.page.blockCount;return 1===e?"блок":e>=2&&e<=4?"блока":"блоков"},formattedDate(){const e=new Date(this.page.updatedAt),a=new Date,t=a-e,s=Math.floor(t/864e5);return 0===s?"Сегодня":1===s?"Вчера":s<7?`${s} дн. назад`:e.toLocaleDateString("ru-RU",{day:"numeric",month:"short"})}},methods:{goToPage(){this.$router.push({name:"page-detail",params:{id:this.page.id}})}}},f=t(1241);const L=(0,f.A)(w,[["render",C],["__scopeId","data-v-e53be752"]]);var P=L;const F={key:0,class:"create-modal"},X={class:"create-modal__actions"},S=["disabled"],E={key:0},T={key:1};function M(e,a,t,o,n,c){return(0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[(0,s.bF)(i.eB,{name:"fade"},{default:(0,s.k6)(()=>[t.show?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"create-modal__overlay",onClick:a[4]||(a[4]=(0,i.D$)((...e)=>c.close&&c.close(...e),["self"]))},[(0,s.bF)(i.eB,{name:"slide-up"},{default:(0,s.k6)(()=>[t.show?((0,s.uX)(),(0,s.CE)("div",F,[a[5]||(a[5]=(0,s.Lk)("h3",{class:"create-modal__title"},"Новая страница",-1)),(0,s.bo)((0,s.Lk)("input",{ref:"input","onUpdate:modelValue":a[0]||(a[0]=e=>n.title=e),type:"text",class:"create-modal__input",placeholder:"Название страницы",maxlength:"200",onKeyup:a[1]||(a[1]=(0,i.jR)((...e)=>c.create&&c.create(...e),["enter"]))},null,544),[[i.Jo,n.title]]),(0,s.Lk)("div",X,[(0,s.Lk)("button",{class:"create-modal__btn create-modal__btn--cancel",onClick:a[2]||(a[2]=(...e)=>c.close&&c.close(...e))}," Отмена "),(0,s.Lk)("button",{class:"create-modal__btn create-modal__btn--create",disabled:!n.title.trim()||n.loading,onClick:a[3]||(a[3]=(...e)=>c.create&&c.create(...e))},[n.loading?((0,s.uX)(),(0,s.CE)("span",E,"Создание...")):((0,s.uX)(),(0,s.CE)("span",T,"Создать"))],8,S)])])):(0,s.Q3)("",!0)]),_:1})])):(0,s.Q3)("",!0)]),_:1})])}var Q={name:"CreatePageModal",props:{show:{type:Boolean,default:!1}},emits:["close","create"],data(){return{title:"",loading:!1}},watch:{show(e){e&&(this.title="",this.$nextTick(()=>{this.$refs.input?.focus()}))}},methods:{close(){this.loading||this.$emit("close")},async create(){this.title.trim()&&!this.loading&&(this.loading=!0,this.$emit("create",this.title.trim()))},resetLoading(){this.loading=!1}}};const $=(0,f.A)(Q,[["render",M],["__scopeId","data-v-11d744b5"]]);var z=$,I=t(6844),x=t(1668),A={name:"PagesListView",components:{PageCard:P,CreatePageModal:z,EmptyState:I.A},data(){return{loading:!0,pages:[],searchQuery:"",searchTimeout:null,showCreateModal:!1}},async mounted(){await this.loadPages()},methods:{async loadPages(){try{this.loading=!0;const e=await x.v0.getPages({page:0,size:50});this.pages=e.data.content}catch(e){console.error("Failed to load pages:",e)}finally{this.loading=!1}},onSearchInput(){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.search()},300)},async search(){if(this.searchQuery.trim())try{this.loading=!0;const e=await x.v0.searchPages(this.searchQuery.trim(),{page:0,size:50});this.pages=e.data.content}catch(e){console.error("Failed to search pages:",e)}finally{this.loading=!1}else await this.loadPages()},clearSearch(){this.searchQuery="",this.loadPages()},async createPage(e){try{const a=await x.v0.createPage({title:e});this.$refs.createModal?.resetLoading(),this.showCreateModal=!1,this.$router.push({name:"page-detail",params:{id:a.data.id}})}catch(a){console.error("Failed to create page:",a),this.$refs.createModal?.resetLoading()}},goToSubscription(){this.$router.push({name:"subscription"})}}};const D=(0,f.A)(A,[["render",h],["__scopeId","data-v-462854dc"]]);var W=D},6844:function(e,a,t){t.d(a,{A:function(){return h}});var s=t(6768),i=t(4232),o=t(365);const n={class:"empty-state"},c={class:"empty-state__icon-wrapper"},l={class:"empty-state__title"},r={key:0,class:"empty-state__subtitle"};function d(e,a,t,d,u,p){return(0,s.uX)(),(0,s.CE)("div",n,[(0,s.Lk)("div",c,[(0,s.bF)(o.w,{icon:t.icon,size:"48",class:"empty-state__icon"},null,8,["icon"])]),(0,s.Lk)("h3",l,(0,i.v_)(t.title),1),t.subtitle?((0,s.uX)(),(0,s.CE)("p",r,(0,i.v_)(t.subtitle),1)):(0,s.Q3)("",!0),t.actionText?((0,s.uX)(),(0,s.CE)("button",{key:1,class:"empty-state__action",onClick:a[0]||(a[0]=a=>e.$emit("action"))},(0,i.v_)(t.actionText),1)):(0,s.Q3)("",!0)])}var u={name:"EmptyState",props:{icon:{type:String,default:"mdi-note-outline"},title:{type:String,required:!0},subtitle:{type:String,default:""},actionText:{type:String,default:""}},emits:["action"]},p=t(1241);const g=(0,p.A)(u,[["render",d],["__scopeId","data-v-5b7a5deb"]]);var h=g}}]);
//# sourceMappingURL=pages.52488c8d.js.map