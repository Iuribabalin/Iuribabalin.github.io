"use strict";(self["webpackChunkmini_notes_ui"]=self["webpackChunkmini_notes_ui"]||[]).push([[168],{1804:function(e,t,o){o.r(t),o.d(t,{default:function(){return Mi}});var l=o(6768),i=o(5130),a=o(4232),n=(o(3110),o(7536)),s=o(7579),r=o(1240),c=o(9759),u=o(423),d=o(329),v=o(6548),p=o(2225),m=o(8954),k=o(144),b=o(8392),h=o(4396),f=o(5081);const g=(0,b.j)({baseColor:String,divided:Boolean,direction:{type:String,default:"horizontal"},...(0,n.r)(),...(0,s.u)(),...(0,c.r)(),...(0,u.s)(),...(0,d.S)(),...(0,v.X)(),...(0,p.yx)(),...(0,m.gI)()},"VBtnGroup"),y=(0,h.RW)()({name:"VBtnGroup",props:g(),setup(e,t){let{slots:o}=t;const{themeClasses:i}=(0,p.NX)(e),{densityClasses:s}=(0,c.Q)(e),{borderClasses:v}=(0,n.M)(e),{elevationClasses:m}=(0,u.j)(e),{roundedClasses:b}=(0,d.v)(e);(0,r.Uh)({VBtn:{height:(0,k.lW)(()=>"horizontal"===e.direction?"auto":null),baseColor:(0,k.lW)(()=>e.baseColor),color:(0,k.lW)(()=>e.color),density:(0,k.lW)(()=>e.density),flat:!0,variant:(0,k.lW)(()=>e.variant)}}),(0,f.C)(()=>(0,l.bF)(e.tag,{class:(0,a.C4)(["v-btn-group",`v-btn-group--${e.direction}`,{"v-btn-group--divided":e.divided},i.value,v.value,s.value,m.value,b.value,e.class]),style:(0,a.Tr)(e.style)},o))}});var _=o(7071);const w=Symbol.for("vuetify:v-btn-toggle"),C=(0,b.j)({...g(),...(0,_.gL)()},"VBtnToggle");(0,h.RW)()({name:"VBtnToggle",props:C(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:o}=t;const{isSelected:i,next:a,prev:n,select:s,selected:r}=(0,_.dB)(e,w);return(0,f.C)(()=>{const t=y.filterProps(e);return(0,l.bF)(y,(0,l.v6)({class:["v-btn-toggle",e.class]},t,{style:e.style}),{default:()=>[o.default?.({isSelected:i,next:a,prev:n,select:s,selected:r})]})}),{next:a,prev:n,select:s}}});var E=o(6029),x=o(365),L=o(5043),T=(o(8111),o(116),o(8306));function I(e,t){const o=(0,k.KR)(),i=(0,k.IJ)(!1);if(T.tB){const a=new IntersectionObserver(t=>{e?.(t,a),i.value=!!t.find(e=>e.isIntersecting)},t);(0,k.jr)(()=>{a.disconnect()}),(0,l.wB)(o,(e,t)=>{t&&(a.unobserve(t),i.value=!1),e&&a.observe(e)},{flush:"post"})}return{intersectionRef:o,isIntersecting:i}}var S=o(7796),B=o(3935),F=o(7443);const A=(0,b.j)({bgColor:String,color:String,indeterminate:[Boolean,String],rounded:Boolean,modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...(0,s.u)(),...(0,B.k)(),...(0,v.X)({tag:"div"}),...(0,p.yx)()},"VProgressCircular"),D=(0,h.RW)()({name:"VProgressCircular",props:A(),setup(e,t){let{slots:o}=t;const i=20,n=2*Math.PI*i,s=(0,k.KR)(),{themeClasses:r}=(0,p.NX)(e),{sizeClasses:c,sizeStyles:u}=(0,B.X)(e),{textColorClasses:d,textColorStyles:v}=(0,L.aH)(()=>e.color),{textColorClasses:m,textColorStyles:b}=(0,L.aH)(()=>e.bgColor),{intersectionRef:h,isIntersecting:g}=I(),{resizeRef:y,contentRect:_}=(0,S.w)(),w=(0,k.lW)(()=>(0,F.qE)(parseFloat(e.modelValue),0,100)),C=(0,k.lW)(()=>Number(e.width)),E=(0,k.lW)(()=>u.value?Number(e.size):_.value?_.value.width:Math.max(C.value,32)),x=(0,k.lW)(()=>i/(1-C.value/E.value)*2),A=(0,k.lW)(()=>C.value/E.value*x.value),D=(0,k.lW)(()=>{const t=(100-w.value)/100*n;return e.rounded&&w.value>0&&w.value<100?(0,F.Dg)(Math.min(n-.01,t+A.value)):(0,F.Dg)(t)}),O=(0,l.EW)(()=>{const t=Number(e.rotate);return e.rounded?t+A.value/2/n*360:t});return(0,l.nT)(()=>{h.value=s.value,y.value=s.value}),(0,f.C)(()=>(0,l.bF)(e.tag,{ref:s,class:(0,a.C4)(["v-progress-circular",{"v-progress-circular--indeterminate":!!e.indeterminate,"v-progress-circular--visible":g.value,"v-progress-circular--disable-shrink":e.indeterminate&&("disable-shrink"===e.indeterminate||(0,T._e)())},r.value,c.value,d.value,e.class]),style:(0,a.Tr)([u.value,v.value,e.style]),role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.indeterminate?void 0:w.value},{default:()=>[(0,l.Lk)("svg",{style:{transform:`rotate(calc(-90deg + ${O.value}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${x.value} ${x.value}`},[(0,l.Lk)("circle",{class:(0,a.C4)(["v-progress-circular__underlay",m.value]),style:(0,a.Tr)(b.value),fill:"transparent",cx:"50%",cy:"50%",r:i,"stroke-width":A.value,"stroke-dasharray":n,"stroke-dashoffset":0},null),(0,l.Lk)("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:i,"stroke-width":A.value,"stroke-dasharray":n,"stroke-dashoffset":D.value,"stroke-linecap":e.rounded?"round":void 0},null)]),o.default&&(0,l.Lk)("div",{class:"v-progress-circular__content"},[o.default({value:w.value})])]})),{}}});var O=o(3627),R=o(2654),$=o(3398);const P=(0,b.j)({loading:[Boolean,String]},"loader");function W(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,$.M)();const o=(0,k.lW)(()=>({[`${t}--loading`]:e.loading}));return{loaderClasses:o}}var X=o(2046);const V=["top","bottom"],N=["start","end","left","right"];function z(e,t){let[o,l]=e.split(" ");return l||(l=(0,F.mK)(V,o)?"start":(0,F.mK)(N,o)?"top":"center"),{side:K(o,t),align:K(l,t)}}function K(e,t){return"start"===e?t?"right":"left":"end"===e?t?"left":"right":e}function j(e){return{side:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.side],align:e.align}}function M(e){return{side:e.side,align:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.align]}}function U(e){return{side:e.align,align:e.side}}function q(e){return(0,F.mK)(V,e.side)?"y":"x"}const H={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},Y=(0,b.j)({location:String},"location");function Q(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2?arguments[2]:void 0;const{isRtl:i}=(0,X.IA)(),a=(0,l.EW)(()=>{if(!e.location)return{};const{side:l,align:a}=z(e.location.split(" ").length>1?e.location:`${e.location} center`,i.value);function n(e){return o?o(e):0}const s={};return"center"!==l&&(t?s[H[l]]=`calc(100% - ${n(l)}px)`:s[l]=0),"center"!==a?t?s[H[a]]=`calc(100% - ${n(a)}px)`:s[a]=0:("center"===l?s.top=s.left="50%":s[{top:"left",bottom:"left",left:"top",right:"top"}[l]]="50%",s.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[l]),s});return{locationStyles:a}}const J=["static","relative","fixed","absolute","sticky"],G=(0,b.j)({position:{type:String,validator:e=>J.includes(e)}},"position");function Z(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,$.M)();const o=(0,k.lW)(()=>e.position?`${t}--${e.position}`:void 0);return{positionClasses:o}}var ee=o(7911);function te(e,t){(0,l.wB)(()=>e.isActive?.value,o=>{e.isLink.value&&null!=o&&t&&(0,l.dY)(()=>{t(o)})},{immediate:!0})}var oe=o(7354);const le=(0,b.j)({active:{type:Boolean,default:void 0},activeColor:String,baseColor:String,symbol:{type:null,default:w},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:R.TX,appendIcon:R.TX,block:Boolean,readonly:Boolean,slim:Boolean,stacked:Boolean,spaced:String,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},...(0,n.r)(),...(0,s.u)(),...(0,c.r)(),...(0,O.X)(),...(0,u.s)(),...(0,_.TX)(),...P(),...Y(),...G(),...(0,d.S)(),...(0,ee.WC)(),...(0,B.k)(),...(0,v.X)({tag:"button"}),...(0,p.yx)(),...(0,m.gI)({variant:"elevated"})},"VBtn"),ie=(0,h.RW)()({name:"VBtn",props:le(),emits:{"group:selected":e=>!0},setup(e,t){let{attrs:o,slots:i}=t;const{themeClasses:s}=(0,p.NX)(e),{borderClasses:r}=(0,n.M)(e),{densityClasses:v}=(0,c.Q)(e),{dimensionStyles:b}=(0,O.S)(e),{elevationClasses:h}=(0,u.j)(e),{loaderClasses:g}=W(e),{locationStyles:y}=Q(e),{positionClasses:w}=Z(e),{roundedClasses:C}=(0,d.v)(e),{sizeClasses:L,sizeStyles:T}=(0,B.X)(e),I=(0,_.aO)(e,e.symbol,!1),S=(0,ee.iE)(e,o),F=(0,l.EW)(()=>void 0!==e.active?e.active:S.isRouterLink.value?S.isActive?.value:I?.isSelected.value),A=(0,k.lW)(()=>F.value?e.activeColor??e.color:e.color),R=(0,l.EW)(()=>{const t=I?.isSelected.value&&(!S.isLink.value||S.isActive?.value)||!I||S.isActive?.value;return{color:t?A.value??e.baseColor:e.baseColor,variant:e.variant}}),{colorClasses:$,colorStyles:P,variantClasses:X}=(0,m.rn)(R),V=(0,l.EW)(()=>I?.disabled.value||e.disabled),N=(0,k.lW)(()=>"elevated"===e.variant&&!(e.disabled||e.flat||e.border)),z=(0,l.EW)(()=>{if(void 0!==e.value&&"symbol"!==typeof e.value)return Object(e.value)===e.value?JSON.stringify(e.value,null,0):e.value});function K(e){V.value||S.isLink.value&&(e.metaKey||e.ctrlKey||e.shiftKey||0!==e.button||"_blank"===o.target)||(S.isRouterLink.value?S.navigate?.(e):I?.toggle())}return te(S,I?.select),(0,f.C)(()=>{const t=S.isLink.value?"a":e.tag,o=!(!e.prependIcon&&!i.prepend),n=!(!e.appendIcon&&!i.append),c=!(!e.icon||!0===e.icon);return(0,l.bo)((0,l.bF)(t,(0,l.v6)(S.linkProps,{type:"a"===t?void 0:"button",class:["v-btn",I?.selectedClass.value,{"v-btn--active":F.value,"v-btn--block":e.block,"v-btn--disabled":V.value,"v-btn--elevated":N.value,"v-btn--flat":e.flat,"v-btn--icon":!!e.icon,"v-btn--loading":e.loading,"v-btn--readonly":e.readonly,"v-btn--slim":e.slim,"v-btn--stacked":e.stacked},e.spaced?["v-btn--spaced",`v-btn--spaced-${e.spaced}`]:[],s.value,r.value,$.value,v.value,h.value,g.value,w.value,C.value,L.value,X.value,e.class],style:[P.value,b.value,y.value,T.value,e.style],"aria-busy":!!e.loading||void 0,disabled:V.value&&"a"!==t||void 0,tabindex:e.loading||e.readonly?-1:void 0,onClick:K,value:z.value}),{default:()=>[(0,m.wN)(!0,"v-btn"),!e.icon&&o&&(0,l.Lk)("span",{key:"prepend",class:"v-btn__prepend"},[i.prepend?(0,l.bF)(E.K,{key:"prepend-defaults",disabled:!e.prependIcon,defaults:{VIcon:{icon:e.prependIcon}}},i.prepend):(0,l.bF)(x.w,{key:"prepend-icon",icon:e.prependIcon},null)]),(0,l.Lk)("span",{class:"v-btn__content","data-no-activator":""},[!i.default&&c?(0,l.bF)(x.w,{key:"content-icon",icon:e.icon},null):(0,l.bF)(E.K,{key:"content-defaults",disabled:!c,defaults:{VIcon:{icon:e.icon}}},{default:()=>[i.default?.()??(0,a.v_)(e.text)]})]),!e.icon&&n&&(0,l.Lk)("span",{key:"append",class:"v-btn__append"},[i.append?(0,l.bF)(E.K,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VIcon:{icon:e.appendIcon}}},i.append):(0,l.bF)(x.w,{key:"append-icon",icon:e.appendIcon},null)]),!!e.loading&&(0,l.Lk)("span",{key:"loader",class:"v-btn__loader"},[i.loader?.()??(0,l.bF)(D,{color:"boolean"===typeof e.loading?void 0:e.loading,indeterminate:!0,width:"2"},null)])]}),[[oe.A,!V.value&&e.ripple,"",{center:!!e.icon}]])}),{group:I}}});o(8237),o(4114),o(1701);var ae=o(9948);function ne(e,t){return{x:e.x+t.x,y:e.y+t.y}}function se(e,t){return{x:e.x-t.x,y:e.y-t.y}}function re(e,t){if("top"===e.side||"bottom"===e.side){const{side:o,align:l}=e,i="left"===l?0:"center"===l?t.width/2:"right"===l?t.width:l,a="top"===o?0:"bottom"===o?t.height:o;return ne({x:i,y:a},t)}if("left"===e.side||"right"===e.side){const{side:o,align:l}=e,i="left"===o?0:"right"===o?t.width:o,a="top"===l?0:"center"===l?t.height/2:"bottom"===l?t.height:l;return ne({x:i,y:a},t)}return ne({x:t.width/2,y:t.height/2},t)}class ce{constructor(e){const t=document.body.currentCSSZoom??1,o=e instanceof Element,l=o?1+(1-t)/t:1,{x:i,y:a,width:n,height:s}=o?e.getBoundingClientRect():e;this.x=i*l,this.y=a*l,this.width=n*l,this.height=s*l}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function ue(e,t){return{x:{before:Math.max(0,t.left-e.left),after:Math.max(0,e.right-t.right)},y:{before:Math.max(0,t.top-e.top),after:Math.max(0,e.bottom-t.bottom)}}}function de(e){if(Array.isArray(e)){const t=document.body.currentCSSZoom??1,o=1+(1-t)/t;return new ce({x:e[0]*o,y:e[1]*o,width:0*o,height:0*o})}return new ce(e)}function ve(e){if(e===document.documentElement){if(visualViewport){const e=document.body.currentCSSZoom??1;return new ce({x:visualViewport.scale>1?0:visualViewport.offsetLeft,y:visualViewport.scale>1?0:visualViewport.offsetTop,width:visualViewport.width*visualViewport.scale/e,height:visualViewport.height*visualViewport.scale/e})}return new ce({x:0,y:0,width:document.documentElement.clientWidth,height:document.documentElement.clientHeight})}return new ce(e)}function pe(e){const t=new ce(e),o=getComputedStyle(e),l=o.transform;if(l){let i,a,n,s,r;if(l.startsWith("matrix3d("))i=l.slice(9,-1).split(/, /),a=Number(i[0]),n=Number(i[5]),s=Number(i[12]),r=Number(i[13]);else{if(!l.startsWith("matrix("))return new ce(t);i=l.slice(7,-1).split(/, /),a=Number(i[0]),n=Number(i[3]),s=Number(i[4]),r=Number(i[5])}const c=o.transformOrigin,u=t.x-s-(1-a)*parseFloat(c),d=t.y-r-(1-n)*parseFloat(c.slice(c.indexOf(" ")+1)),v=a?t.width/a:e.offsetWidth+1,p=n?t.height/n:e.offsetHeight+1;return new ce({x:u,y:d,width:v,height:p})}return new ce(t)}function me(e,t,o){if("undefined"===typeof e.animate)return{finished:Promise.resolve()};let l;try{l=e.animate(t,o)}catch(i){return{finished:Promise.resolve()}}return"undefined"===typeof l.finished&&(l.finished=new Promise(e=>{l.onfinish=()=>{e(l)}})),l}function ke(e){while(e){if("fixed"===window.getComputedStyle(e).position)return!0;e=e.offsetParent}return!1}var be=o(7516);function he(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];while(e){if(t?ye(e):ge(e))return e;e=e.parentElement}return document.scrollingElement}function fe(e,t){const o=[];if(t&&e&&!t.contains(e))return o;while(e){if(ge(e)&&o.push(e),e===t)break;e=e.parentElement}return o}function ge(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e),o="scroll"===t.overflowY||"auto"===t.overflowY&&e.scrollHeight>e.clientHeight,l="scroll"===t.overflowX||"auto"===t.overflowX&&e.scrollWidth>e.clientWidth;return o||l}function ye(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e);return["scroll","auto"].includes(t.overflowY)}var _e=o(6455);const we={static:xe,connected:Te},Ce=(0,b.j)({locationStrategy:{type:[String,Function],default:"static",validator:e=>"function"===typeof e||e in we},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array],stickToTarget:Boolean,viewportMargin:{type:[Number,String],default:12}},"VOverlay-location-strategies");function Ee(e,t){const o=(0,k.KR)({}),i=(0,k.KR)();function a(e){i.value?.(e)}function n(e){i.value?.(e)}function s(e){i.value?.(e)}return T.ZK&&(0,ae.Y)(()=>!(!t.isActive.value||!e.locationStrategy),r=>{(0,l.wB)(()=>e.locationStrategy,r),(0,k.jr)(()=>{window.removeEventListener("resize",a),visualViewport?.removeEventListener("resize",n),visualViewport?.removeEventListener("scroll",s),i.value=void 0}),window.addEventListener("resize",a,{passive:!0}),visualViewport?.addEventListener("resize",n,{passive:!0}),visualViewport?.addEventListener("scroll",s,{passive:!0}),"function"===typeof e.locationStrategy?i.value=e.locationStrategy(t,e,o)?.updateLocation:i.value=we[e.locationStrategy](t,e,o)?.updateLocation}),{contentStyles:o,updateLocation:i}}function xe(){}function Le(e,t){const o=pe(e);return t?o.x+=parseFloat(e.style.right||0):o.x-=parseFloat(e.style.left||0),o.y-=parseFloat(e.style.top||0),o}function Te(e,t,o){const i=Array.isArray(e.target.value)||ke(e.target.value);i&&Object.assign(o.value,{position:"fixed",top:0,[e.isRtl.value?"right":"left"]:0});const{preferredAnchor:a,preferredOrigin:n}=(0,F.yc)(()=>{const o=z(t.location,e.isRtl.value),l="overlap"===t.origin?o:"auto"===t.origin?j(o):z(t.origin,e.isRtl.value);return o.side===l.side&&o.align===M(l).align?{preferredAnchor:U(o),preferredOrigin:U(l)}:{preferredAnchor:o,preferredOrigin:l}}),[s,r,c,u]=["minWidth","minHeight","maxWidth","maxHeight"].map(e=>(0,l.EW)(()=>{const o=parseFloat(t[e]);return isNaN(o)?1/0:o})),d=(0,l.EW)(()=>{if(Array.isArray(t.offset))return t.offset;if("string"===typeof t.offset){const e=t.offset.split(" ").map(parseFloat);return e.length<2&&e.push(0),e}return"number"===typeof t.offset?[t.offset,0]:[0,0]});let v=!1,p=-1;const m=new F.CZ(4),b=new ResizeObserver(()=>{if(!v)return;if(requestAnimationFrame(e=>{e!==p&&m.clear(),requestAnimationFrame(e=>{p=e})}),m.isFull){const e=m.values();if((0,be.b)(e.at(-1),e.at(-3))&&!(0,be.b)(e.at(-1),e.at(-2)))return}const e=f();e&&m.push(e.flipped)});let h=new ce({x:0,y:0,width:0,height:0});function f(){if(v=!1,requestAnimationFrame(()=>v=!0),!e.target.value||!e.contentEl.value)return;(Array.isArray(e.target.value)||e.target.value.offsetParent||e.target.value.getClientRects().length)&&(h=de(e.target.value));const l=Le(e.contentEl.value,e.isRtl.value),i=fe(e.contentEl.value),p=Number(t.viewportMargin);i.length||(i.push(document.documentElement),e.contentEl.value.style.top&&e.contentEl.value.style.left||(l.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),l.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const m=i.reduce((e,t)=>{const o=ve(t);return e?new ce({x:Math.max(e.left,o.left),y:Math.max(e.top,o.top),width:Math.min(e.right,o.right)-Math.max(e.left,o.left),height:Math.min(e.bottom,o.bottom)-Math.max(e.top,o.top)}):o},void 0);t.stickToTarget?(m.x+=Math.min(p,h.x),m.y+=Math.min(p,h.y),m.width=Math.max(m.width-2*p,h.x+h.width-p),m.height=Math.max(m.height-2*p,h.y+h.height-p)):(m.x+=p,m.y+=p,m.width-=2*p,m.height-=2*p);let k={anchor:a.value,origin:n.value};function b(e){const t=new ce(l),o=re(e.anchor,h),i=re(e.origin,t);let{x:a,y:n}=se(o,i);switch(e.anchor.side){case"top":n-=d.value[0];break;case"bottom":n+=d.value[0];break;case"left":a-=d.value[0];break;case"right":a+=d.value[0];break}switch(e.anchor.align){case"top":n-=d.value[1];break;case"bottom":n+=d.value[1];break;case"left":a-=d.value[1];break;case"right":a+=d.value[1];break}t.x+=a,t.y+=n,t.width=Math.min(t.width,c.value),t.height=Math.min(t.height,u.value);const s=ue(t,m);return{overflows:s,x:a,y:n}}let f=0,g=0;const y={x:0,y:0},_={x:!1,y:!1};let w=-1;while(1){if(w++>10){(0,_e.yA)("Infinite loop detected in connectedLocationStrategy");break}const{x:e,y:t,overflows:o}=b(k);f+=e,g+=t,l.x+=e,l.y+=t;{const e=q(k.anchor),t=o.x.before||o.x.after,l=o.y.before||o.y.after;let i=!1;if(["x","y"].forEach(a=>{if("x"===a&&t&&!_.x||"y"===a&&l&&!_.y){const t={anchor:{...k.anchor},origin:{...k.origin}},l="x"===a?"y"===e?M:j:"y"===e?j:M;t.anchor=l(t.anchor),t.origin=l(t.origin);const{overflows:n}=b(t);(n[a].before<=o[a].before&&n[a].after<=o[a].after||n[a].before+n[a].after<(o[a].before+o[a].after)/2)&&(k=t,i=_[a]=!0)}}),i)continue}o.x.before&&(f+=o.x.before,l.x+=o.x.before),o.x.after&&(f-=o.x.after,l.x-=o.x.after),o.y.before&&(g+=o.y.before,l.y+=o.y.before),o.y.after&&(g-=o.y.after,l.y-=o.y.after);{const e=ue(l,m);y.x=m.width-e.x.before-e.x.after,y.y=m.height-e.y.before-e.y.after,f+=e.x.before,l.x+=e.x.before,g+=e.y.before,l.y+=e.y.before}break}const C=q(k.anchor);return Object.assign(o.value,{"--v-overlay-anchor-origin":`${k.anchor.side} ${k.anchor.align}`,transformOrigin:`${k.origin.side} ${k.origin.align}`,top:(0,F.Dg)(Ie(g)),left:e.isRtl.value?void 0:(0,F.Dg)(Ie(f)),right:e.isRtl.value?(0,F.Dg)(Ie(-f)):void 0,minWidth:(0,F.Dg)("y"===C?Math.min(s.value,h.width):s.value),maxWidth:(0,F.Dg)(Se((0,F.qE)(y.x,s.value===1/0?0:s.value,c.value))),maxHeight:(0,F.Dg)(Se((0,F.qE)(y.y,r.value===1/0?0:r.value,u.value)))}),{available:y,contentBox:l,flipped:_}}return(0,l.wB)(e.target,(e,t)=>{t&&!Array.isArray(t)&&b.unobserve(t),Array.isArray(e)?(0,be.b)(e,t)||f():e&&b.observe(e)},{immediate:!0}),(0,l.wB)(e.contentEl,(e,t)=>{t&&b.unobserve(t),e&&b.observe(e)},{immediate:!0}),(0,k.jr)(()=>{b.disconnect()}),(0,l.wB)(()=>[a.value,n.value,t.offset,t.minWidth,t.minHeight,t.maxWidth,t.maxHeight],()=>f()),(0,l.dY)(()=>{const e=f();if(!e)return;const{available:t,contentBox:o}=e;o.height>t.y&&requestAnimationFrame(()=>{f(),requestAnimationFrame(()=>{f()})})}),{updateLocation:f}}function Ie(e){return Math.round(e*devicePixelRatio)/devicePixelRatio}function Se(e){return Math.ceil(e*devicePixelRatio)/devicePixelRatio}o(7588),o(7642),o(8004),o(3853),o(5876),o(2475),o(5024),o(1698);let Be=!0;const Fe=[];function Ae(e){!Be||Fe.length?(Fe.push(e),Oe()):(Be=!1,e(),Oe())}let De=-1;function Oe(){cancelAnimationFrame(De),De=requestAnimationFrame(()=>{const e=Fe.shift();e&&e(),Fe.length?Oe():Be=!0})}const Re={none:null,close:We,block:Xe,reposition:Ve},$e=(0,b.j)({scrollStrategy:{type:[String,Function],default:"block",validator:e=>"function"===typeof e||e in Re}},"VOverlay-scroll-strategies");function Pe(e,t){if(!T.ZK)return;let o;(0,l.nT)(async()=>{o?.stop(),t.isActive.value&&e.scrollStrategy&&(o=(0,k.uY)(),await new Promise(e=>setTimeout(e)),o.active&&o.run(()=>{"function"===typeof e.scrollStrategy?e.scrollStrategy(t,e,o):Re[e.scrollStrategy]?.(t,e,o)}))}),(0,k.jr)(()=>{o?.stop()})}function We(e){function t(t){e.isActive.value=!1}ze(Ne(e.target.value,e.contentEl.value),t)}function Xe(e,t){const o=e.root.value?.offsetParent,l=Ne(e.target.value,e.contentEl.value),i=[...new Set([...fe(l,t.contained?o:void 0),...fe(e.contentEl.value,t.contained?o:void 0)])].filter(e=>!e.classList.contains("v-overlay-scroll-blocked")),a=window.innerWidth-document.documentElement.offsetWidth,n=(e=>ge(e)&&e)(o||document.documentElement);n&&e.root.value.classList.add("v-overlay--scroll-blocked"),i.forEach((e,t)=>{e.style.setProperty("--v-body-scroll-x",(0,F.Dg)(-e.scrollLeft)),e.style.setProperty("--v-body-scroll-y",(0,F.Dg)(-e.scrollTop)),e!==document.documentElement&&e.style.setProperty("--v-scrollbar-offset",(0,F.Dg)(a)),e.classList.add("v-overlay-scroll-blocked")}),(0,k.jr)(()=>{i.forEach((e,t)=>{const o=parseFloat(e.style.getPropertyValue("--v-body-scroll-x")),l=parseFloat(e.style.getPropertyValue("--v-body-scroll-y")),i=e.style.scrollBehavior;e.style.scrollBehavior="auto",e.style.removeProperty("--v-body-scroll-x"),e.style.removeProperty("--v-body-scroll-y"),e.style.removeProperty("--v-scrollbar-offset"),e.classList.remove("v-overlay-scroll-blocked"),e.scrollLeft=-o,e.scrollTop=-l,e.style.scrollBehavior=i}),n&&e.root.value.classList.remove("v-overlay--scroll-blocked")})}function Ve(e,t,o){let l=!1,i=-1,a=-1;function n(t){Ae(()=>{const o=performance.now();e.updateLocation.value?.(t);const i=performance.now()-o;l=i/(1e3/60)>2})}a=("undefined"===typeof requestIdleCallback?e=>e():requestIdleCallback)(()=>{o.run(()=>{ze(Ne(e.target.value,e.contentEl.value),e=>{l?(cancelAnimationFrame(i),i=requestAnimationFrame(()=>{i=requestAnimationFrame(()=>{n(e)})})):n(e)})})}),(0,k.jr)(()=>{"undefined"!==typeof cancelIdleCallback&&cancelIdleCallback(a),cancelAnimationFrame(i)})}function Ne(e,t){return Array.isArray(e)?document.elementsFromPoint(...e).find(e=>!t?.contains(e)):e??t}function ze(e,t){const o=[document,...fe(e)];o.forEach(e=>{e.addEventListener("scroll",t,{passive:!0})}),(0,k.jr)(()=>{o.forEach(e=>{e.removeEventListener("scroll",t)})})}const Ke=Symbol.for("vuetify:v-menu"),je=(0,b.j)({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function Me(e,t){let o=()=>{};function l(l,i){o?.();const a=l?e.openDelay:e.closeDelay,n=Math.max(i?.minDelay??0,Number(a??0));return new Promise(e=>{o=(0,F.v6)(n,()=>{t?.(l),e(l)})})}function i(){return l(!0)}function a(e){return l(!1,e)}return{clearDelay:o,runOpenDelay:i,runCloseDelay:a}}o(805),o(3525);const Ue=new WeakMap;function qe(e,t){Object.keys(t).forEach(o=>{if((0,F.Mp)(o)){const l=(0,F.eq)(o),i=Ue.get(e);if(null==t[o])i?.forEach(t=>{const[o,a]=t;o===l&&(e.removeEventListener(l,a),i.delete(t))});else if(!i||![...i]?.some(e=>e[0]===l&&e[1]===t[o])){e.addEventListener(l,t[o]);const a=i||new Set;a.add([l,t[o]]),Ue.has(e)||Ue.set(e,a)}}else null==t[o]?e.removeAttribute(o):e.setAttribute(o,t[o])})}function He(e,t){Object.keys(t).forEach(t=>{if((0,F.Mp)(t)){const o=(0,F.eq)(t),l=Ue.get(e);l?.forEach(t=>{const[i,a]=t;i===o&&(e.removeEventListener(o,a),l.delete(t))})}else e.removeAttribute(t)})}const Ye=(0,b.j)({target:[String,Object],activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...je()},"VOverlay-activator");function Qe(e,t){let{isActive:o,isTop:i,contentEl:a}=t;const n=(0,$.n)("useActivator"),s=(0,k.KR)();let r=!1,c=!1,u=!0;const d=(0,l.EW)(()=>e.openOnFocus||null==e.openOnFocus&&e.openOnHover),v=(0,l.EW)(()=>e.openOnClick||null==e.openOnClick&&!e.openOnHover&&!d.value),{runOpenDelay:p,runCloseDelay:m}=Me(e,t=>{t!==(e.openOnHover&&r||d.value&&c)||e.openOnHover&&o.value&&!i.value||(o.value!==t&&(u=!0),o.value=t)}),b=(0,k.KR)(),h={onClick:e=>{e.stopPropagation(),s.value=e.currentTarget||e.target,o.value||(b.value=[e.clientX,e.clientY]),o.value=!o.value},onMouseenter:e=>{r=!0,s.value=e.currentTarget||e.target,p()},onMouseleave:e=>{r=!1,m()},onFocus:e=>{!1!==(0,F.B5)(e.target,":focus-visible")&&(c=!0,e.stopPropagation(),s.value=e.currentTarget||e.target,p())},onBlur:e=>{c=!1,e.stopPropagation(),m({minDelay:1})}},f=(0,l.EW)(()=>{const t={};return v.value&&(t.onClick=h.onClick),e.openOnHover&&(t.onMouseenter=h.onMouseenter,t.onMouseleave=h.onMouseleave),d.value&&(t.onFocus=h.onFocus,t.onBlur=h.onBlur),t}),g=(0,l.EW)(()=>{const t={};if(e.openOnHover&&(t.onMouseenter=()=>{r=!0,p()},t.onMouseleave=()=>{r=!1,m()}),d.value&&(t.onFocusin=e=>{e.target.matches(":focus-visible")&&(c=!0,p())},t.onFocusout=()=>{c=!1,m({minDelay:1})}),e.closeOnContentClick){const e=(0,l.WQ)(Ke,null);t.onClick=()=>{o.value=!1,e?.closeParents()}}return t}),y=(0,l.EW)(()=>{const t={};return e.openOnHover&&(t.onMouseenter=()=>{u&&(r=!0,u=!1,p())},t.onMouseleave=()=>{r=!1,m()}),t});(0,l.wB)(i,t=>{!t||(!e.openOnHover||r||d.value&&c)&&(!d.value||c||e.openOnHover&&r)||a.value?.contains(document.activeElement)||(o.value=!1)}),(0,l.wB)(o,e=>{e||setTimeout(()=>{b.value=void 0})},{flush:"post"});const _=(0,F.m)();(0,l.nT)(()=>{_.value&&(0,l.dY)(()=>{s.value=_.el})});const w=(0,F.m)(),C=(0,l.EW)(()=>"cursor"===e.target&&b.value?b.value:w.value?w.el:Ge(e.target,n)||s.value),E=(0,l.EW)(()=>Array.isArray(C.value)?void 0:C.value);let x;return(0,l.wB)(()=>!!e.activator,t=>{t&&T.ZK?(x=(0,k.uY)(),x.run(()=>{Je(e,n,{activatorEl:s,activatorEvents:f})})):x&&x.stop()},{flush:"post",immediate:!0}),(0,k.jr)(()=>{x?.stop()}),{activatorEl:s,activatorRef:_,target:C,targetEl:E,targetRef:w,activatorEvents:f,contentEvents:g,scrimEvents:y}}function Je(e,t,o){let{activatorEl:i,activatorEvents:a}=o;function n(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r(),o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.activatorProps;t&&qe(t,(0,l.v6)(a.value,o))}function s(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r(),o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.activatorProps;t&&He(t,(0,l.v6)(a.value,o))}function r(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.activator;const l=Ge(o,t);return i.value=l?.nodeType===Node.ELEMENT_NODE?l:void 0,i.value}(0,l.wB)(()=>e.activator,(e,t)=>{if(t&&e!==t){const e=r(t);e&&s(e)}e&&(0,l.dY)(()=>n())},{immediate:!0}),(0,l.wB)(()=>e.activatorProps,()=>{n()}),(0,k.jr)(()=>{s()})}function Ge(e,t){if(!e)return;let o;if("parent"===e){let e=t?.proxy?.$el?.parentNode;while(e?.hasAttribute("data-no-activator"))e=e.parentNode;o=e}else o="string"===typeof e?document.querySelector(e):"$el"in e?e.$el:e;return o}o(2489),o(7254),o(7036);const Ze=(0,b.j)({retainFocus:Boolean,captureFocus:Boolean,disableInitialFocus:Boolean},"focusTrap"),et=new Map;let tt=0;function ot(e){const t=document.activeElement;if("Tab"!==e.key||!t)return;const o=Array.from(et.values()).filter(e=>{let{isActive:o,contentEl:l}=e;return o.value&&l.value?.contains(t)}).map(e=>e.contentEl.value);let l,i=t.parentElement;while(i){if(o.includes(i)){l=i;break}i=i.parentElement}if(!l)return;const a=(0,F.OW)(l).filter(e=>e.tabIndex>=0);if(!a.length)return;const n=document.activeElement;if(1===a.length&&a[0].classList.contains("v-list")&&a[0].contains(n))return void e.preventDefault();const s=a[0],r=a[a.length-1];e.shiftKey&&(n===s||s.classList.contains("v-list")&&s.contains(n))&&(e.preventDefault(),r.focus()),!e.shiftKey&&(n===r||r.classList.contains("v-list")&&r.contains(n))&&(e.preventDefault(),s.focus())}function lt(e,t){let{isActive:o,localTop:i,activatorEl:a,contentEl:n}=t;const s=Symbol("trap");let r=!1,c=-1;async function u(){r=!0,c=window.setTimeout(()=>{r=!1},100)}async function d(e){const t=e.relatedTarget,a=e.target;if(document.removeEventListener("pointerdown",u),document.removeEventListener("keydown",v),await(0,l.dY)(),o.value&&!r&&t!==a&&n.value&&(0,k.BA)(i)&&![document,n.value].includes(a)&&!n.value.contains(a)){const e=(0,F.OW)(n.value);e[0]?.focus()}}function v(e){if("Tab"===e.key&&(document.removeEventListener("keydown",v),o.value&&n.value&&e.target&&!n.value.contains(e.target))){const t=(0,F.OW)(document.documentElement);if(e.shiftKey&&e.target===t.at(0)||!e.shiftKey&&e.target===t.at(-1)){const t=(0,F.OW)(n.value);t.length>0&&(e.preventDefault(),t[0].focus())}}}const p=(0,k.lW)(()=>o.value&&e.captureFocus&&!e.disableInitialFocus);T.ZK&&((0,l.wB)(()=>e.retainFocus,e=>{e?et.set(s,{isActive:o,contentEl:n}):et.delete(s)},{immediate:!0}),(0,l.wB)(p,e=>{e?(document.addEventListener("pointerdown",u),document.addEventListener("focusin",d,{once:!0}),document.addEventListener("keydown",v)):(document.removeEventListener("pointerdown",u),document.removeEventListener("focusin",d),document.removeEventListener("keydown",v))},{immediate:!0}),tt++<1&&document.addEventListener("keydown",ot)),(0,k.jr)(()=>{et.delete(s),clearTimeout(c),document.removeEventListener("pointerdown",u),document.removeEventListener("focusin",d),document.removeEventListener("keydown",v),--tt<1&&document.removeEventListener("keydown",ot)})}var it=o(2834);function at(){if(!T.ZK)return(0,k.IJ)(!1);const{ssr:e}=(0,it._F)();if(e){const e=(0,k.IJ)(!1);return(0,l.sV)(()=>{e.value=!0}),e}return(0,k.IJ)(!0)}const nt=(0,b.j)({eager:Boolean},"lazy");function st(e,t){const o=(0,k.IJ)(!1),i=(0,k.lW)(()=>o.value||e.eager||t.value);function a(){e.eager||(o.value=!1)}return(0,l.wB)(t,()=>o.value=!0),{isBooted:o,hasContent:i,onAfterLeave:a}}var rt=o(8432);function ct(){const e=(0,$.n)("useScopeId"),t=e.vnode.scopeId;return{scopeId:t?{[t]:""}:void 0}}const ut=Symbol.for("vuetify:stack"),dt=(0,k.Kh)([]);function vt(e,t,o){const i=(0,$.n)("useStack"),a=!o,n=(0,l.WQ)(ut,void 0),s=(0,k.Kh)({activeChildren:new Set});(0,l.Gt)(ut,s);const r=(0,k.IJ)(Number((0,k.BA)(t)));(0,ae.Y)(e,()=>{const e=dt.at(-1)?.[1];r.value=e?e+10:Number((0,k.BA)(t)),a&&dt.push([i.uid,r.value]),n?.activeChildren.add(i.uid),(0,k.jr)(()=>{if(a){const e=(0,k.ux)(dt).findIndex(e=>e[0]===i.uid);dt.splice(e,1)}n?.activeChildren.delete(i.uid)})});const c=(0,k.IJ)(!0);a&&(0,l.nT)(()=>{const e=dt.at(-1)?.[0]===i.uid;setTimeout(()=>c.value=e)});const u=(0,k.lW)(()=>!s.activeChildren.size);return{globalTop:(0,k.tB)(c),localTop:u,stackStyles:(0,k.lW)(()=>({zIndex:r.value}))}}function pt(e){const t=(0,l.EW)(()=>{const t=e();if(!0===t||!T.ZK)return;const o=!1===t?document.body:"string"===typeof t?document.querySelector(t):t;if(null==o)return void(0,l.R8)(`Unable to locate target ${t}`);let i=[...o.children].find(e=>e.matches(".v-overlay-container"));return i||(i=document.createElement("div"),i.className="v-overlay-container",o.appendChild(i)),i});return{teleportTarget:t}}var mt=o(5937);o(3579);function kt(e){if("function"!==typeof e.getRootNode){while(e.parentNode)e=e.parentNode;return e!==document?null:document}const t=e.getRootNode();return t!==document&&t.getRootNode({composed:!0})!==document?null:t}function bt(){return!0}function ht(e,t,o){if(!e||!1===ft(e,o))return!1;const l=kt(t);if("undefined"!==typeof ShadowRoot&&l instanceof ShadowRoot&&l.host===e.target)return!1;const i=("object"===typeof o.value&&o.value.include||(()=>[]))();return i.push(t),!i.some(t=>t?.contains(e.target))}function ft(e,t){const o="object"===typeof t.value&&t.value.closeConditional||bt;return o(e)}function gt(e,t,o){const l="function"===typeof o.value?o.value:o.value.handler;e.shadowTarget=e.target,t._clickOutside.lastMousedownWasOutside&&ht(e,t,o)&&setTimeout(()=>{ft(e,o)&&l&&l(e)},0)}function yt(e,t){const o=kt(e);t(document),"undefined"!==typeof ShadowRoot&&o instanceof ShadowRoot&&t(o)}const _t={mounted(e,t){const o=o=>gt(o,e,t),l=o=>{e._clickOutside.lastMousedownWasOutside=ht(o,e,t)};yt(e,e=>{e.addEventListener("click",o,!0),e.addEventListener("mousedown",l,!0)}),e._clickOutside||(e._clickOutside={lastMousedownWasOutside:!1}),e._clickOutside[t.instance.$.uid]={onClick:o,onMousedown:l}},beforeUnmount(e,t){e._clickOutside&&(yt(e,o=>{if(!o||!e._clickOutside?.[t.instance.$.uid])return;const{onClick:l,onMousedown:i}=e._clickOutside[t.instance.$.uid];o.removeEventListener("click",l,!0),o.removeEventListener("mousedown",i,!0)}),delete e._clickOutside[t.instance.$.uid])}};var wt=_t,Ct=o(1101);function Et(e){const{modelValue:t,color:o,...a}=e;return(0,l.bF)(i.eB,{name:"fade-transition",appear:!0},{default:()=>[e.modelValue&&(0,l.Lk)("div",(0,l.v6)({class:["v-overlay__scrim",e.color.backgroundColorClasses.value],style:e.color.backgroundColorStyles.value},a),null)]})}const xt=(0,b.j)({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,opacity:[Number,String],noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...Ye(),...(0,s.u)(),...(0,O.X)(),...nt(),...Ce(),...$e(),...Ze(),...(0,p.yx)(),...(0,mt.m)()},"VOverlay"),Lt=(0,h.RW)()({name:"VOverlay",directives:{vClickOutside:wt},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...(0,F.cJ)(xt(),["disableInitialFocus"])},emits:{"click:outside":e=>!0,"update:modelValue":e=>!0,keydown:e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,t){let{slots:o,attrs:a,emit:n}=t;const s=(0,$.n)("VOverlay"),r=(0,k.KR)(),c=(0,k.KR)(),u=(0,k.KR)(),d=(0,rt.q)(e,"modelValue"),v=(0,l.EW)({get:()=>d.value,set:t=>{t&&e.disabled||(d.value=t)}}),{themeClasses:m}=(0,p.NX)(e),{rtlClasses:b,isRtl:h}=(0,X.IA)(),{hasContent:g,onAfterLeave:y}=st(e,v),_=(0,L.z6)(()=>"string"===typeof e.scrim?e.scrim:null),{globalTop:w,localTop:C,stackStyles:E}=vt(v,()=>e.zIndex,e._disableGlobalStack),{activatorEl:x,activatorRef:I,target:S,targetEl:B,targetRef:A,activatorEvents:D,contentEvents:R,scrimEvents:P}=Qe(e,{isActive:v,isTop:C,contentEl:u}),{teleportTarget:W}=pt(()=>{const t=e.attach||e.contained;if(t)return t;const o=x?.value?.getRootNode()||s.proxy?.$el?.getRootNode();return o instanceof ShadowRoot&&o}),{dimensionStyles:V}=(0,O.S)(e),N=at(),{scopeId:z}=ct();(0,l.wB)(()=>e.disabled,e=>{e&&(v.value=!1)});const{contentStyles:K,updateLocation:j}=Ee(e,{isRtl:h,contentEl:u,target:S,isActive:v});function M(t){n("click:outside",t),e.persistent?J():v.value=!1}function U(t){return v.value&&C.value&&(!e.scrim||t.target===c.value||t instanceof MouseEvent&&t.shadowTarget===c.value)}function q(t){"Escape"===t.key&&w.value&&(u.value?.contains(document.activeElement)||n("keydown",t),e.persistent?J():(v.value=!1,u.value?.contains(document.activeElement)&&x.value?.focus()))}function H(e){("Escape"!==e.key||w.value)&&n("keydown",e)}Pe(e,{root:r,contentEl:u,targetEl:B,target:S,isActive:v,updateLocation:j}),lt(e,{isActive:v,localTop:C,contentEl:u,activatorEl:x}),T.ZK&&(0,l.wB)(v,e=>{e?window.addEventListener("keydown",q):window.removeEventListener("keydown",q)},{immediate:!0}),(0,l.xo)(()=>{T.ZK&&window.removeEventListener("keydown",q)});const Y=(0,ee.rd)();(0,ae.Y)(()=>e.closeOnBack,()=>{(0,ee.zE)(Y,t=>{w.value&&v.value?(t(!1),e.persistent?J():v.value=!1):t()})});const Q=(0,k.KR)();function J(){e.noClickAnimation||u.value&&me(u.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:Ct.B2})}function G(){n("afterEnter")}function Z(){y(),n("afterLeave")}return(0,l.wB)(()=>v.value&&(e.absolute||e.contained)&&null==W.value,e=>{if(e){const e=he(r.value);e&&e!==document.scrollingElement&&(Q.value=e.scrollTop)}}),(0,f.C)(()=>(0,l.Lk)(l.FK,null,[o.activator?.({isActive:v.value,targetRef:A,props:(0,l.v6)({ref:I},D.value,e.activatorProps)}),N.value&&g.value&&(0,l.bF)(l.Im,{disabled:!W.value,to:W.value},{default:()=>[(0,l.Lk)("div",(0,l.v6)({class:["v-overlay",{"v-overlay--absolute":e.absolute||e.contained,"v-overlay--active":v.value,"v-overlay--contained":e.contained},m.value,b.value,e.class],style:[E.value,{"--v-overlay-opacity":e.opacity,top:(0,F.Dg)(Q.value)},e.style],ref:r,onKeydown:H},z,a),[(0,l.bF)(Et,(0,l.v6)({color:_,modelValue:v.value&&!!e.scrim,ref:c},P.value),null),(0,l.bF)(mt.M,{appear:!0,persisted:!0,transition:e.transition,target:S.value,onAfterEnter:G,onAfterLeave:Z},{default:()=>[(0,l.bo)((0,l.Lk)("div",(0,l.v6)({ref:u,class:["v-overlay__content",e.contentClass],style:[V.value,K.value]},R.value,e.contentProps),[o.default?.({isActive:v})]),[[i.aG,v.value],[wt,{handler:M,closeConditional:U,include:()=>[x.value]}]])]})])]})])),{activatorEl:x,scrimEl:c,target:S,animateClick:J,contentEl:u,rootEl:r,globalTop:w,localTop:C,updateLocation:j}}}),Tt=(0,b.j)({chunkCount:{type:[Number,String],default:null},chunkWidth:{type:[Number,String],default:null},chunkGap:{type:[Number,String],default:4}},"chunks");function It(e,t){const o=(0,k.lW)(()=>!!e.chunkCount||!!e.chunkWidth),i=(0,l.EW)(()=>{const o=(0,k.BA)(t);if(!o)return 0;if(!e.chunkCount)return Number(e.chunkWidth);const l=Number(e.chunkCount),i=o-Number(e.chunkGap)*(l-1);return i/l}),a=(0,k.lW)(()=>Number(e.chunkGap)),n=(0,l.EW)(()=>{if(!o.value)return{};const e=(0,F.Dg)(a.value),t=(0,F.Dg)(i.value);return{maskRepeat:"repeat-x",maskImage:`linear-gradient(90deg, #000, #000 ${t}, transparent ${t}, transparent)`,maskSize:`calc(${t} + ${e}) 100%`}});function s(e){const o=(0,k.BA)(t);if(!o)return e;const l=100*a.value/o,n=100*(i.value+a.value)/o,s=Math.floor((e+l)/n);return(0,F.qE)(0,s*n-l/2,100)}return{hasChunks:o,chunksMaskStyles:n,snapValueToChunk:s}}const St=(0,b.j)({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},bufferColor:String,bufferOpacity:[Number,String],clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},opacity:[Number,String],reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...Tt(),...(0,s.u)(),...Y({location:"top"}),...(0,d.S)(),...(0,v.X)(),...(0,p.yx)()},"VProgressLinear"),Bt=(0,h.RW)()({name:"VProgressLinear",props:St(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:o}=t;const n=(0,k.KR)(),s=(0,rt.q)(e,"modelValue"),{isRtl:r,rtlClasses:c}=(0,X.IA)(),{themeClasses:u}=(0,p.NX)(e),{locationStyles:v}=Q(e),{textColorClasses:m,textColorStyles:b}=(0,L.aH)(()=>e.color),{backgroundColorClasses:h,backgroundColorStyles:g}=(0,L.z6)(()=>e.bgColor||e.color),{backgroundColorClasses:y,backgroundColorStyles:_}=(0,L.z6)(()=>e.bufferColor||e.bgColor||e.color),{backgroundColorClasses:w,backgroundColorStyles:C}=(0,L.z6)(()=>e.color),{roundedClasses:E}=(0,d.v)(e),{intersectionRef:x,isIntersecting:T}=I(),B=(0,l.EW)(()=>parseFloat(e.max)),A=(0,l.EW)(()=>parseFloat(e.height)),D=(0,l.EW)(()=>(0,F.qE)(parseFloat(e.bufferValue)/B.value*100,0,100)),O=(0,l.EW)(()=>(0,F.qE)(parseFloat(s.value)/B.value*100,0,100)),R=(0,l.EW)(()=>r.value!==e.reverse),$=(0,l.EW)(()=>e.indeterminate?"fade-transition":"slide-x-transition"),P=(0,k.IJ)(0),{hasChunks:W,chunksMaskStyles:V,snapValueToChunk:N}=It(e,P);(0,ae.Y)(W,()=>{const{resizeRef:e}=(0,S.w)(e=>P.value=e[0].contentRect.width);(0,l.nT)(()=>e.value=n.value)});const z=(0,l.EW)(()=>W.value?N(D.value):D.value),K=(0,l.EW)(()=>W.value?N(O.value):O.value);function j(e){if(!x.value)return;const{left:t,right:o,width:l}=x.value.getBoundingClientRect(),i=R.value?l-e.clientX+(o-l):e.clientX-t;s.value=Math.round(i/l*B.value)}return(0,l.nT)(()=>{x.value=n.value}),(0,f.C)(()=>(0,l.bF)(e.tag,{ref:n,class:(0,a.C4)(["v-progress-linear",{"v-progress-linear--absolute":e.absolute,"v-progress-linear--active":e.active&&T.value,"v-progress-linear--reverse":R.value,"v-progress-linear--rounded":e.rounded,"v-progress-linear--rounded-bar":e.roundedBar,"v-progress-linear--striped":e.striped,"v-progress-linear--clickable":e.clickable},E.value,u.value,c.value,e.class]),style:(0,a.Tr)([{bottom:"bottom"===e.location?0:void 0,top:"top"===e.location?0:void 0,height:e.active?(0,F.Dg)(A.value):0,"--v-progress-linear-height":(0,F.Dg)(A.value),...e.absolute?v.value:{}},V.value,e.style]),role:"progressbar","aria-hidden":e.active?"false":"true","aria-valuemin":"0","aria-valuemax":e.max,"aria-valuenow":e.indeterminate?void 0:Math.min(parseFloat(s.value),B.value),onClick:e.clickable&&j},{default:()=>[e.stream&&(0,l.Lk)("div",{key:"stream",class:(0,a.C4)(["v-progress-linear__stream",m.value]),style:{...b.value,[R.value?"left":"right"]:(0,F.Dg)(-A.value),borderTop:`${(0,F.Dg)(A.value/2)} dotted`,opacity:parseFloat(e.bufferOpacity),top:`calc(50% - ${(0,F.Dg)(A.value/4)})`,width:(0,F.Dg)(100-D.value,"%"),"--v-progress-linear-stream-to":(0,F.Dg)(A.value*(R.value?1:-1))}},null),(0,l.Lk)("div",{class:(0,a.C4)(["v-progress-linear__background",h.value]),style:(0,a.Tr)([g.value,{opacity:parseFloat(e.bgOpacity),width:e.stream?0:void 0}])},null),(0,l.Lk)("div",{class:(0,a.C4)(["v-progress-linear__buffer",y.value]),style:(0,a.Tr)([_.value,{opacity:parseFloat(e.bufferOpacity),width:(0,F.Dg)(z.value,"%")}])},null),(0,l.bF)(i.eB,{name:$.value},{default:()=>[e.indeterminate?(0,l.Lk)("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(e=>(0,l.Lk)("div",{key:e,class:(0,a.C4)(["v-progress-linear__indeterminate",e,w.value]),style:(0,a.Tr)(C.value)},null))]):(0,l.Lk)("div",{class:(0,a.C4)(["v-progress-linear__determinate",w.value]),style:(0,a.Tr)([C.value,{width:(0,F.Dg)(K.value,"%")}])},null)]}),o.default&&(0,l.Lk)("div",{class:"v-progress-linear__content"},[o.default({value:O.value,buffer:D.value})])]})),{}}});var Ft=o(9592);const At=Symbol("Forwarded refs");function Dt(e,t){let o=e;while(o){const e=Reflect.getOwnPropertyDescriptor(o,t);if(e)return e;o=Object.getPrototypeOf(o)}}function Ot(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),l=1;l<t;l++)o[l-1]=arguments[l];return e[At]=o,new Proxy(e,{get(e,t){if(Reflect.has(e,t))return Reflect.get(e,t);if("symbol"!==typeof t&&!t.startsWith("$")&&!t.startsWith("__"))for(const l of o)if(l.value&&Reflect.has(l.value,t)){const e=Reflect.get(l.value,t);return"function"===typeof e?e.bind(l.value):e}},has(e,t){if(Reflect.has(e,t))return!0;if("symbol"===typeof t||t.startsWith("$")||t.startsWith("__"))return!1;for(const l of o)if(l.value&&Reflect.has(l.value,t))return!0;return!1},set(e,t,l){if(Reflect.has(e,t))return Reflect.set(e,t,l);if("symbol"===typeof t||t.startsWith("$")||t.startsWith("__"))return!1;for(const i of o)if(i.value&&Reflect.has(i.value,t))return Reflect.set(i.value,t,l);return!1},getOwnPropertyDescriptor(e,t){const l=Reflect.getOwnPropertyDescriptor(e,t);if(l)return l;if("symbol"!==typeof t&&!t.startsWith("$")&&!t.startsWith("__")){for(const e of o){if(!e.value)continue;const o=Dt(e.value,t)??("_"in e.value?Dt(e.value._?.setupState,t):void 0);if(o)return o}for(const e of o){const o=e.value&&e.value[At];if(!o)continue;const l=o.slice();while(l.length){const e=l.shift(),o=Dt(e.value,t);if(o)return o;const i=e.value&&e.value[At];i&&l.push(...i)}}}}})}function Rt(e){const t=(0,k.IJ)(e());let o=-1;function i(){clearInterval(o)}function a(){i(),(0,l.dY)(()=>t.value=e())}function n(l){const a=l?getComputedStyle(l):{transitionDuration:.2},n=1e3*parseFloat(a.transitionDuration)||200;if(i(),t.value<=0)return;const s=performance.now();o=window.setInterval(()=>{const o=performance.now()-s+n;t.value=Math.max(e()-o,0),t.value<=0&&i()},n)}return(0,k.jr)(i),{clear:i,time:t,start:n,reset:a}}const $t=(0,b.j)({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...Y({location:"bottom"}),...G(),...(0,d.S)(),...(0,m.gI)(),...(0,p.yx)(),...(0,F.cJ)(xt({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","retainFocus","captureFocus","disableInitialFocus","scrim","scrollStrategy","stickToTarget","viewportMargin"])},"VSnackbar"),Pt=(0,h.RW)()({name:"VSnackbar",props:$t(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:o}=t;const i=(0,rt.q)(e,"modelValue"),{positionClasses:a}=Z(e),{scopeId:n}=ct(),{themeClasses:s}=(0,p.NX)(e),{colorClasses:r,colorStyles:c,variantClasses:u}=(0,m.rn)(e),{roundedClasses:v}=(0,d.v)(e),b=Rt(()=>Number(e.timeout)),h=(0,k.KR)(),g=(0,k.KR)(),y=(0,k.IJ)(!1),_=(0,k.IJ)(0),w=(0,k.KR)(),C=(0,l.WQ)(Ft.aF,void 0);(0,ae.Y)(()=>!!C,()=>{const e=(0,Ft.gK)();(0,l.nT)(()=>{w.value=e.mainStyles.value})}),(0,l.wB)(i,L),(0,l.wB)(()=>e.timeout,L),(0,l.sV)(()=>{i.value&&L()});let x=-1;function L(){b.reset(),window.clearTimeout(x);const t=Number(e.timeout);if(!i.value||-1===t)return;const o=(0,F._p)(g.value);b.start(o),x=window.setTimeout(()=>{i.value=!1},t)}function T(){b.reset(),window.clearTimeout(x)}function I(){y.value=!0,T()}function S(){y.value=!1,L()}function B(e){_.value=e.touches[0].clientY}function A(e){Math.abs(_.value-e.changedTouches[0].clientY)>50&&(i.value=!1)}function D(){y.value&&S()}const O=(0,l.EW)(()=>e.location.split(" ").reduce((e,t)=>(e[`v-snackbar--${t}`]=!0,e),{}));return(0,f.C)(()=>{const t=Lt.filterProps(e),d=!!(o.default||o.text||e.text);return(0,l.bF)(Lt,(0,l.v6)({ref:h,class:["v-snackbar",{"v-snackbar--active":i.value,"v-snackbar--multi-line":e.multiLine&&!e.vertical,"v-snackbar--timer":!!e.timer,"v-snackbar--vertical":e.vertical},O.value,a.value,e.class],style:[w.value,e.style]},t,{modelValue:i.value,"onUpdate:modelValue":e=>i.value=e,contentProps:(0,l.v6)({class:["v-snackbar__wrapper",s.value,r.value,v.value,u.value],style:[c.value],onPointerenter:I,onPointerleave:S},t.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:B,onTouchend:A,onAfterLeave:D},n),{default:()=>[(0,m.wN)(!1,"v-snackbar"),e.timer&&!y.value&&(0,l.Lk)("div",{key:"timer",class:"v-snackbar__timer"},[(0,l.bF)(Bt,{ref:g,color:"string"===typeof e.timer?e.timer:"info",max:e.timeout,modelValue:b.time.value},null)]),d&&(0,l.Lk)("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[o.text?.()??e.text,o.default?.()]),o.actions&&(0,l.bF)(E.K,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[(0,l.Lk)("div",{class:"v-snackbar__actions"},[o.actions({isActive:i})])]})],activator:o.activator})}),Ot({},h)}}),Wt={class:"page-detail"},Xt={class:"page-detail__header"},Vt={class:"page-detail__title-wrapper"},Nt={key:0,class:"page-detail__locked-banner"},zt={class:"page-detail__locked-content"},Kt={class:"page-detail__content"},jt={key:0,class:"page-detail__loading"};function Mt(e,t,o,n,s,r){const c=(0,l.g2)("EmptyState"),u=(0,l.g2)("BlockRenderer"),d=(0,l.g2)("BlockTypeSelector"),v=(0,l.g2)("ConfirmDialog");return(0,l.uX)(),(0,l.CE)("div",Wt,[(0,l.Lk)("div",Xt,[(0,l.Lk)("button",{class:"page-detail__back",onClick:t[0]||(t[0]=(...e)=>r.goBack&&r.goBack(...e))},[(0,l.bF)(x.w,{icon:"mdi-arrow-left",size:"24"})]),(0,l.Lk)("div",Vt,[s.editingTitle?(0,l.bo)(((0,l.uX)(),(0,l.CE)("input",{key:0,ref:"titleInput","onUpdate:modelValue":t[1]||(t[1]=e=>s.titleDraft=e),type:"text",class:"page-detail__title-input",maxlength:"200",onBlur:t[2]||(t[2]=(...e)=>r.saveTitle&&r.saveTitle(...e)),onKeyup:[t[3]||(t[3]=(0,i.jR)((...e)=>r.saveTitle&&r.saveTitle(...e),["enter"])),t[4]||(t[4]=(0,i.jR)((...e)=>r.cancelTitleEdit&&r.cancelTitleEdit(...e),["escape"]))]},null,544)),[[i.Jo,s.titleDraft]]):((0,l.uX)(),(0,l.CE)("h1",{key:1,class:"page-detail__title",onClick:t[5]||(t[5]=(...e)=>r.startTitleEdit&&r.startTitleEdit(...e))},(0,a.v_)(s.page?.title||"Загрузка..."),1))]),(0,l.Lk)("button",{class:"page-detail__delete",onClick:t[6]||(t[6]=e=>s.showDeleteConfirm=!0)},[(0,l.bF)(x.w,{icon:"mdi-delete-outline",size:"22"})])]),s.page?.blocks?.length>10&&s.limits&&!s.limits.canDeleteBlocks?((0,l.uX)(),(0,l.CE)("div",Nt,[(0,l.Lk)("div",zt,[(0,l.bF)(x.w,{icon:"mdi-lock",size:"20",class:"page-detail__locked-icon"}),t[14]||(t[14]=(0,l.Lk)("div",{class:"page-detail__locked-text"},[(0,l.Lk)("strong",null,"Структура страницы заморожена"),(0,l.Lk)("p",null,"Вы можете редактировать текст, но не добавлять/удалять блоки")],-1))]),(0,l.Lk)("button",{class:"page-detail__locked-cta",onClick:t[7]||(t[7]=(...e)=>r.goToPlans&&r.goToPlans(...e))},[t[15]||(t[15]=(0,l.eW)(" Продлить Premium ",-1)),(0,l.bF)(x.w,{icon:"mdi-arrow-right",size:"16"})])])):(0,l.Q3)("",!0),(0,l.Lk)("div",Kt,[s.loading?((0,l.uX)(),(0,l.CE)("div",jt,[((0,l.uX)(),(0,l.CE)(l.FK,null,(0,l.pI)(3,e=>(0,l.Lk)("div",{class:"page-detail__loading-block",key:e})),64))])):s.page?.blocks?.length?((0,l.uX)(),(0,l.Wv)(i.F,{key:2,name:"fade-up",tag:"div",class:"page-detail__blocks"},{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.page.blocks,(e,t)=>((0,l.uX)(),(0,l.Wv)(u,{key:e.id,block:e,"page-id":r.pageId,limits:s.limits,style:(0,a.Tr)({transitionDelay:.03*t+"s"}),onUpdate:e=>r.updateBlock(t,e),onDelete:o=>r.deleteBlock(e,t)},null,8,["block","page-id","limits","style","onUpdate","onDelete"]))),128))]),_:1})):((0,l.uX)(),(0,l.Wv)(c,{key:1,icon:"mdi-text-box-plus-outline",title:"Нет блоков",subtitle:"Добавьте первый блок в заметку","action-text":"Добавить блок",onAction:r.handleFabClick},null,8,["onAction"]))]),(0,l.Lk)("button",{class:(0,a.C4)(["page-detail__fab",{"page-detail__fab--disabled":s.limits&&!s.limits.canAddBlocks}]),onClick:t[8]||(t[8]=(...e)=>r.handleFabClick&&r.handleFabClick(...e))},[(0,l.bF)(x.w,{icon:s.limits&&!s.limits.canAddBlocks?"mdi-lock":"mdi-plus",size:"28"},null,8,["icon"])],2),(0,l.bF)(d,{show:s.showBlockSelector,"block-types":s.blockTypes,"is-premium":s.isPremium,limits:s.limits,onClose:t[9]||(t[9]=e=>s.showBlockSelector=!1),onSelect:r.createBlock},null,8,["show","block-types","is-premium","limits","onSelect"]),(0,l.bF)(v,{show:s.showDeleteConfirm,title:"Удалить страницу?",message:"Страница и все её блоки будут удалены безвозвратно.","confirm-text":"Удалить",danger:!0,onConfirm:r.deletePage,onCancel:t[10]||(t[10]=e=>s.showDeleteConfirm=!1)},null,8,["show","onConfirm"]),(0,l.bF)(v,{show:s.showBlockDeleteConfirm,title:"Удалить блок?",message:"Блок будет удален безвозвратно.","confirm-text":"Удалить",danger:!0,onConfirm:r.confirmDeleteBlock,onCancel:r.cancelDeleteBlock},null,8,["show","onConfirm","onCancel"]),(0,l.bF)(Pt,{modelValue:s.showToast,"onUpdate:modelValue":t[13]||(t[13]=e=>s.showToast=e),color:s.toastColor,timeout:5e3,location:"bottom"},{actions:(0,l.k6)(()=>[s.toastAction?((0,l.uX)(),(0,l.Wv)(ie,{key:0,variant:"text",onClick:t[11]||(t[11]=e=>{s.toastAction.onClick(),s.showToast=!1})},{default:(0,l.k6)(()=>[(0,l.eW)((0,a.v_)(s.toastAction.text),1)]),_:1})):(0,l.Q3)("",!0),(0,l.bF)(ie,{icon:"mdi-close",variant:"text",size:"small",onClick:t[12]||(t[12]=e=>s.showToast=!1)})]),default:(0,l.k6)(()=>[(0,l.eW)((0,a.v_)(s.toastMessage)+" ",1)]),_:1},8,["modelValue","color"])])}const Ut={class:"block-renderer__overlay-content"};function qt(e,t,o,n,s,r){return(0,l.uX)(),(0,l.CE)("div",{class:(0,a.C4)(["block-renderer",{"block-renderer--readonly":o.block.readOnly}])},[((0,l.uX)(),(0,l.Wv)((0,l.$y)(r.blockComponent),{block:o.block,"page-id":o.pageId,limits:o.limits,onUpdate:t[0]||(t[0]=t=>e.$emit("update",t)),onDelete:t[1]||(t[1]=t=>e.$emit("delete"))},null,40,["block","page-id","limits"])),o.block.readOnly?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"block-renderer__overlay",onClick:t[3]||(t[3]=(...e)=>r.goToPlans&&r.goToPlans(...e))},[(0,l.Lk)("div",Ut,[(0,l.bF)(x.w,{icon:"mdi-lock",size:"24",class:"block-renderer__lock-icon"}),t[5]||(t[5]=(0,l.Lk)("div",{class:"block-renderer__overlay-text"},[(0,l.Lk)("strong",null,"Premium блок"),(0,l.Lk)("p",null,"Доступно только для чтения")],-1)),(0,l.Lk)("button",{class:"block-renderer__upgrade-btn",onClick:t[2]||(t[2]=(0,i.D$)((...e)=>r.goToPlans&&r.goToPlans(...e),["stop"]))},[t[4]||(t[4]=(0,l.eW)(" Разблокировать ",-1)),(0,l.bF)(x.w,{icon:"mdi-arrow-right",size:"14"})])])])):(0,l.Q3)("",!0)],2)}const Ht={class:"text-block__content"},Yt={key:1,class:"text-block__edit"},Qt={class:"text-block__actions"};function Jt(e,t,o,n,s,r){return(0,l.uX)(),(0,l.CE)("div",{class:(0,a.C4)(["text-block",{"text-block--editing":s.editing}])},[s.editing?((0,l.uX)(),(0,l.CE)("div",Yt,[(0,l.bo)((0,l.Lk)("textarea",{ref:"textarea","onUpdate:modelValue":t[2]||(t[2]=e=>s.draft=e),class:"text-block__textarea",placeholder:"Введите текст...",rows:"3",onKeydown:t[3]||(t[3]=(0,i.jR)((...e)=>r.cancel&&r.cancel(...e),["escape"]))},null,544),[[i.Jo,s.draft]]),(0,l.Lk)("div",Qt,[(0,l.Lk)("button",{class:"text-block__done",onClick:t[4]||(t[4]=(...e)=>r.save&&r.save(...e))},[(0,l.bF)(x.w,{icon:"mdi-check",size:"20"}),t[5]||(t[5]=(0,l.eW)(" Готово ",-1))])])])):((0,l.uX)(),(0,l.CE)("div",{key:0,class:"text-block__view",onClick:t[1]||(t[1]=(...e)=>r.startEdit&&r.startEdit(...e))},[(0,l.Lk)("p",Ht,(0,a.v_)(o.block.content||"Нажмите для редактирования..."),1),(0,l.Lk)("button",{class:"text-block__menu",onClick:t[0]||(t[0]=(0,i.D$)(t=>e.$emit("delete"),["stop"]))},[(0,l.bF)(x.w,{icon:"mdi-dots-vertical",size:"18"})])]))],2)}var Gt=o(1668),Zt={name:"TextBlock",props:{block:{type:Object,required:!0},pageId:{type:String,required:!0}},emits:["update","delete"],data(){return{editing:!1,draft:""}},methods:{startEdit(){this.draft=this.block.content||"",this.editing=!0,this.$nextTick(()=>{this.$refs.textarea?.focus()})},async save(){if(this.draft===this.block.content)return void(this.editing=!1);const e=window.scrollX,t=window.scrollY;try{await Gt.xt.updateBlock(this.pageId,this.block.id,{type:"TEXT",textContent:this.draft}),this.$emit("update",{...this.block,content:this.draft})}catch(o){console.error("Failed to update block:",o)}this.editing=!1,this.$nextTick(()=>{window.scrollTo(e,t)})},cancel(){this.editing=!1}}},eo=o(1241);const to=(0,eo.A)(Zt,[["render",Jt],["__scopeId","data-v-c7328e84"]]);var oo=to;const lo={key:1,class:"heading-block__edit"},io={class:"heading-block__levels"},ao=["onClick"],no={class:"heading-block__actions"};function so(e,t,o,n,s,r){return(0,l.uX)(),(0,l.CE)("div",{class:(0,a.C4)(["heading-block",{"heading-block--editing":s.editing}])},[s.editing?((0,l.uX)(),(0,l.CE)("div",lo,[(0,l.Lk)("div",io,[((0,l.uX)(),(0,l.CE)(l.FK,null,(0,l.pI)(3,e=>(0,l.Lk)("button",{key:e,class:(0,a.C4)(["heading-block__level",{"heading-block__level--active":s.draftLevel===e}]),onClick:t=>s.draftLevel=e}," H"+(0,a.v_)(e),11,ao)),64))]),(0,l.bo)((0,l.Lk)("input",{ref:"input","onUpdate:modelValue":t[2]||(t[2]=e=>s.draftHeader=e),type:"text",class:(0,a.C4)(["heading-block__input","heading-block__input--h"+s.draftLevel]),placeholder:"Введите заголовок...",onKeyup:[t[3]||(t[3]=(0,i.jR)((...e)=>r.save&&r.save(...e),["enter"])),t[4]||(t[4]=(0,i.jR)((...e)=>r.cancel&&r.cancel(...e),["escape"]))]},null,34),[[i.Jo,s.draftHeader]]),(0,l.Lk)("div",no,[(0,l.Lk)("button",{class:"heading-block__done",onClick:t[5]||(t[5]=(...e)=>r.save&&r.save(...e))},[(0,l.bF)(x.w,{icon:"mdi-check",size:"20"}),t[6]||(t[6]=(0,l.eW)(" Готово ",-1))])])])):((0,l.uX)(),(0,l.CE)("div",{key:0,class:"heading-block__view",onClick:t[1]||(t[1]=(...e)=>r.startEdit&&r.startEdit(...e))},[((0,l.uX)(),(0,l.Wv)((0,l.$y)("h"+o.block.level),{class:(0,a.C4)(["heading-block__text","heading-block__text--h"+o.block.level])},{default:(0,l.k6)(()=>[(0,l.eW)((0,a.v_)(o.block.header||"Заголовок"),1)]),_:1},8,["class"])),(0,l.Lk)("button",{class:"heading-block__menu",onClick:t[0]||(t[0]=(0,i.D$)(t=>e.$emit("delete"),["stop"]))},[(0,l.bF)(x.w,{icon:"mdi-dots-vertical",size:"18"})])]))],2)}var ro={name:"HeadingBlock",props:{block:{type:Object,required:!0},pageId:{type:String,required:!0}},emits:["update","delete"],data(){return{editing:!1,draftHeader:"",draftLevel:1}},methods:{startEdit(){this.draftHeader=this.block.header||"",this.draftLevel=this.block.level||1,this.editing=!0,this.$nextTick(()=>{this.$refs.input?.focus()})},async save(){if(this.draftHeader===this.block.header&&this.draftLevel===this.block.level)return void(this.editing=!1);const e=window.scrollX,t=window.scrollY;try{await Gt.xt.updateBlock(this.pageId,this.block.id,{type:"HEADING",header:this.draftHeader,level:this.draftLevel}),this.$emit("update",{...this.block,header:this.draftHeader,level:this.draftLevel})}catch(o){console.error("Failed to update heading:",o)}this.editing=!1,this.$nextTick(()=>{window.scrollTo(e,t)})},cancel(){this.editing=!1}}};const co=(0,eo.A)(ro,[["render",so],["__scopeId","data-v-73836854"]]);var uo=co;const vo={class:"divider-block"};function po(e,t,o,i,a,n){return(0,l.uX)(),(0,l.CE)("div",vo,[t[1]||(t[1]=(0,l.Lk)("div",{class:"divider-block__line"},null,-1)),(0,l.Lk)("button",{class:"divider-block__menu",onClick:t[0]||(t[0]=t=>e.$emit("delete"))},[(0,l.bF)(x.w,{icon:"mdi-dots-vertical",size:"16"})])])}var mo={name:"DividerBlock",props:{block:{type:Object,required:!0},pageId:{type:String,required:!0}},emits:["update","delete"]};const ko=(0,eo.A)(mo,[["render",po],["__scopeId","data-v-234677ad"]]);var bo=ko;const ho={class:"checklist-block"},fo={class:"checklist-block__header"},go={class:"checklist-block__items"},yo=["disabled","onClick"],_o=["onUpdate:modelValue","disabled","onKeyup"],wo=["onClick"],Co=["disabled"],Eo=["disabled"];function xo(e,t,o,n,s,r){return(0,l.uX)(),(0,l.CE)("div",ho,[(0,l.Lk)("div",fo,[(0,l.bF)(x.w,{icon:"mdi-checkbox-marked-outline",size:"18",class:"checklist-block__icon"}),t[3]||(t[3]=(0,l.Lk)("span",{class:"checklist-block__label"},"Чек-лист",-1)),(0,l.Lk)("button",{class:"checklist-block__menu",onClick:t[0]||(t[0]=t=>e.$emit("delete"))},[(0,l.bF)(x.w,{icon:"mdi-dots-vertical",size:"18"})])]),(0,l.Lk)("div",go,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.items,(e,t)=>((0,l.uX)(),(0,l.CE)("div",{key:t,class:"checklist-block__item"},[(0,l.Lk)("button",{class:(0,a.C4)(["checklist-block__checkbox",{"checklist-block__checkbox--checked":e.status}]),disabled:o.block.readOnly,onClick:e=>r.toggleItem(t)},[(0,l.bF)(x.w,{icon:e.status?"mdi-checkbox-marked":"mdi-checkbox-blank-outline",size:"22"},null,8,["icon"])],10,yo),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t=>e.text=t,type:"text",class:(0,a.C4)(["checklist-block__input",{"checklist-block__input--done":e.status}]),disabled:o.block.readOnly,placeholder:"Новый пункт...",onKeyup:(0,i.jR)(e=>r.addItem(t+1),["enter"])},null,42,_o),[[i.Jo,e.text]]),s.items.length>1?((0,l.uX)(),(0,l.CE)("button",{key:0,class:"checklist-block__remove",onClick:e=>r.removeItem(t)},[(0,l.bF)(x.w,{icon:"mdi-close",size:"16"})],8,wo)):(0,l.Q3)("",!0)]))),128))]),(0,l.Lk)("button",{class:"checklist-block__add",disabled:o.block.readOnly,onClick:t[1]||(t[1]=e=>r.addItem())},[(0,l.bF)(x.w,{icon:"mdi-plus",size:"18"}),t[4]||(t[4]=(0,l.eW)(" Добавить пункт ",-1))],8,Co),(0,l.Lk)("button",{class:"checklist-block__done",disabled:o.block.readOnly,onClick:t[2]||(t[2]=(...e)=>r.saveItems&&r.saveItems(...e))},[(0,l.bF)(x.w,{icon:"mdi-check",size:"20"}),t[5]||(t[5]=(0,l.eW)(" Готово ",-1))],8,Eo)])}var Lo={name:"ChecklistBlock",props:{block:{type:Object,required:!0},pageId:{type:String,required:!0}},emits:["update","delete"],data(){return{items:[]}},watch:{block:{immediate:!0,handler(e){this.items=e.items?.map(e=>({text:e.text,status:e.checked}))||[{text:"",status:!1}]}}},methods:{async toggleItem(e){this.items[e].status=!this.items[e].status,await this.saveItems()},addItem(e){const t=e??this.items.length;this.items.splice(t,0,{text:"",status:!1}),this.$nextTick(()=>{const e=this.$el.querySelectorAll(".checklist-block__input");e[t]?.focus()})},async removeItem(e){this.items.splice(e,1),0===this.items.length&&this.items.push({text:"",status:!1}),await this.saveItems()},async saveItems(){const e=window.scrollX,t=window.scrollY;try{await Gt.xt.updateBlock(this.pageId,this.block.id,{type:"CHECKLIST",items:this.items.map(e=>({text:e.text,checked:e.status}))}),this.$emit("update",{...this.block,items:this.items.map(e=>({text:e.text,checked:e.status}))})}catch(o){console.error("Failed to update checklist:",o)}this.$nextTick(()=>{window.scrollTo(e,t)})}}};const To=(0,eo.A)(Lo,[["render",xo],["__scopeId","data-v-0dc0c658"]]);var Io=To;const So={class:"bullet-block"},Bo={class:"bullet-block__header"},Fo={class:"bullet-block__items"},Ao=["onUpdate:modelValue","disabled","onKeyup"],Do=["onClick"],Oo=["disabled"],Ro=["disabled"];function $o(e,t,o,a,n,s){return(0,l.uX)(),(0,l.CE)("div",So,[(0,l.Lk)("div",Bo,[(0,l.bF)(x.w,{icon:"mdi-format-list-bulleted",size:"18",class:"bullet-block__icon"}),t[3]||(t[3]=(0,l.Lk)("span",{class:"bullet-block__label"},"Список",-1)),(0,l.Lk)("button",{class:"bullet-block__menu",onClick:t[0]||(t[0]=t=>e.$emit("delete"))},[(0,l.bF)(x.w,{icon:"mdi-dots-vertical",size:"18"})])]),(0,l.Lk)("div",Fo,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.items,(e,a)=>((0,l.uX)(),(0,l.CE)("div",{key:a,class:"bullet-block__item"},[t[4]||(t[4]=(0,l.Lk)("span",{class:"bullet-block__bullet"},null,-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":e=>n.items[a]=e,type:"text",class:"bullet-block__input",disabled:o.block.readOnly,placeholder:"Новый пункт...",onKeyup:(0,i.jR)(e=>s.addItem(a+1),["enter"])},null,40,Ao),[[i.Jo,n.items[a]]]),n.items.length>1?((0,l.uX)(),(0,l.CE)("button",{key:0,class:"bullet-block__remove",onClick:e=>s.removeItem(a)},[(0,l.bF)(x.w,{icon:"mdi-close",size:"16"})],8,Do)):(0,l.Q3)("",!0)]))),128))]),(0,l.Lk)("button",{class:"bullet-block__add",disabled:o.block.readOnly,onClick:t[1]||(t[1]=e=>s.addItem())},[(0,l.bF)(x.w,{icon:"mdi-plus",size:"18"}),t[5]||(t[5]=(0,l.eW)(" Добавить пункт ",-1))],8,Oo),(0,l.Lk)("button",{class:"bullet-block__done",disabled:o.block.readOnly,onClick:t[2]||(t[2]=(...e)=>s.saveItems&&s.saveItems(...e))},[(0,l.bF)(x.w,{icon:"mdi-check",size:"20"}),t[6]||(t[6]=(0,l.eW)(" Готово ",-1))],8,Ro)])}var Po={name:"BulletListBlock",props:{block:{type:Object,required:!0},pageId:{type:String,required:!0}},emits:["update","delete"],data(){return{items:[]}},watch:{block:{immediate:!0,handler(e){this.items=e.items?.length?[...e.items]:[""]}}},methods:{addItem(e){const t=e??this.items.length;this.items.splice(t,0,""),this.$nextTick(()=>{const e=this.$el.querySelectorAll(".bullet-block__input");e[t]?.focus()})},async removeItem(e){this.items.splice(e,1),0===this.items.length&&this.items.push(""),await this.saveItems()},async saveItems(){const e=window.scrollX,t=window.scrollY;try{await Gt.xt.updateBlock(this.pageId,this.block.id,{type:"BULLET_LIST",items:this.items}),this.$emit("update",{...this.block,items:[...this.items]})}catch(o){console.error("Failed to update bullet list:",o)}this.$nextTick(()=>{window.scrollTo(e,t)})}}};const Wo=(0,eo.A)(Po,[["render",$o],["__scopeId","data-v-eb32ebc0"]]);var Xo=Wo;const Vo={class:"kv-block"},No={class:"kv-block__header"},zo={class:"kv-block__items"},Ko=["onUpdate:modelValue","disabled"],jo=["onUpdate:modelValue","disabled","onKeyup"],Mo=["onClick"],Uo=["disabled"],qo=["disabled"];function Ho(e,t,o,a,n,s){return(0,l.uX)(),(0,l.CE)("div",Vo,[(0,l.Lk)("div",No,[(0,l.bF)(x.w,{icon:"mdi-table-row",size:"18",class:"kv-block__icon"}),t[3]||(t[3]=(0,l.Lk)("span",{class:"kv-block__label"},"Ключ-значение",-1)),(0,l.Lk)("button",{class:"kv-block__menu",onClick:t[0]||(t[0]=t=>e.$emit("delete"))},[(0,l.bF)(x.w,{icon:"mdi-dots-vertical",size:"18"})])]),(0,l.Lk)("div",zo,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.items,(e,t)=>((0,l.uX)(),(0,l.CE)("div",{key:t,class:"kv-block__item"},[(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t=>e.key=t,type:"text",class:"kv-block__key",disabled:o.block.readOnly,placeholder:"Ключ"},null,8,Ko),[[i.Jo,e.key]]),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t=>e.value=t,type:"text",class:"kv-block__value",disabled:o.block.readOnly,placeholder:"Значение",onKeyup:(0,i.jR)(e=>s.addItem(t+1),["enter"])},null,40,jo),[[i.Jo,e.value]]),n.items.length>1?((0,l.uX)(),(0,l.CE)("button",{key:0,class:"kv-block__remove",onClick:e=>s.removeItem(t)},[(0,l.bF)(x.w,{icon:"mdi-close",size:"16"})],8,Mo)):(0,l.Q3)("",!0)]))),128))]),(0,l.Lk)("button",{class:"kv-block__add",disabled:o.block.readOnly,onClick:t[1]||(t[1]=e=>s.addItem())},[(0,l.bF)(x.w,{icon:"mdi-plus",size:"18"}),t[4]||(t[4]=(0,l.eW)(" Добавить пару ",-1))],8,Uo),(0,l.Lk)("button",{class:"kv-block__done",disabled:o.block.readOnly,onClick:t[2]||(t[2]=(...e)=>s.saveItems&&s.saveItems(...e))},[(0,l.bF)(x.w,{icon:"mdi-check",size:"20"}),t[5]||(t[5]=(0,l.eW)(" Готово ",-1))],8,qo)])}var Yo={name:"KeyValueBlock",props:{block:{type:Object,required:!0},pageId:{type:String,required:!0}},emits:["update","delete"],data(){return{items:[]}},watch:{block:{immediate:!0,handler(e){this.items=e.items?.map(e=>({...e}))||[{key:"",value:""}]}}},methods:{addItem(e){const t=e??this.items.length;this.items.splice(t,0,{key:"",value:""}),this.$nextTick(()=>{const e=this.$el.querySelectorAll(".kv-block__key");e[t]?.focus()})},async removeItem(e){this.items.splice(e,1),0===this.items.length&&this.items.push({key:"",value:""}),await this.saveItems()},async saveItems(){const e=window.scrollX,t=window.scrollY;try{await Gt.xt.updateBlock(this.pageId,this.block.id,{type:"KEY_VALUE",items:this.items.map(e=>({key:e.key,value:e.value}))}),this.$emit("update",{...this.block,items:[...this.items]})}catch(o){console.error("Failed to update key-value:",o)}this.$nextTick(()=>{window.scrollTo(e,t)})}}};const Qo=(0,eo.A)(Yo,[["render",Ho],["__scopeId","data-v-0e1cda21"]]);var Jo=Qo;const Go={class:"idea-block"},Zo={class:"idea-block__header"},el={class:"idea-block__fields"},tl={class:"idea-block__field"},ol=["disabled"],ll={class:"idea-block__field"},il=["disabled"],al={class:"idea-block__field"},nl=["disabled"],sl={class:"idea-block__field"},rl=["disabled"],cl={class:"idea-block__field"},ul=["disabled"],dl=["disabled"];function vl(e,t,o,a,n,s){return(0,l.uX)(),(0,l.CE)("div",Go,[(0,l.Lk)("div",Zo,[(0,l.bF)(x.w,{icon:"mdi-lightbulb-outline",size:"18",class:"idea-block__icon"}),t[7]||(t[7]=(0,l.Lk)("span",{class:"idea-block__label"},"Карточка идеи",-1)),(0,l.Lk)("button",{class:"idea-block__menu",onClick:t[0]||(t[0]=t=>e.$emit("delete"))},[(0,l.bF)(x.w,{icon:"mdi-dots-vertical",size:"18"})])]),(0,l.Lk)("div",el,[(0,l.Lk)("div",tl,[t[8]||(t[8]=(0,l.Lk)("label",{class:"idea-block__field-label"},"Проблема",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.draft.problem=e),class:"idea-block__textarea",disabled:o.block.readOnly,placeholder:"Какую проблему решает?",rows:"2"},null,8,ol),[[i.Jo,n.draft.problem]])]),(0,l.Lk)("div",ll,[t[9]||(t[9]=(0,l.Lk)("label",{class:"idea-block__field-label"},"Решение",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.draft.solution=e),class:"idea-block__textarea",disabled:o.block.readOnly,placeholder:"Как решить проблему?",rows:"2"},null,8,il),[[i.Jo,n.draft.solution]])]),(0,l.Lk)("div",al,[t[10]||(t[10]=(0,l.Lk)("label",{class:"idea-block__field-label"},"Аудитория",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>n.draft.audience=e),type:"text",class:"idea-block__input",disabled:o.block.readOnly,placeholder:"Целевая аудитория"},null,8,nl),[[i.Jo,n.draft.audience]])]),(0,l.Lk)("div",sl,[t[11]||(t[11]=(0,l.Lk)("label",{class:"idea-block__field-label"},"MVP",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":t[4]||(t[4]=e=>n.draft.mvp=e),class:"idea-block__textarea",disabled:o.block.readOnly,placeholder:"Минимальный продукт",rows:"2"},null,8,rl),[[i.Jo,n.draft.mvp]])]),(0,l.Lk)("div",cl,[t[12]||(t[12]=(0,l.Lk)("label",{class:"idea-block__field-label"},"Монетизация",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>n.draft.monetization=e),type:"text",class:"idea-block__input",disabled:o.block.readOnly,placeholder:"Как заработать?"},null,8,ul),[[i.Jo,n.draft.monetization]])])]),(0,l.Lk)("button",{class:"idea-block__done",disabled:o.block.readOnly,onClick:t[6]||(t[6]=(...e)=>s.save&&s.save(...e))},[(0,l.bF)(x.w,{icon:"mdi-check",size:"20"}),t[13]||(t[13]=(0,l.eW)(" Готово ",-1))],8,dl)])}var pl={name:"IdeaCardBlock",props:{block:{type:Object,required:!0},pageId:{type:String,required:!0}},emits:["update","delete"],data(){return{draft:{problem:"",solution:"",audience:"",mvp:"",monetization:""}}},watch:{block:{immediate:!0,handler(e){this.draft={problem:e.problem||"",solution:e.solution||"",audience:e.audience||"",mvp:e.mvp||"",monetization:e.monetization||""}}}},methods:{async save(){const e=this.draft.problem!==this.block.problem||this.draft.solution!==this.block.solution||this.draft.audience!==this.block.audience||this.draft.mvp!==this.block.mvp||this.draft.monetization!==this.block.monetization;if(!e)return;const t=window.scrollX,o=window.scrollY;try{await Gt.xt.updateBlock(this.pageId,this.block.id,{type:"IDEA_CARD",...this.draft}),this.$emit("update",{...this.block,...this.draft})}catch(l){console.error("Failed to update idea:",l)}this.$nextTick(()=>{window.scrollTo(t,o)})}}};const ml=(0,eo.A)(pl,[["render",vl],["__scopeId","data-v-41de27f0"]]);var kl=ml;const bl={class:"pros-block__icon-wrapper"},hl={class:"pros-block__content"},fl={key:1,class:"pros-block__edit"},gl={class:"pros-block__icon-wrapper"},yl={class:"pros-block__edit-content"};function _l(e,t,o,n,s,r){return(0,l.uX)(),(0,l.CE)("div",{class:(0,a.C4)(["pros-block",{"pros-block--editing":s.editing}])},[s.editing?((0,l.uX)(),(0,l.CE)("div",fl,[(0,l.Lk)("div",gl,[(0,l.bF)(x.w,{icon:"mdi-thumb-up",size:"18"})]),(0,l.Lk)("div",yl,[(0,l.bo)((0,l.Lk)("textarea",{ref:"textarea","onUpdate:modelValue":t[2]||(t[2]=e=>s.draft=e),class:"pros-block__textarea",placeholder:"Введите преимущество...",rows:"2",onKeydown:t[3]||(t[3]=(0,i.jR)((...e)=>r.cancel&&r.cancel(...e),["escape"]))},null,544),[[i.Jo,s.draft]]),(0,l.Lk)("button",{class:"pros-block__done",onClick:t[4]||(t[4]=(...e)=>r.save&&r.save(...e))},[(0,l.bF)(x.w,{icon:"mdi-check",size:"18"})])])])):((0,l.uX)(),(0,l.CE)("div",{key:0,class:"pros-block__view",onClick:t[1]||(t[1]=(...e)=>r.startEdit&&r.startEdit(...e))},[(0,l.Lk)("div",bl,[(0,l.bF)(x.w,{icon:"mdi-thumb-up",size:"18"})]),(0,l.Lk)("p",hl,(0,a.v_)(o.block.content||"Нажмите для редактирования..."),1),(0,l.Lk)("button",{class:"pros-block__menu",onClick:t[0]||(t[0]=(0,i.D$)(t=>e.$emit("delete"),["stop"]))},[(0,l.bF)(x.w,{icon:"mdi-dots-vertical",size:"18"})])]))],2)}var wl={name:"ProsBlock",props:{block:{type:Object,required:!0},pageId:{type:String,required:!0}},emits:["update","delete"],data(){return{editing:!1,draft:""}},methods:{startEdit(){this.draft=this.block.content||"",this.editing=!0,this.$nextTick(()=>{this.$refs.textarea?.focus()})},async save(){if(this.draft===this.block.content)return void(this.editing=!1);const e=window.scrollX,t=window.scrollY;try{await Gt.xt.updateBlock(this.pageId,this.block.id,{type:"PROS",textContent:this.draft}),this.$emit("update",{...this.block,content:this.draft})}catch(o){console.error("Failed to update block:",o)}this.editing=!1,this.$nextTick(()=>{window.scrollTo(e,t)})},cancel(){this.editing=!1}}};const Cl=(0,eo.A)(wl,[["render",_l],["__scopeId","data-v-23bb5954"]]);var El=Cl;const xl={class:"cons-block__icon-wrapper"},Ll={class:"cons-block__content"},Tl={key:1,class:"cons-block__edit"},Il={class:"cons-block__icon-wrapper"},Sl={class:"cons-block__edit-content"};function Bl(e,t,o,n,s,r){return(0,l.uX)(),(0,l.CE)("div",{class:(0,a.C4)(["cons-block",{"cons-block--editing":s.editing}])},[s.editing?((0,l.uX)(),(0,l.CE)("div",Tl,[(0,l.Lk)("div",Il,[(0,l.bF)(x.w,{icon:"mdi-thumb-down",size:"18"})]),(0,l.Lk)("div",Sl,[(0,l.bo)((0,l.Lk)("textarea",{ref:"textarea","onUpdate:modelValue":t[2]||(t[2]=e=>s.draft=e),class:"cons-block__textarea",placeholder:"Введите недостаток...",rows:"2",onKeydown:t[3]||(t[3]=(0,i.jR)((...e)=>r.cancel&&r.cancel(...e),["escape"]))},null,544),[[i.Jo,s.draft]]),(0,l.Lk)("button",{class:"cons-block__done",onClick:t[4]||(t[4]=(...e)=>r.save&&r.save(...e))},[(0,l.bF)(x.w,{icon:"mdi-check",size:"18"})])])])):((0,l.uX)(),(0,l.CE)("div",{key:0,class:"cons-block__view",onClick:t[1]||(t[1]=(...e)=>r.startEdit&&r.startEdit(...e))},[(0,l.Lk)("div",xl,[(0,l.bF)(x.w,{icon:"mdi-thumb-down",size:"18"})]),(0,l.Lk)("p",Ll,(0,a.v_)(o.block.content||"Нажмите для редактирования..."),1),(0,l.Lk)("button",{class:"cons-block__menu",onClick:t[0]||(t[0]=(0,i.D$)(t=>e.$emit("delete"),["stop"]))},[(0,l.bF)(x.w,{icon:"mdi-dots-vertical",size:"18"})])]))],2)}var Fl={name:"ConsBlock",props:{block:{type:Object,required:!0},pageId:{type:String,required:!0}},emits:["update","delete"],data(){return{editing:!1,draft:""}},methods:{startEdit(){this.draft=this.block.content||"",this.editing=!0,this.$nextTick(()=>{this.$refs.textarea?.focus()})},async save(){if(this.draft===this.block.content)return void(this.editing=!1);const e=window.scrollX,t=window.scrollY;try{await Gt.xt.updateBlock(this.pageId,this.block.id,{type:"CONS",textContent:this.draft}),this.$emit("update",{...this.block,content:this.draft})}catch(o){console.error("Failed to update block:",o)}this.editing=!1,this.$nextTick(()=>{window.scrollTo(e,t)})},cancel(){this.editing=!1}}};const Al=(0,eo.A)(Fl,[["render",Bl],["__scopeId","data-v-210492b8"]]);var Dl=Al;const Ol={key:0,class:"link-block__view"},Rl={class:"link-block__text"},$l={key:0,class:"link-block__url"},Pl={key:1,class:"link-block__edit"};function Wl(e,t,o,n,s,r){return(0,l.uX)(),(0,l.CE)("div",{class:(0,a.C4)(["link-block",{"link-block--editing":s.editing}])},[s.editing?((0,l.uX)(),(0,l.CE)("div",Pl,[(0,l.bo)((0,l.Lk)("input",{ref:"urlInput","onUpdate:modelValue":t[3]||(t[3]=e=>s.draftUrl=e),type:"url",class:"link-block__input",placeholder:"https://example.com",onKeyup:t[4]||(t[4]=(0,i.jR)(t=>e.$refs.textInput?.focus(),["enter"]))},null,544),[[i.Jo,s.draftUrl]]),(0,l.bo)((0,l.Lk)("input",{ref:"textInput","onUpdate:modelValue":t[5]||(t[5]=e=>s.draftText=e),type:"text",class:"link-block__input",placeholder:"Текст ссылки",onKeyup:t[6]||(t[6]=(0,i.jR)((...e)=>r.save&&r.save(...e),["enter"]))},null,544),[[i.Jo,s.draftText]]),(0,l.Lk)("button",{class:"link-block__done",onClick:t[7]||(t[7]=(...e)=>r.save&&r.save(...e))},[(0,l.bF)(x.w,{icon:"mdi-check",size:"20"}),t[9]||(t[9]=(0,l.eW)(" Готово ",-1))]),(0,l.Lk)("button",{class:"link-block__cancel",onClick:t[8]||(t[8]=(...e)=>r.cancel&&r.cancel(...e))},[(0,l.bF)(x.w,{icon:"mdi-close",size:"18"})])])):((0,l.uX)(),(0,l.CE)("div",Ol,[(0,l.Lk)("div",{class:"link-block__icon-wrapper",onClick:t[0]||(t[0]=(...e)=>r.openLink&&r.openLink(...e))},[(0,l.bF)(x.w,{icon:"mdi-link-variant",size:"20"})]),(0,l.Lk)("div",{class:"link-block__content",onClick:t[1]||(t[1]=(...e)=>r.startEdit&&r.startEdit(...e))},[(0,l.Lk)("span",Rl,(0,a.v_)(o.block.text||o.block.url||"Добавить ссылку"),1),o.block.url?((0,l.uX)(),(0,l.CE)("span",$l,(0,a.v_)(r.displayUrl),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("button",{class:"link-block__menu",onClick:t[2]||(t[2]=t=>e.$emit("delete"))},[(0,l.bF)(x.w,{icon:"mdi-dots-vertical",size:"18"})])]))],2)}o(4603),o(7566),o(8721);var Xl={name:"LinkBlock",props:{block:{type:Object,required:!0},pageId:{type:String,required:!0}},emits:["update","delete"],data(){return{editing:!1,draftUrl:"",draftText:""}},computed:{displayUrl(){if(!this.block.url)return"";try{const e=new URL(this.block.url);return e.hostname}catch{return this.block.url}}},methods:{startEdit(){this.draftUrl=this.block.url||"",this.draftText=this.block.text||"",this.editing=!0,this.$nextTick(()=>{this.$refs.urlInput?.focus()})},openLink(){this.block.url?window.open(this.block.url,"_blank"):this.startEdit()},async save(){if(this.draftUrl===this.block.url&&this.draftText===this.block.text)return void(this.editing=!1);const e=window.scrollX,t=window.scrollY;try{await Gt.xt.updateBlock(this.pageId,this.block.id,{type:"LINK",url:this.draftUrl,text:this.draftText}),this.$emit("update",{...this.block,url:this.draftUrl,text:this.draftText})}catch(o){console.error("Failed to update link:",o)}this.editing=!1,this.$nextTick(()=>{window.scrollTo(e,t)})},cancel(){this.editing=!1}}};const Vl=(0,eo.A)(Xl,[["render",Wl],["__scopeId","data-v-60309766"]]);var Nl=Vl;const zl={class:"status-block"},Kl={class:"status-block__header"},jl={class:"status-block__options"},Ml=["disabled","onClick"];function Ul(e,t,o,i,n,s){return(0,l.uX)(),(0,l.CE)("div",zl,[(0,l.Lk)("div",Kl,[(0,l.bF)(x.w,{icon:"mdi-flag-outline",size:"18",class:"status-block__icon"}),t[1]||(t[1]=(0,l.Lk)("span",{class:"status-block__label"},"Статус",-1)),(0,l.Lk)("button",{class:"status-block__menu",onClick:t[0]||(t[0]=t=>e.$emit("delete"))},[(0,l.bF)(x.w,{icon:"mdi-dots-vertical",size:"18"})])]),(0,l.Lk)("div",jl,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.statusOptions,e=>((0,l.uX)(),(0,l.CE)("button",{key:e.value,class:(0,a.C4)(["status-block__option",{"status-block__option--active":o.block.status===e.value,["status-block__option--"+e.value.toLowerCase()]:!0}]),disabled:o.block.readOnly,onClick:t=>s.setStatus(e.value)},[(0,l.bF)(x.w,{icon:e.icon,size:"18"},null,8,["icon"]),(0,l.Lk)("span",null,(0,a.v_)(e.label),1)],10,Ml))),128))])])}var ql={name:"StatusBlock",props:{block:{type:Object,required:!0},pageId:{type:String,required:!0}},emits:["update","delete"],data(){return{statusOptions:[{value:"IDEA",label:"Идея",icon:"mdi-lightbulb-outline"},{value:"IN_PROGRESS",label:"В процессе",icon:"mdi-progress-clock"},{value:"DONE",label:"Готово",icon:"mdi-check-circle-outline"},{value:"DROPPED",label:"Отменено",icon:"mdi-close-circle-outline"}]}},methods:{async setStatus(e){if(e!==this.block.status)try{await Gt.xt.updateBlock(this.pageId,this.block.id,{type:"STATUS",status:e}),this.$emit("update",{...this.block,status:e})}catch(t){console.error("Failed to update status:",t)}}}};const Hl=(0,eo.A)(ql,[["render",Ul],["__scopeId","data-v-354fd0e3"]]);var Yl=Hl;const Ql={class:"quote-block__content"},Jl={class:"quote-block__text"},Gl={key:0,class:"quote-block__author"},Zl={key:1,class:"quote-block__edit"},ei={class:"quote-block__actions"};function ti(e,t,o,n,s,r){return(0,l.uX)(),(0,l.CE)("div",{class:(0,a.C4)(["quote-block",{"quote-block--editing":s.editing}])},[s.editing?((0,l.uX)(),(0,l.CE)("div",Zl,[(0,l.bo)((0,l.Lk)("textarea",{ref:"textarea","onUpdate:modelValue":t[2]||(t[2]=e=>s.draftText=e),class:"quote-block__textarea",placeholder:"Текст цитаты...",rows:"3"},null,512),[[i.Jo,s.draftText]]),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>s.draftAuthor=e),type:"text",class:"quote-block__input",placeholder:"Автор цитаты",onKeyup:t[4]||(t[4]=(0,i.jR)((...e)=>r.save&&r.save(...e),["enter"]))},null,544),[[i.Jo,s.draftAuthor]]),(0,l.Lk)("div",ei,[(0,l.Lk)("button",{class:"quote-block__done",onClick:t[5]||(t[5]=(...e)=>r.save&&r.save(...e))},[(0,l.bF)(x.w,{icon:"mdi-check",size:"20"}),t[7]||(t[7]=(0,l.eW)(" Готово ",-1))])]),(0,l.Lk)("button",{class:"quote-block__cancel",onClick:t[6]||(t[6]=(...e)=>r.cancel&&r.cancel(...e))},[(0,l.bF)(x.w,{icon:"mdi-close",size:"18"})])])):((0,l.uX)(),(0,l.CE)("div",{key:0,class:"quote-block__view",onClick:t[1]||(t[1]=(...e)=>r.startEdit&&r.startEdit(...e))},[(0,l.Lk)("div",Ql,[(0,l.bF)(x.w,{icon:"mdi-format-quote-open",size:"24",class:"quote-block__quote-icon"}),(0,l.Lk)("p",Jl,(0,a.v_)(o.block.text||"Нажмите для добавления цитаты..."),1),o.block.author?((0,l.uX)(),(0,l.CE)("span",Gl,"— "+(0,a.v_)(o.block.author),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("button",{class:"quote-block__menu",onClick:t[0]||(t[0]=(0,i.D$)(t=>e.$emit("delete"),["stop"]))},[(0,l.bF)(x.w,{icon:"mdi-dots-vertical",size:"18"})])]))],2)}var oi={name:"QuoteBlock",props:{block:{type:Object,required:!0},pageId:{type:String,required:!0}},emits:["update","delete"],data(){return{editing:!1,draftText:"",draftAuthor:""}},methods:{startEdit(){this.draftText=this.block.text||"",this.draftAuthor=this.block.author||"",this.editing=!0,this.$nextTick(()=>{this.$refs.textarea?.focus()})},async save(){if(this.draftText===this.block.text&&this.draftAuthor===this.block.author)return void(this.editing=!1);const e=window.scrollX,t=window.scrollY;try{await Gt.xt.updateBlock(this.pageId,this.block.id,{type:"QUOTE",text:this.draftText,author:this.draftAuthor}),this.$emit("update",{...this.block,text:this.draftText,author:this.draftAuthor})}catch(o){console.error("Failed to update quote:",o)}this.editing=!1,this.$nextTick(()=>{window.scrollTo(e,t)})},cancel(){this.editing=!1}}};const li=(0,eo.A)(oi,[["render",ti],["__scopeId","data-v-03f27e1e"]]);var ii=li;const ai={TEXT:oo,HEADING:uo,DIVIDER:bo,CHECKLIST:Io,BULLET_LIST:Xo,KEY_VALUE:Jo,IDEA_CARD:kl,PROS:El,CONS:Dl,LINK:Nl,STATUS:Yl,QUOTE:ii};var ni={name:"BlockRenderer",props:{block:{type:Object,required:!0},pageId:{type:String,required:!0},limits:{type:Object,default:null}},emits:["update","delete"],computed:{blockComponent(){const e=this.block.type||this.block.blockType;return ai[e]||oo}},methods:{goToPlans(){this.$router.push({name:"subscription-plans"})}}};const si=(0,eo.A)(ni,[["render",qt],["__scopeId","data-v-66158499"]]);var ri=si;const ci={key:0,class:"block-menu"},ui={class:"block-menu__search"},di={key:0,class:"block-menu__disabled-banner"},vi={class:"block-menu__list"},pi={key:0,class:"block-menu__empty"},mi={key:1,class:"block-menu__section"},ki=["disabled","onClick","onMouseenter"],bi={class:"block-menu__item-icon"},hi={class:"block-menu__item-info"},fi={class:"block-menu__item-name"},gi={class:"block-menu__item-desc"},yi={key:2,class:"block-menu__section"},_i={class:"block-menu__section-title"},wi={key:0,class:"block-menu__pro-badge"},Ci=["onClick","onMouseenter"],Ei={class:"block-menu__item-info"},xi={class:"block-menu__item-name"},Li={class:"block-menu__item-desc"};function Ti(e,t,o,n,s,r){return(0,l.uX)(),(0,l.Wv)(l.Im,{to:"body"},[(0,l.bF)(i.eB,{name:"fade"},{default:(0,l.k6)(()=>[o.show?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"block-menu__overlay",onClick:t[6]||(t[6]=(0,i.D$)(t=>e.$emit("close"),["self"]))},[(0,l.bF)(i.eB,{name:"scale"},{default:(0,l.k6)(()=>[o.show?((0,l.uX)(),(0,l.CE)("div",ci,[(0,l.Lk)("div",ui,[(0,l.bF)(x.w,{icon:"mdi-magnify",size:"18",class:"block-menu__search-icon"}),(0,l.bo)((0,l.Lk)("input",{ref:"searchInput","onUpdate:modelValue":t[0]||(t[0]=e=>s.search=e),type:"text",class:"block-menu__search-input",placeholder:"Поиск блоков...",onKeydown:[t[1]||(t[1]=(0,i.jR)((0,i.D$)((...e)=>r.navigateDown&&r.navigateDown(...e),["prevent"]),["down"])),t[2]||(t[2]=(0,i.jR)((0,i.D$)((...e)=>r.navigateUp&&r.navigateUp(...e),["prevent"]),["up"])),t[3]||(t[3]=(0,i.jR)((0,i.D$)((...e)=>r.selectCurrent&&r.selectCurrent(...e),["prevent"]),["enter"])),t[4]||(t[4]=(0,i.jR)(t=>e.$emit("close"),["escape"]))]},null,544),[[i.Jo,s.search]])]),o.limits&&!o.limits.canAddBlocks?((0,l.uX)(),(0,l.CE)("div",di,[(0,l.bF)(x.w,{icon:"mdi-alert-circle-outline",size:"18"}),t[7]||(t[7]=(0,l.Lk)("span",null,"Достигнут лимит бесплатного плана",-1))])):(0,l.Q3)("",!0),(0,l.Lk)("div",vi,[0===r.filteredBlocks.length?((0,l.uX)(),(0,l.CE)("div",pi," Ничего не найдено ")):(0,l.Q3)("",!0),r.filteredFreeBlocks.length>0?((0,l.uX)(),(0,l.CE)("div",mi,[t[8]||(t[8]=(0,l.Lk)("div",{class:"block-menu__section-title"},"Основные",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.filteredFreeBlocks,(e,t)=>((0,l.uX)(),(0,l.CE)("button",{key:e.blockType,class:(0,a.C4)(["block-menu__item",{"block-menu__item--active":s.selectedIndex===t,"block-menu__item--disabled":o.limits&&!o.limits.canAddBlocks}]),disabled:o.limits&&!o.limits.canAddBlocks,onClick:t=>r.select(e),onMouseenter:e=>s.selectedIndex=t},[(0,l.Lk)("div",bi,[(0,l.bF)(x.w,{icon:r.getIcon(e.blockType),size:"20"},null,8,["icon"])]),(0,l.Lk)("div",hi,[(0,l.Lk)("span",fi,(0,a.v_)(e.blockName),1),(0,l.Lk)("span",gi,(0,a.v_)(r.getDescription(e.blockType)),1)])],42,ki))),128))])):(0,l.Q3)("",!0),r.filteredPremiumBlocks.length>0?((0,l.uX)(),(0,l.CE)("div",yi,[(0,l.Lk)("div",_i,[t[9]||(t[9]=(0,l.eW)(" Премиум ",-1)),o.isPremium?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("span",wi,"PRO"))]),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.filteredPremiumBlocks,(e,t)=>((0,l.uX)(),(0,l.CE)("button",{key:e.blockType,class:(0,a.C4)(["block-menu__item",{"block-menu__item--active":s.selectedIndex===r.filteredFreeBlocks.length+t,"block-menu__item--locked":!o.isPremium}]),onClick:t=>r.select(e),onMouseenter:e=>s.selectedIndex=r.filteredFreeBlocks.length+t},[(0,l.Lk)("div",{class:(0,a.C4)(["block-menu__item-icon",{"block-menu__item-icon--premium":!o.isPremium}])},[(0,l.bF)(x.w,{icon:r.getIcon(e.blockType),size:"20"},null,8,["icon"])],2),(0,l.Lk)("div",Ei,[(0,l.Lk)("span",xi,(0,a.v_)(e.blockName),1),(0,l.Lk)("span",Li,(0,a.v_)(r.getDescription(e.blockType)),1)]),o.isPremium?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(x.w,{key:0,icon:"mdi-lock",size:"14",class:"block-menu__item-lock"}))],42,Ci))),128))])):(0,l.Q3)("",!0)]),!o.isPremium&&r.filteredPremiumBlocks.length>0?((0,l.uX)(),(0,l.CE)("button",{key:1,class:"block-menu__upgrade",onClick:t[5]||(t[5]=(...e)=>r.goToPlans&&r.goToPlans(...e))},[(0,l.bF)(x.w,{icon:"mdi-crown",size:"16"}),t[10]||(t[10]=(0,l.Lk)("span",null,"Разблокировать все блоки",-1)),(0,l.bF)(x.w,{icon:"mdi-arrow-right",size:"16"})])):(0,l.Q3)("",!0)])):(0,l.Q3)("",!0)]),_:1})])):(0,l.Q3)("",!0)]),_:1})])}const Ii={TEXT:"mdi-text",HEADING:"mdi-format-header-1",DIVIDER:"mdi-minus",CHECKLIST:"mdi-checkbox-marked-outline",BULLET_LIST:"mdi-format-list-bulleted",KEY_VALUE:"mdi-table-row",IDEA_CARD:"mdi-lightbulb-outline",PROS:"mdi-thumb-up-outline",CONS:"mdi-thumb-down-outline",LINK:"mdi-link-variant",STATUS:"mdi-flag-outline",QUOTE:"mdi-format-quote-close"},Si={TEXT:"Простой текстовый блок",HEADING:"Заголовок H1, H2, H3",DIVIDER:"Горизонтальный разделитель",CHECKLIST:"Список задач с галочками",BULLET_LIST:"Маркированный список",KEY_VALUE:"Пары ключ-значение",IDEA_CARD:"Структурированная идея",PROS:"Преимущество / плюс",CONS:"Недостаток / минус",LINK:"Ссылка на ресурс",STATUS:"Статус задачи",QUOTE:"Цитата с автором"};var Bi={name:"BlockTypeSelector",props:{show:{type:Boolean,default:!1},blockTypes:{type:Array,default:()=>[]},isPremium:{type:Boolean,default:!1},limits:{type:Object,default:null}},emits:["close","select"],data(){return{search:"",selectedIndex:0}},computed:{filteredBlocks(){if(!this.search.trim())return this.blockTypes;const e=this.search.toLowerCase();return this.blockTypes.filter(t=>t.blockName.toLowerCase().includes(e)||this.getDescription(t.blockType).toLowerCase().includes(e))},filteredFreeBlocks(){return this.filteredBlocks.filter(e=>e.isFreeBlock)},filteredPremiumBlocks(){return this.filteredBlocks.filter(e=>!e.isFreeBlock)}},watch:{show(e){e&&(this.search="",this.selectedIndex=0,this.$nextTick(()=>{this.$refs.searchInput?.focus()}))},search(){this.selectedIndex=0}},methods:{getIcon(e){return Ii[e]||"mdi-card-outline"},getDescription(e){return Si[e]||""},select(e){e.isFreeBlock||this.isPremium?this.$emit("select",e.blockType):this.goToPlans()},navigateDown(){const e=this.filteredBlocks.length;e>0&&(this.selectedIndex=(this.selectedIndex+1)%e)},navigateUp(){const e=this.filteredBlocks.length;e>0&&(this.selectedIndex=(this.selectedIndex-1+e)%e)},selectCurrent(){const e=this.filteredBlocks[this.selectedIndex];e&&this.select(e)},goToPlans(){this.$emit("close"),this.$router.push({name:"subscription-plans"})}}};const Fi=(0,eo.A)(Bi,[["render",Ti],["__scopeId","data-v-3ad8211e"]]);var Ai=Fi,Di=o(6844);const Oi={key:0,class:"confirm-dialog"},Ri={class:"confirm-dialog__title"},$i={key:0,class:"confirm-dialog__message"},Pi={class:"confirm-dialog__actions"};function Wi(e,t,o,n,s,r){return(0,l.uX)(),(0,l.Wv)(l.Im,{to:"body"},[(0,l.bF)(i.eB,{name:"fade"},{default:(0,l.k6)(()=>[o.show?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"confirm-dialog__overlay",onClick:t[2]||(t[2]=(0,i.D$)(t=>e.$emit("cancel"),["self"]))},[(0,l.bF)(i.eB,{name:"slide-up"},{default:(0,l.k6)(()=>[o.show?((0,l.uX)(),(0,l.CE)("div",Oi,[(0,l.Lk)("h3",Ri,(0,a.v_)(o.title),1),o.message?((0,l.uX)(),(0,l.CE)("p",$i,(0,a.v_)(o.message),1)):(0,l.Q3)("",!0),(0,l.Lk)("div",Pi,[(0,l.Lk)("button",{class:"confirm-dialog__btn confirm-dialog__btn--cancel",onClick:t[0]||(t[0]=t=>e.$emit("cancel"))},(0,a.v_)(o.cancelText),1),(0,l.Lk)("button",{class:(0,a.C4)(["confirm-dialog__btn",{"confirm-dialog__btn--danger":o.danger}]),onClick:t[1]||(t[1]=t=>e.$emit("confirm"))},(0,a.v_)(o.confirmText),3)])])):(0,l.Q3)("",!0)]),_:1})])):(0,l.Q3)("",!0)]),_:1})])}var Xi={name:"ConfirmDialog",props:{show:{type:Boolean,default:!1},title:{type:String,required:!0},message:{type:String,default:""},confirmText:{type:String,default:"Удалить"},cancelText:{type:String,default:"Отмена"},danger:{type:Boolean,default:!1}},emits:["confirm","cancel"]};const Vi=(0,eo.A)(Xi,[["render",Wi],["__scopeId","data-v-49d6e655"]]);var Ni=Vi;const zi=["HEADING","BULLET_LIST","KEY_VALUE","IDEA_CARD","LINK","STATUS","QUOTE","PROS","CONS"];var Ki={name:"PageDetailView",components:{BlockRenderer:ri,BlockTypeSelector:Ai,EmptyState:Di.A,ConfirmDialog:Ni},data(){return{loading:!0,page:null,editingTitle:!1,titleDraft:"",showBlockSelector:!1,showDeleteConfirm:!1,showBlockDeleteConfirm:!1,blockToDelete:null,blockIndexToDelete:null,blockTypes:[],isPremium:!1,limits:null,showToast:!1,toastMessage:"",toastAction:null,toastColor:"error"}},computed:{pageId(){return this.$route.params.id}},async mounted(){await this.loadData()},methods:{async loadData(){try{this.loading=!0;const[e,t,o]=await Promise.all([Gt.v0.getPage(this.pageId),Gt.v0.getBlockTypes(),Gt.eS.getLimits()]);this.page=e.data,this.blockTypes=t.data.blocks||[],this.limits=o.data,this.isPremium="PREMIUM"===this.limits.plan}catch(e){console.error("Failed to load page:",e),this.$router.replace({name:"pages"})}finally{this.loading=!1}},async refreshLimits(){try{const e=await Gt.eS.getLimits();this.limits=e.data,this.isPremium="PREMIUM"===this.limits.plan}catch(e){console.error("Failed to refresh limits:",e)}},goBack(){this.$router.push({name:"pages"})},goToPlans(){this.$router.push({name:"subscription-plans"})},startTitleEdit(){this.titleDraft=this.page?.title||"",this.editingTitle=!0,this.$nextTick(()=>{this.$refs.titleInput?.focus(),this.$refs.titleInput?.select()})},async saveTitle(){if(this.titleDraft.trim()||(this.titleDraft=this.page?.title||""),this.titleDraft===this.page?.title)return void(this.editingTitle=!1);const e=window.scrollX,t=window.scrollY;try{await Gt.v0.updatePage(this.pageId,{title:this.titleDraft.trim()}),this.page.title=this.titleDraft.trim()}catch(o){console.error("Failed to update title:",o)}this.editingTitle=!1,this.$nextTick(()=>{window.scrollTo(e,t)})},cancelTitleEdit(){this.editingTitle=!1},handleFabClick(){!this.limits||this.limits.canAddBlocks?this.showBlockSelector=!0:this.displayToast({message:"Достигнут лимит бесплатного плана",color:"warning",action:{text:"Оформить Premium",onClick:()=>this.goToPlans()}})},async createBlock(e){if(this.showBlockSelector=!1,this.limits&&!this.limits.canAddBlocks)return void this.displayToast({message:"Достигнут лимит бесплатного плана",color:"warning",action:{text:"Оформить Premium",onClick:()=>this.goToPlans()}});if(zi.includes(e)&&this.limits&&!this.limits.canEditPremiumBlocks)return void this.displayToast({message:"Этот тип блока доступен с Premium подпиской.",color:"info",action:{text:"Узнать больше",onClick:()=>this.goToPlans()}});const t=this.getDefaultBlockPayload(e);try{const e=await Gt.xt.createBlock(this.pageId,t);this.page.blocks.push(e.data),await this.refreshLimits()}catch(o){console.error("Failed to create block:",o),this.handle403Error(o)}},getDefaultBlockPayload(e){switch(e){case"TEXT":case"PROS":case"CONS":return{type:e,textContent:""};case"HEADING":return{type:e,header:"",level:1};case"DIVIDER":return{type:e};case"CHECKLIST":return{type:e,items:[{text:"",status:!1}]};case"BULLET_LIST":return{type:e,items:[""]};case"KEY_VALUE":return{type:e,items:[{key:"",value:""}]};case"IDEA_CARD":return{type:e,problem:"",solution:"",audience:"",mvp:"",monetization:""};case"LINK":return{type:e,url:"",text:""};case"STATUS":return{type:e,status:"IDEA"};case"QUOTE":return{type:e,text:"",author:""};default:return{type:e}}},updateBlock(e,t){this.page.blocks[e]=t},deleteBlock(e,t){!this.limits||this.limits.canDeleteBlocks?(this.blockToDelete=e,this.blockIndexToDelete=t,this.showBlockDeleteConfirm=!0):this.displayToast({message:"Структура страницы заморожена. Оформите Premium для удаления блоков.",color:"warning",action:{text:"Оформить",onClick:()=>this.goToPlans()}})},async confirmDeleteBlock(){if(this.blockToDelete){try{await Gt.xt.deleteBlock(this.pageId,this.blockToDelete.id),this.page.blocks.splice(this.blockIndexToDelete,1),await this.refreshLimits()}catch(e){console.error("Failed to delete block:",e),this.handle403Error(e)}this.blockToDelete=null,this.blockIndexToDelete=null,this.showBlockDeleteConfirm=!1}},cancelDeleteBlock(){this.blockToDelete=null,this.blockIndexToDelete=null,this.showBlockDeleteConfirm=!1},async deletePage(){try{await Gt.v0.deletePage(this.pageId),this.$router.replace({name:"pages"})}catch(e){console.error("Failed to delete page:",e)}this.showDeleteConfirm=!1},displayToast({message:e,color:t="error",action:o=null}){this.toastMessage=e,this.toastColor=t,this.toastAction=o,this.showToast=!0},handle403Error(e){if(403!==e.response?.status)return;const t=e.reason||e.response?.data?.reason;switch(t){case"STRUCTURE_LOCKED":this.displayToast({message:"Структура заморожена. Оформите Premium для изменений.",color:"warning",action:{text:"Оформить",onClick:()=>this.goToPlans()}});break;case"PREMIUM_BLOCK_REQUIRED":this.displayToast({message:"Этот блок доступен с Premium подпиской.",color:"info",action:{text:"Узнать больше",onClick:()=>this.goToPlans()}});break;case"PREMIUM_BLOCK_READ_ONLY":this.displayToast({message:"Редактирование доступно с Premium.",color:"info",action:{text:"Оформить",onClick:()=>this.goToPlans()}});break;default:this.displayToast({message:"Нет доступа"})}}}};const ji=(0,eo.A)(Ki,[["render",Mt],["__scopeId","data-v-1beda590"]]);var Mi=ji},6844:function(e,t,o){o.d(t,{A:function(){return m}});var l=o(6768),i=o(4232),a=o(365);const n={class:"empty-state"},s={class:"empty-state__icon-wrapper"},r={class:"empty-state__title"},c={key:0,class:"empty-state__subtitle"};function u(e,t,o,u,d,v){return(0,l.uX)(),(0,l.CE)("div",n,[(0,l.Lk)("div",s,[(0,l.bF)(a.w,{icon:o.icon,size:"48",class:"empty-state__icon"},null,8,["icon"])]),(0,l.Lk)("h3",r,(0,i.v_)(o.title),1),o.subtitle?((0,l.uX)(),(0,l.CE)("p",c,(0,i.v_)(o.subtitle),1)):(0,l.Q3)("",!0),o.actionText?((0,l.uX)(),(0,l.CE)("button",{key:1,class:"empty-state__action",onClick:t[0]||(t[0]=t=>e.$emit("action"))},(0,i.v_)(o.actionText),1)):(0,l.Q3)("",!0)])}var d={name:"EmptyState",props:{icon:{type:String,default:"mdi-note-outline"},title:{type:String,required:!0},subtitle:{type:String,default:""},actionText:{type:String,default:""}},emits:["action"]},v=o(1241);const p=(0,v.A)(d,[["render",u],["__scopeId","data-v-5b7a5deb"]]);var m=p}}]);
//# sourceMappingURL=page-detail.64a5d227.js.map