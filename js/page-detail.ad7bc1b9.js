"use strict";(self["webpackChunkmini_notes_ui"]=self["webpackChunkmini_notes_ui"]||[]).push([[168],{6868:function(e,t,o){o.d(t,{A:function(){return m}});var l=o(6768),a=o(4232),i=o(365);const n={class:"empty-state"},s={class:"empty-state__icon-wrapper"},r={class:"empty-state__title"},c={key:0,class:"empty-state__subtitle"};function u(e,t,o,u,d,v){return(0,l.uX)(),(0,l.CE)("div",n,[(0,l.Lk)("div",s,[(0,l.bF)(i.w,{icon:o.icon,size:"48",class:"empty-state__icon"},null,8,["icon"])]),(0,l.Lk)("h3",r,(0,a.v_)(o.title),1),o.subtitle?((0,l.uX)(),(0,l.CE)("p",c,(0,a.v_)(o.subtitle),1)):(0,l.Q3)("",!0),o.actionText?((0,l.uX)(),(0,l.CE)("button",{key:1,class:"empty-state__action",onClick:t[0]||(t[0]=t=>e.$emit("action"))},(0,a.v_)(o.actionText),1)):(0,l.Q3)("",!0)])}var d={name:"EmptyState",props:{icon:{type:String,default:"mdi-note-outline"},title:{type:String,required:!0},subtitle:{type:String,default:""},actionText:{type:String,default:""}},emits:["action"]},v=o(1241);const p=(0,v.A)(d,[["render",u],["__scopeId","data-v-5b7a5deb"]]);var m=p},9206:function(e,t,o){o.r(t),o.d(t,{default:function(){return Na}});var l=o(6768),a=o(5130),i=o(4232),n=(o(3110),o(7536)),s=o(7579),r=o(1240),c=o(9759),u=o(423),d=o(329),v=o(6548),p=o(2225),m=o(8954),k=o(144),b=o(8392),h=o(4396),f=o(5081);const g=(0,b.j)({baseColor:String,divided:Boolean,direction:{type:String,default:"horizontal"},...(0,n.r)(),...(0,s.u)(),...(0,c.r)(),...(0,u.s)(),...(0,d.S)(),...(0,v.X)(),...(0,p.yx)(),...(0,m.gI)()},"VBtnGroup"),y=(0,h.RW)()({name:"VBtnGroup",props:g(),setup(e,t){let{slots:o}=t;const{themeClasses:a}=(0,p.NX)(e),{densityClasses:s}=(0,c.Q)(e),{borderClasses:v}=(0,n.M)(e),{elevationClasses:m}=(0,u.j)(e),{roundedClasses:b}=(0,d.v)(e);(0,r.Uh)({VBtn:{height:(0,k.lW)(()=>"horizontal"===e.direction?"auto":null),baseColor:(0,k.lW)(()=>e.baseColor),color:(0,k.lW)(()=>e.color),density:(0,k.lW)(()=>e.density),flat:!0,variant:(0,k.lW)(()=>e.variant)}}),(0,f.C)(()=>(0,l.bF)(e.tag,{class:(0,i.C4)(["v-btn-group",`v-btn-group--${e.direction}`,{"v-btn-group--divided":e.divided},a.value,v.value,s.value,m.value,b.value,e.class]),style:(0,i.Tr)(e.style)},o))}});var _=o(7071);const w=Symbol.for("vuetify:v-btn-toggle"),C=(0,b.j)({...g(),...(0,_.gL)()},"VBtnToggle");(0,h.RW)()({name:"VBtnToggle",props:C(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:o}=t;const{isSelected:a,next:i,prev:n,select:s,selected:r}=(0,_.dB)(e,w);return(0,f.C)(()=>{const t=y.filterProps(e);return(0,l.bF)(y,(0,l.v6)({class:["v-btn-toggle",e.class]},t,{style:e.style}),{default:()=>[o.default?.({isSelected:a,next:i,prev:n,select:s,selected:r})]})}),{next:i,prev:n,select:s}}});var E=o(6029),x=o(365),L=o(5043),T=(o(8111),o(116),o(8306));function I(e,t){const o=(0,k.KR)(),a=(0,k.IJ)(!1);if(T.tB){const i=new IntersectionObserver(t=>{e?.(t,i),a.value=!!t.find(e=>e.isIntersecting)},t);(0,k.jr)(()=>{i.disconnect()}),(0,l.wB)(o,(e,t)=>{t&&(i.unobserve(t),a.value=!1),e&&i.observe(e)},{flush:"post"})}return{intersectionRef:o,isIntersecting:a}}var S=o(7796),B=o(3935),F=o(7443);const D=(0,b.j)({bgColor:String,color:String,indeterminate:[Boolean,String],rounded:Boolean,modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...(0,s.u)(),...(0,B.k)(),...(0,v.X)({tag:"div"}),...(0,p.yx)()},"VProgressCircular"),A=(0,h.RW)()({name:"VProgressCircular",props:D(),setup(e,t){let{slots:o}=t;const a=20,n=2*Math.PI*a,s=(0,k.KR)(),{themeClasses:r}=(0,p.NX)(e),{sizeClasses:c,sizeStyles:u}=(0,B.X)(e),{textColorClasses:d,textColorStyles:v}=(0,L.aH)(()=>e.color),{textColorClasses:m,textColorStyles:b}=(0,L.aH)(()=>e.bgColor),{intersectionRef:h,isIntersecting:g}=I(),{resizeRef:y,contentRect:_}=(0,S.w)(),w=(0,k.lW)(()=>(0,F.qE)(parseFloat(e.modelValue),0,100)),C=(0,k.lW)(()=>Number(e.width)),E=(0,k.lW)(()=>u.value?Number(e.size):_.value?_.value.width:Math.max(C.value,32)),x=(0,k.lW)(()=>a/(1-C.value/E.value)*2),D=(0,k.lW)(()=>C.value/E.value*x.value),A=(0,k.lW)(()=>{const t=(100-w.value)/100*n;return e.rounded&&w.value>0&&w.value<100?(0,F.Dg)(Math.min(n-.01,t+D.value)):(0,F.Dg)(t)}),O=(0,l.EW)(()=>{const t=Number(e.rotate);return e.rounded?t+D.value/2/n*360:t});return(0,l.nT)(()=>{h.value=s.value,y.value=s.value}),(0,f.C)(()=>(0,l.bF)(e.tag,{ref:s,class:(0,i.C4)(["v-progress-circular",{"v-progress-circular--indeterminate":!!e.indeterminate,"v-progress-circular--visible":g.value,"v-progress-circular--disable-shrink":e.indeterminate&&("disable-shrink"===e.indeterminate||(0,T._e)())},r.value,c.value,d.value,e.class]),style:(0,i.Tr)([u.value,v.value,e.style]),role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.indeterminate?void 0:w.value},{default:()=>[(0,l.Lk)("svg",{style:{transform:`rotate(calc(-90deg + ${O.value}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${x.value} ${x.value}`},[(0,l.Lk)("circle",{class:(0,i.C4)(["v-progress-circular__underlay",m.value]),style:(0,i.Tr)(b.value),fill:"transparent",cx:"50%",cy:"50%",r:a,"stroke-width":D.value,"stroke-dasharray":n,"stroke-dashoffset":0},null),(0,l.Lk)("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:a,"stroke-width":D.value,"stroke-dasharray":n,"stroke-dashoffset":A.value,"stroke-linecap":e.rounded?"round":void 0},null)]),o.default&&(0,l.Lk)("div",{class:"v-progress-circular__content"},[o.default({value:w.value})])]})),{}}});var O=o(3627),R=o(2654),$=o(3398);const P=(0,b.j)({loading:[Boolean,String]},"loader");function W(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,$.M)();const o=(0,k.lW)(()=>({[`${t}--loading`]:e.loading}));return{loaderClasses:o}}var X=o(2046);const V=["top","bottom"],N=["start","end","left","right"];function z(e,t){let[o,l]=e.split(" ");return l||(l=(0,F.mK)(V,o)?"start":(0,F.mK)(N,o)?"top":"center"),{side:K(o,t),align:K(l,t)}}function K(e,t){return"start"===e?t?"right":"left":"end"===e?t?"left":"right":e}function j(e){return{side:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.side],align:e.align}}function M(e){return{side:e.side,align:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.align]}}function U(e){return{side:e.align,align:e.side}}function q(e){return(0,F.mK)(V,e.side)?"y":"x"}const H={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},Y=(0,b.j)({location:String},"location");function Q(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2?arguments[2]:void 0;const{isRtl:a}=(0,X.IA)(),i=(0,l.EW)(()=>{if(!e.location)return{};const{side:l,align:i}=z(e.location.split(" ").length>1?e.location:`${e.location} center`,a.value);function n(e){return o?o(e):0}const s={};return"center"!==l&&(t?s[H[l]]=`calc(100% - ${n(l)}px)`:s[l]=0),"center"!==i?t?s[H[i]]=`calc(100% - ${n(i)}px)`:s[i]=0:("center"===l?s.top=s.left="50%":s[{top:"left",bottom:"left",left:"top",right:"top"}[l]]="50%",s.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[l]),s});return{locationStyles:i}}const J=["static","relative","fixed","absolute","sticky"],G=(0,b.j)({position:{type:String,validator:e=>J.includes(e)}},"position");function Z(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,$.M)();const o=(0,k.lW)(()=>e.position?`${t}--${e.position}`:void 0);return{positionClasses:o}}var ee=o(7911);function te(e,t){(0,l.wB)(()=>e.isActive?.value,o=>{e.isLink.value&&null!=o&&t&&(0,l.dY)(()=>{t(o)})},{immediate:!0})}var oe=o(7354);const le=(0,b.j)({active:{type:Boolean,default:void 0},activeColor:String,baseColor:String,symbol:{type:null,default:w},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:R.TX,appendIcon:R.TX,block:Boolean,readonly:Boolean,slim:Boolean,stacked:Boolean,spaced:String,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},...(0,n.r)(),...(0,s.u)(),...(0,c.r)(),...(0,O.X)(),...(0,u.s)(),...(0,_.TX)(),...P(),...Y(),...G(),...(0,d.S)(),...(0,ee.WC)(),...(0,B.k)(),...(0,v.X)({tag:"button"}),...(0,p.yx)(),...(0,m.gI)({variant:"elevated"})},"VBtn"),ae=(0,h.RW)()({name:"VBtn",props:le(),emits:{"group:selected":e=>!0},setup(e,t){let{attrs:o,slots:a}=t;const{themeClasses:s}=(0,p.NX)(e),{borderClasses:r}=(0,n.M)(e),{densityClasses:v}=(0,c.Q)(e),{dimensionStyles:b}=(0,O.S)(e),{elevationClasses:h}=(0,u.j)(e),{loaderClasses:g}=W(e),{locationStyles:y}=Q(e),{positionClasses:w}=Z(e),{roundedClasses:C}=(0,d.v)(e),{sizeClasses:L,sizeStyles:T}=(0,B.X)(e),I=(0,_.aO)(e,e.symbol,!1),S=(0,ee.iE)(e,o),F=(0,l.EW)(()=>void 0!==e.active?e.active:S.isRouterLink.value?S.isActive?.value:I?.isSelected.value),D=(0,k.lW)(()=>F.value?e.activeColor??e.color:e.color),R=(0,l.EW)(()=>{const t=I?.isSelected.value&&(!S.isLink.value||S.isActive?.value)||!I||S.isActive?.value;return{color:t?D.value??e.baseColor:e.baseColor,variant:e.variant}}),{colorClasses:$,colorStyles:P,variantClasses:X}=(0,m.rn)(R),V=(0,l.EW)(()=>I?.disabled.value||e.disabled),N=(0,k.lW)(()=>"elevated"===e.variant&&!(e.disabled||e.flat||e.border)),z=(0,l.EW)(()=>{if(void 0!==e.value&&"symbol"!==typeof e.value)return Object(e.value)===e.value?JSON.stringify(e.value,null,0):e.value});function K(e){V.value||S.isLink.value&&(e.metaKey||e.ctrlKey||e.shiftKey||0!==e.button||"_blank"===o.target)||(S.isRouterLink.value?S.navigate?.(e):I?.toggle())}return te(S,I?.select),(0,f.C)(()=>{const t=S.isLink.value?"a":e.tag,o=!(!e.prependIcon&&!a.prepend),n=!(!e.appendIcon&&!a.append),c=!(!e.icon||!0===e.icon);return(0,l.bo)((0,l.bF)(t,(0,l.v6)(S.linkProps,{type:"a"===t?void 0:"button",class:["v-btn",I?.selectedClass.value,{"v-btn--active":F.value,"v-btn--block":e.block,"v-btn--disabled":V.value,"v-btn--elevated":N.value,"v-btn--flat":e.flat,"v-btn--icon":!!e.icon,"v-btn--loading":e.loading,"v-btn--readonly":e.readonly,"v-btn--slim":e.slim,"v-btn--stacked":e.stacked},e.spaced?["v-btn--spaced",`v-btn--spaced-${e.spaced}`]:[],s.value,r.value,$.value,v.value,h.value,g.value,w.value,C.value,L.value,X.value,e.class],style:[P.value,b.value,y.value,T.value,e.style],"aria-busy":!!e.loading||void 0,disabled:V.value&&"a"!==t||void 0,tabindex:e.loading||e.readonly?-1:void 0,onClick:K,value:z.value}),{default:()=>[(0,m.wN)(!0,"v-btn"),!e.icon&&o&&(0,l.Lk)("span",{key:"prepend",class:"v-btn__prepend"},[a.prepend?(0,l.bF)(E.K,{key:"prepend-defaults",disabled:!e.prependIcon,defaults:{VIcon:{icon:e.prependIcon}}},a.prepend):(0,l.bF)(x.w,{key:"prepend-icon",icon:e.prependIcon},null)]),(0,l.Lk)("span",{class:"v-btn__content","data-no-activator":""},[!a.default&&c?(0,l.bF)(x.w,{key:"content-icon",icon:e.icon},null):(0,l.bF)(E.K,{key:"content-defaults",disabled:!c,defaults:{VIcon:{icon:e.icon}}},{default:()=>[a.default?.()??(0,i.v_)(e.text)]})]),!e.icon&&n&&(0,l.Lk)("span",{key:"append",class:"v-btn__append"},[a.append?(0,l.bF)(E.K,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VIcon:{icon:e.appendIcon}}},a.append):(0,l.bF)(x.w,{key:"append-icon",icon:e.appendIcon},null)]),!!e.loading&&(0,l.Lk)("span",{key:"loader",class:"v-btn__loader"},[a.loader?.()??(0,l.bF)(A,{color:"boolean"===typeof e.loading?void 0:e.loading,indeterminate:!0,width:"2"},null)])]}),[[oe.A,!V.value&&e.ripple,"",{center:!!e.icon}]])}),{group:I}}});o(8237),o(4114),o(1701);var ie=o(9948);function ne(e,t){return{x:e.x+t.x,y:e.y+t.y}}function se(e,t){return{x:e.x-t.x,y:e.y-t.y}}function re(e,t){if("top"===e.side||"bottom"===e.side){const{side:o,align:l}=e,a="left"===l?0:"center"===l?t.width/2:"right"===l?t.width:l,i="top"===o?0:"bottom"===o?t.height:o;return ne({x:a,y:i},t)}if("left"===e.side||"right"===e.side){const{side:o,align:l}=e,a="left"===o?0:"right"===o?t.width:o,i="top"===l?0:"center"===l?t.height/2:"bottom"===l?t.height:l;return ne({x:a,y:i},t)}return ne({x:t.width/2,y:t.height/2},t)}class ce{constructor(e){const t=document.body.currentCSSZoom??1,o=e instanceof Element,l=o?1+(1-t)/t:1,{x:a,y:i,width:n,height:s}=o?e.getBoundingClientRect():e;this.x=a*l,this.y=i*l,this.width=n*l,this.height=s*l}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function ue(e,t){return{x:{before:Math.max(0,t.left-e.left),after:Math.max(0,e.right-t.right)},y:{before:Math.max(0,t.top-e.top),after:Math.max(0,e.bottom-t.bottom)}}}function de(e){if(Array.isArray(e)){const t=document.body.currentCSSZoom??1,o=1+(1-t)/t;return new ce({x:e[0]*o,y:e[1]*o,width:0*o,height:0*o})}return new ce(e)}function ve(e){if(e===document.documentElement){if(visualViewport){const e=document.body.currentCSSZoom??1;return new ce({x:visualViewport.scale>1?0:visualViewport.offsetLeft,y:visualViewport.scale>1?0:visualViewport.offsetTop,width:visualViewport.width*visualViewport.scale/e,height:visualViewport.height*visualViewport.scale/e})}return new ce({x:0,y:0,width:document.documentElement.clientWidth,height:document.documentElement.clientHeight})}return new ce(e)}function pe(e){const t=new ce(e),o=getComputedStyle(e),l=o.transform;if(l){let a,i,n,s,r;if(l.startsWith("matrix3d("))a=l.slice(9,-1).split(/, /),i=Number(a[0]),n=Number(a[5]),s=Number(a[12]),r=Number(a[13]);else{if(!l.startsWith("matrix("))return new ce(t);a=l.slice(7,-1).split(/, /),i=Number(a[0]),n=Number(a[3]),s=Number(a[4]),r=Number(a[5])}const c=o.transformOrigin,u=t.x-s-(1-i)*parseFloat(c),d=t.y-r-(1-n)*parseFloat(c.slice(c.indexOf(" ")+1)),v=i?t.width/i:e.offsetWidth+1,p=n?t.height/n:e.offsetHeight+1;return new ce({x:u,y:d,width:v,height:p})}return new ce(t)}function me(e,t,o){if("undefined"===typeof e.animate)return{finished:Promise.resolve()};let l;try{l=e.animate(t,o)}catch(a){return{finished:Promise.resolve()}}return"undefined"===typeof l.finished&&(l.finished=new Promise(e=>{l.onfinish=()=>{e(l)}})),l}function ke(e){while(e){if("fixed"===window.getComputedStyle(e).position)return!0;e=e.offsetParent}return!1}var be=o(7516);function he(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];while(e){if(t?ye(e):ge(e))return e;e=e.parentElement}return document.scrollingElement}function fe(e,t){const o=[];if(t&&e&&!t.contains(e))return o;while(e){if(ge(e)&&o.push(e),e===t)break;e=e.parentElement}return o}function ge(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e),o="scroll"===t.overflowY||"auto"===t.overflowY&&e.scrollHeight>e.clientHeight,l="scroll"===t.overflowX||"auto"===t.overflowX&&e.scrollWidth>e.clientWidth;return o||l}function ye(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e);return["scroll","auto"].includes(t.overflowY)}var _e=o(6455);const we={static:xe,connected:Te},Ce=(0,b.j)({locationStrategy:{type:[String,Function],default:"static",validator:e=>"function"===typeof e||e in we},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array],stickToTarget:Boolean,viewportMargin:{type:[Number,String],default:12}},"VOverlay-location-strategies");function Ee(e,t){const o=(0,k.KR)({}),a=(0,k.KR)();function i(e){a.value?.(e)}function n(e){a.value?.(e)}function s(e){a.value?.(e)}return T.ZK&&(0,ie.Y)(()=>!(!t.isActive.value||!e.locationStrategy),r=>{(0,l.wB)(()=>e.locationStrategy,r),(0,k.jr)(()=>{window.removeEventListener("resize",i),visualViewport?.removeEventListener("resize",n),visualViewport?.removeEventListener("scroll",s),a.value=void 0}),window.addEventListener("resize",i,{passive:!0}),visualViewport?.addEventListener("resize",n,{passive:!0}),visualViewport?.addEventListener("scroll",s,{passive:!0}),"function"===typeof e.locationStrategy?a.value=e.locationStrategy(t,e,o)?.updateLocation:a.value=we[e.locationStrategy](t,e,o)?.updateLocation}),{contentStyles:o,updateLocation:a}}function xe(){}function Le(e,t){const o=pe(e);return t?o.x+=parseFloat(e.style.right||0):o.x-=parseFloat(e.style.left||0),o.y-=parseFloat(e.style.top||0),o}function Te(e,t,o){const a=Array.isArray(e.target.value)||ke(e.target.value);a&&Object.assign(o.value,{position:"fixed",top:0,[e.isRtl.value?"right":"left"]:0});const{preferredAnchor:i,preferredOrigin:n}=(0,F.yc)(()=>{const o=z(t.location,e.isRtl.value),l="overlap"===t.origin?o:"auto"===t.origin?j(o):z(t.origin,e.isRtl.value);return o.side===l.side&&o.align===M(l).align?{preferredAnchor:U(o),preferredOrigin:U(l)}:{preferredAnchor:o,preferredOrigin:l}}),[s,r,c,u]=["minWidth","minHeight","maxWidth","maxHeight"].map(e=>(0,l.EW)(()=>{const o=parseFloat(t[e]);return isNaN(o)?1/0:o})),d=(0,l.EW)(()=>{if(Array.isArray(t.offset))return t.offset;if("string"===typeof t.offset){const e=t.offset.split(" ").map(parseFloat);return e.length<2&&e.push(0),e}return"number"===typeof t.offset?[t.offset,0]:[0,0]});let v=!1,p=-1;const m=new F.CZ(4),b=new ResizeObserver(()=>{if(!v)return;if(requestAnimationFrame(e=>{e!==p&&m.clear(),requestAnimationFrame(e=>{p=e})}),m.isFull){const e=m.values();if((0,be.b)(e.at(-1),e.at(-3))&&!(0,be.b)(e.at(-1),e.at(-2)))return}const e=f();e&&m.push(e.flipped)});let h=new ce({x:0,y:0,width:0,height:0});function f(){if(v=!1,requestAnimationFrame(()=>v=!0),!e.target.value||!e.contentEl.value)return;(Array.isArray(e.target.value)||e.target.value.offsetParent||e.target.value.getClientRects().length)&&(h=de(e.target.value));const l=Le(e.contentEl.value,e.isRtl.value),a=fe(e.contentEl.value),p=Number(t.viewportMargin);a.length||(a.push(document.documentElement),e.contentEl.value.style.top&&e.contentEl.value.style.left||(l.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),l.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const m=a.reduce((e,t)=>{const o=ve(t);return e?new ce({x:Math.max(e.left,o.left),y:Math.max(e.top,o.top),width:Math.min(e.right,o.right)-Math.max(e.left,o.left),height:Math.min(e.bottom,o.bottom)-Math.max(e.top,o.top)}):o},void 0);t.stickToTarget?(m.x+=Math.min(p,h.x),m.y+=Math.min(p,h.y),m.width=Math.max(m.width-2*p,h.x+h.width-p),m.height=Math.max(m.height-2*p,h.y+h.height-p)):(m.x+=p,m.y+=p,m.width-=2*p,m.height-=2*p);let k={anchor:i.value,origin:n.value};function b(e){const t=new ce(l),o=re(e.anchor,h),a=re(e.origin,t);let{x:i,y:n}=se(o,a);switch(e.anchor.side){case"top":n-=d.value[0];break;case"bottom":n+=d.value[0];break;case"left":i-=d.value[0];break;case"right":i+=d.value[0];break}switch(e.anchor.align){case"top":n-=d.value[1];break;case"bottom":n+=d.value[1];break;case"left":i-=d.value[1];break;case"right":i+=d.value[1];break}t.x+=i,t.y+=n,t.width=Math.min(t.width,c.value),t.height=Math.min(t.height,u.value);const s=ue(t,m);return{overflows:s,x:i,y:n}}let f=0,g=0;const y={x:0,y:0},_={x:!1,y:!1};let w=-1;while(1){if(w++>10){(0,_e.yA)("Infinite loop detected in connectedLocationStrategy");break}const{x:e,y:t,overflows:o}=b(k);f+=e,g+=t,l.x+=e,l.y+=t;{const e=q(k.anchor),t=o.x.before||o.x.after,l=o.y.before||o.y.after;let a=!1;if(["x","y"].forEach(i=>{if("x"===i&&t&&!_.x||"y"===i&&l&&!_.y){const t={anchor:{...k.anchor},origin:{...k.origin}},l="x"===i?"y"===e?M:j:"y"===e?j:M;t.anchor=l(t.anchor),t.origin=l(t.origin);const{overflows:n}=b(t);(n[i].before<=o[i].before&&n[i].after<=o[i].after||n[i].before+n[i].after<(o[i].before+o[i].after)/2)&&(k=t,a=_[i]=!0)}}),a)continue}o.x.before&&(f+=o.x.before,l.x+=o.x.before),o.x.after&&(f-=o.x.after,l.x-=o.x.after),o.y.before&&(g+=o.y.before,l.y+=o.y.before),o.y.after&&(g-=o.y.after,l.y-=o.y.after);{const e=ue(l,m);y.x=m.width-e.x.before-e.x.after,y.y=m.height-e.y.before-e.y.after,f+=e.x.before,l.x+=e.x.before,g+=e.y.before,l.y+=e.y.before}break}const C=q(k.anchor);return Object.assign(o.value,{"--v-overlay-anchor-origin":`${k.anchor.side} ${k.anchor.align}`,transformOrigin:`${k.origin.side} ${k.origin.align}`,top:(0,F.Dg)(Ie(g)),left:e.isRtl.value?void 0:(0,F.Dg)(Ie(f)),right:e.isRtl.value?(0,F.Dg)(Ie(-f)):void 0,minWidth:(0,F.Dg)("y"===C?Math.min(s.value,h.width):s.value),maxWidth:(0,F.Dg)(Se((0,F.qE)(y.x,s.value===1/0?0:s.value,c.value))),maxHeight:(0,F.Dg)(Se((0,F.qE)(y.y,r.value===1/0?0:r.value,u.value)))}),{available:y,contentBox:l,flipped:_}}return(0,l.wB)(e.target,(e,t)=>{t&&!Array.isArray(t)&&b.unobserve(t),Array.isArray(e)?(0,be.b)(e,t)||f():e&&b.observe(e)},{immediate:!0}),(0,l.wB)(e.contentEl,(e,t)=>{t&&b.unobserve(t),e&&b.observe(e)},{immediate:!0}),(0,k.jr)(()=>{b.disconnect()}),(0,l.wB)(()=>[i.value,n.value,t.offset,t.minWidth,t.minHeight,t.maxWidth,t.maxHeight],()=>f()),(0,l.dY)(()=>{const e=f();if(!e)return;const{available:t,contentBox:o}=e;o.height>t.y&&requestAnimationFrame(()=>{f(),requestAnimationFrame(()=>{f()})})}),{updateLocation:f}}function Ie(e){return Math.round(e*devicePixelRatio)/devicePixelRatio}function Se(e){return Math.ceil(e*devicePixelRatio)/devicePixelRatio}o(7588),o(7642),o(8004),o(3853),o(5876),o(2475),o(5024),o(1698);let Be=!0;const Fe=[];function De(e){!Be||Fe.length?(Fe.push(e),Oe()):(Be=!1,e(),Oe())}let Ae=-1;function Oe(){cancelAnimationFrame(Ae),Ae=requestAnimationFrame(()=>{const e=Fe.shift();e&&e(),Fe.length?Oe():Be=!0})}const Re={none:null,close:We,block:Xe,reposition:Ve},$e=(0,b.j)({scrollStrategy:{type:[String,Function],default:"block",validator:e=>"function"===typeof e||e in Re}},"VOverlay-scroll-strategies");function Pe(e,t){if(!T.ZK)return;let o;(0,l.nT)(async()=>{o?.stop(),t.isActive.value&&e.scrollStrategy&&(o=(0,k.uY)(),await new Promise(e=>setTimeout(e)),o.active&&o.run(()=>{"function"===typeof e.scrollStrategy?e.scrollStrategy(t,e,o):Re[e.scrollStrategy]?.(t,e,o)}))}),(0,k.jr)(()=>{o?.stop()})}function We(e){function t(t){e.isActive.value=!1}ze(Ne(e.target.value,e.contentEl.value),t)}function Xe(e,t){const o=e.root.value?.offsetParent,l=Ne(e.target.value,e.contentEl.value),a=[...new Set([...fe(l,t.contained?o:void 0),...fe(e.contentEl.value,t.contained?o:void 0)])].filter(e=>!e.classList.contains("v-overlay-scroll-blocked")),i=window.innerWidth-document.documentElement.offsetWidth,n=(e=>ge(e)&&e)(o||document.documentElement);n&&e.root.value.classList.add("v-overlay--scroll-blocked"),a.forEach((e,t)=>{e.style.setProperty("--v-body-scroll-x",(0,F.Dg)(-e.scrollLeft)),e.style.setProperty("--v-body-scroll-y",(0,F.Dg)(-e.scrollTop)),e!==document.documentElement&&e.style.setProperty("--v-scrollbar-offset",(0,F.Dg)(i)),e.classList.add("v-overlay-scroll-blocked")}),(0,k.jr)(()=>{a.forEach((e,t)=>{const o=parseFloat(e.style.getPropertyValue("--v-body-scroll-x")),l=parseFloat(e.style.getPropertyValue("--v-body-scroll-y")),a=e.style.scrollBehavior;e.style.scrollBehavior="auto",e.style.removeProperty("--v-body-scroll-x"),e.style.removeProperty("--v-body-scroll-y"),e.style.removeProperty("--v-scrollbar-offset"),e.classList.remove("v-overlay-scroll-blocked"),e.scrollLeft=-o,e.scrollTop=-l,e.style.scrollBehavior=a}),n&&e.root.value.classList.remove("v-overlay--scroll-blocked")})}function Ve(e,t,o){let l=!1,a=-1,i=-1;function n(t){De(()=>{const o=performance.now();e.updateLocation.value?.(t);const a=performance.now()-o;l=a/(1e3/60)>2})}i=("undefined"===typeof requestIdleCallback?e=>e():requestIdleCallback)(()=>{o.run(()=>{ze(Ne(e.target.value,e.contentEl.value),e=>{l?(cancelAnimationFrame(a),a=requestAnimationFrame(()=>{a=requestAnimationFrame(()=>{n(e)})})):n(e)})})}),(0,k.jr)(()=>{"undefined"!==typeof cancelIdleCallback&&cancelIdleCallback(i),cancelAnimationFrame(a)})}function Ne(e,t){return Array.isArray(e)?document.elementsFromPoint(...e).find(e=>!t?.contains(e)):e??t}function ze(e,t){const o=[document,...fe(e)];o.forEach(e=>{e.addEventListener("scroll",t,{passive:!0})}),(0,k.jr)(()=>{o.forEach(e=>{e.removeEventListener("scroll",t)})})}const Ke=Symbol.for("vuetify:v-menu"),je=(0,b.j)({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function Me(e,t){let o=()=>{};function l(l,a){o?.();const i=l?e.openDelay:e.closeDelay,n=Math.max(a?.minDelay??0,Number(i??0));return new Promise(e=>{o=(0,F.v6)(n,()=>{t?.(l),e(l)})})}function a(){return l(!0)}function i(e){return l(!1,e)}return{clearDelay:o,runOpenDelay:a,runCloseDelay:i}}o(805),o(3525);const Ue=new WeakMap;function qe(e,t){Object.keys(t).forEach(o=>{if((0,F.Mp)(o)){const l=(0,F.eq)(o),a=Ue.get(e);if(null==t[o])a?.forEach(t=>{const[o,i]=t;o===l&&(e.removeEventListener(l,i),a.delete(t))});else if(!a||![...a]?.some(e=>e[0]===l&&e[1]===t[o])){e.addEventListener(l,t[o]);const i=a||new Set;i.add([l,t[o]]),Ue.has(e)||Ue.set(e,i)}}else null==t[o]?e.removeAttribute(o):e.setAttribute(o,t[o])})}function He(e,t){Object.keys(t).forEach(t=>{if((0,F.Mp)(t)){const o=(0,F.eq)(t),l=Ue.get(e);l?.forEach(t=>{const[a,i]=t;a===o&&(e.removeEventListener(o,i),l.delete(t))})}else e.removeAttribute(t)})}const Ye=(0,b.j)({target:[String,Object],activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...je()},"VOverlay-activator");function Qe(e,t){let{isActive:o,isTop:a,contentEl:i}=t;const n=(0,$.n)("useActivator"),s=(0,k.KR)();let r=!1,c=!1,u=!0;const d=(0,l.EW)(()=>e.openOnFocus||null==e.openOnFocus&&e.openOnHover),v=(0,l.EW)(()=>e.openOnClick||null==e.openOnClick&&!e.openOnHover&&!d.value),{runOpenDelay:p,runCloseDelay:m}=Me(e,t=>{t!==(e.openOnHover&&r||d.value&&c)||e.openOnHover&&o.value&&!a.value||(o.value!==t&&(u=!0),o.value=t)}),b=(0,k.KR)(),h={onClick:e=>{e.stopPropagation(),s.value=e.currentTarget||e.target,o.value||(b.value=[e.clientX,e.clientY]),o.value=!o.value},onMouseenter:e=>{r=!0,s.value=e.currentTarget||e.target,p()},onMouseleave:e=>{r=!1,m()},onFocus:e=>{!1!==(0,F.B5)(e.target,":focus-visible")&&(c=!0,e.stopPropagation(),s.value=e.currentTarget||e.target,p())},onBlur:e=>{c=!1,e.stopPropagation(),m({minDelay:1})}},f=(0,l.EW)(()=>{const t={};return v.value&&(t.onClick=h.onClick),e.openOnHover&&(t.onMouseenter=h.onMouseenter,t.onMouseleave=h.onMouseleave),d.value&&(t.onFocus=h.onFocus,t.onBlur=h.onBlur),t}),g=(0,l.EW)(()=>{const t={};if(e.openOnHover&&(t.onMouseenter=()=>{r=!0,p()},t.onMouseleave=()=>{r=!1,m()}),d.value&&(t.onFocusin=e=>{e.target.matches(":focus-visible")&&(c=!0,p())},t.onFocusout=()=>{c=!1,m({minDelay:1})}),e.closeOnContentClick){const e=(0,l.WQ)(Ke,null);t.onClick=()=>{o.value=!1,e?.closeParents()}}return t}),y=(0,l.EW)(()=>{const t={};return e.openOnHover&&(t.onMouseenter=()=>{u&&(r=!0,u=!1,p())},t.onMouseleave=()=>{r=!1,m()}),t});(0,l.wB)(a,t=>{!t||(!e.openOnHover||r||d.value&&c)&&(!d.value||c||e.openOnHover&&r)||i.value?.contains(document.activeElement)||(o.value=!1)}),(0,l.wB)(o,e=>{e||setTimeout(()=>{b.value=void 0})},{flush:"post"});const _=(0,F.m)();(0,l.nT)(()=>{_.value&&(0,l.dY)(()=>{s.value=_.el})});const w=(0,F.m)(),C=(0,l.EW)(()=>"cursor"===e.target&&b.value?b.value:w.value?w.el:Ge(e.target,n)||s.value),E=(0,l.EW)(()=>Array.isArray(C.value)?void 0:C.value);let x;return(0,l.wB)(()=>!!e.activator,t=>{t&&T.ZK?(x=(0,k.uY)(),x.run(()=>{Je(e,n,{activatorEl:s,activatorEvents:f})})):x&&x.stop()},{flush:"post",immediate:!0}),(0,k.jr)(()=>{x?.stop()}),{activatorEl:s,activatorRef:_,target:C,targetEl:E,targetRef:w,activatorEvents:f,contentEvents:g,scrimEvents:y}}function Je(e,t,o){let{activatorEl:a,activatorEvents:i}=o;function n(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r(),o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.activatorProps;t&&qe(t,(0,l.v6)(i.value,o))}function s(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r(),o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.activatorProps;t&&He(t,(0,l.v6)(i.value,o))}function r(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.activator;const l=Ge(o,t);return a.value=l?.nodeType===Node.ELEMENT_NODE?l:void 0,a.value}(0,l.wB)(()=>e.activator,(e,t)=>{if(t&&e!==t){const e=r(t);e&&s(e)}e&&(0,l.dY)(()=>n())},{immediate:!0}),(0,l.wB)(()=>e.activatorProps,()=>{n()}),(0,k.jr)(()=>{s()})}function Ge(e,t){if(!e)return;let o;if("parent"===e){let e=t?.proxy?.$el?.parentNode;while(e?.hasAttribute("data-no-activator"))e=e.parentNode;o=e}else o="string"===typeof e?document.querySelector(e):"$el"in e?e.$el:e;return o}o(2489),o(7254),o(7036);const Ze=(0,b.j)({retainFocus:Boolean,captureFocus:Boolean,disableInitialFocus:Boolean},"focusTrap"),et=new Map;let tt=0;function ot(e){const t=document.activeElement;if("Tab"!==e.key||!t)return;const o=Array.from(et.values()).filter(e=>{let{isActive:o,contentEl:l}=e;return o.value&&l.value?.contains(t)}).map(e=>e.contentEl.value);let l,a=t.parentElement;while(a){if(o.includes(a)){l=a;break}a=a.parentElement}if(!l)return;const i=(0,F.OW)(l).filter(e=>e.tabIndex>=0);if(!i.length)return;const n=document.activeElement;if(1===i.length&&i[0].classList.contains("v-list")&&i[0].contains(n))return void e.preventDefault();const s=i[0],r=i[i.length-1];e.shiftKey&&(n===s||s.classList.contains("v-list")&&s.contains(n))&&(e.preventDefault(),r.focus()),!e.shiftKey&&(n===r||r.classList.contains("v-list")&&r.contains(n))&&(e.preventDefault(),s.focus())}function lt(e,t){let{isActive:o,localTop:a,activatorEl:i,contentEl:n}=t;const s=Symbol("trap");let r=!1,c=-1;async function u(){r=!0,c=window.setTimeout(()=>{r=!1},100)}async function d(e){const t=e.relatedTarget,i=e.target;if(document.removeEventListener("pointerdown",u),document.removeEventListener("keydown",v),await(0,l.dY)(),o.value&&!r&&t!==i&&n.value&&(0,k.BA)(a)&&![document,n.value].includes(i)&&!n.value.contains(i)){const e=(0,F.OW)(n.value);e[0]?.focus()}}function v(e){if("Tab"===e.key&&(document.removeEventListener("keydown",v),o.value&&n.value&&e.target&&!n.value.contains(e.target))){const t=(0,F.OW)(document.documentElement);if(e.shiftKey&&e.target===t.at(0)||!e.shiftKey&&e.target===t.at(-1)){const t=(0,F.OW)(n.value);t.length>0&&(e.preventDefault(),t[0].focus())}}}const p=(0,k.lW)(()=>o.value&&e.captureFocus&&!e.disableInitialFocus);T.ZK&&((0,l.wB)(()=>e.retainFocus,e=>{e?et.set(s,{isActive:o,contentEl:n}):et.delete(s)},{immediate:!0}),(0,l.wB)(p,e=>{e?(document.addEventListener("pointerdown",u),document.addEventListener("focusin",d,{once:!0}),document.addEventListener("keydown",v)):(document.removeEventListener("pointerdown",u),document.removeEventListener("focusin",d),document.removeEventListener("keydown",v))},{immediate:!0}),tt++<1&&document.addEventListener("keydown",ot)),(0,k.jr)(()=>{et.delete(s),clearTimeout(c),document.removeEventListener("pointerdown",u),document.removeEventListener("focusin",d),document.removeEventListener("keydown",v),--tt<1&&document.removeEventListener("keydown",ot)})}var at=o(2834);function it(){if(!T.ZK)return(0,k.IJ)(!1);const{ssr:e}=(0,at._F)();if(e){const e=(0,k.IJ)(!1);return(0,l.sV)(()=>{e.value=!0}),e}return(0,k.IJ)(!0)}const nt=(0,b.j)({eager:Boolean},"lazy");function st(e,t){const o=(0,k.IJ)(!1),a=(0,k.lW)(()=>o.value||e.eager||t.value);function i(){e.eager||(o.value=!1)}return(0,l.wB)(t,()=>o.value=!0),{isBooted:o,hasContent:a,onAfterLeave:i}}var rt=o(8432);function ct(){const e=(0,$.n)("useScopeId"),t=e.vnode.scopeId;return{scopeId:t?{[t]:""}:void 0}}const ut=Symbol.for("vuetify:stack"),dt=(0,k.Kh)([]);function vt(e,t,o){const a=(0,$.n)("useStack"),i=!o,n=(0,l.WQ)(ut,void 0),s=(0,k.Kh)({activeChildren:new Set});(0,l.Gt)(ut,s);const r=(0,k.IJ)(Number((0,k.BA)(t)));(0,ie.Y)(e,()=>{const e=dt.at(-1)?.[1];r.value=e?e+10:Number((0,k.BA)(t)),i&&dt.push([a.uid,r.value]),n?.activeChildren.add(a.uid),(0,k.jr)(()=>{if(i){const e=(0,k.ux)(dt).findIndex(e=>e[0]===a.uid);dt.splice(e,1)}n?.activeChildren.delete(a.uid)})});const c=(0,k.IJ)(!0);i&&(0,l.nT)(()=>{const e=dt.at(-1)?.[0]===a.uid;setTimeout(()=>c.value=e)});const u=(0,k.lW)(()=>!s.activeChildren.size);return{globalTop:(0,k.tB)(c),localTop:u,stackStyles:(0,k.lW)(()=>({zIndex:r.value}))}}function pt(e){const t=(0,l.EW)(()=>{const t=e();if(!0===t||!T.ZK)return;const o=!1===t?document.body:"string"===typeof t?document.querySelector(t):t;if(null==o)return void(0,l.R8)(`Unable to locate target ${t}`);let a=[...o.children].find(e=>e.matches(".v-overlay-container"));return a||(a=document.createElement("div"),a.className="v-overlay-container",o.appendChild(a)),a});return{teleportTarget:t}}var mt=o(5937);o(3579);function kt(e){if("function"!==typeof e.getRootNode){while(e.parentNode)e=e.parentNode;return e!==document?null:document}const t=e.getRootNode();return t!==document&&t.getRootNode({composed:!0})!==document?null:t}function bt(){return!0}function ht(e,t,o){if(!e||!1===ft(e,o))return!1;const l=kt(t);if("undefined"!==typeof ShadowRoot&&l instanceof ShadowRoot&&l.host===e.target)return!1;const a=("object"===typeof o.value&&o.value.include||(()=>[]))();return a.push(t),!a.some(t=>t?.contains(e.target))}function ft(e,t){const o="object"===typeof t.value&&t.value.closeConditional||bt;return o(e)}function gt(e,t,o){const l="function"===typeof o.value?o.value:o.value.handler;e.shadowTarget=e.target,t._clickOutside.lastMousedownWasOutside&&ht(e,t,o)&&setTimeout(()=>{ft(e,o)&&l&&l(e)},0)}function yt(e,t){const o=kt(e);t(document),"undefined"!==typeof ShadowRoot&&o instanceof ShadowRoot&&t(o)}const _t={mounted(e,t){const o=o=>gt(o,e,t),l=o=>{e._clickOutside.lastMousedownWasOutside=ht(o,e,t)};yt(e,e=>{e.addEventListener("click",o,!0),e.addEventListener("mousedown",l,!0)}),e._clickOutside||(e._clickOutside={lastMousedownWasOutside:!1}),e._clickOutside[t.instance.$.uid]={onClick:o,onMousedown:l}},beforeUnmount(e,t){e._clickOutside&&(yt(e,o=>{if(!o||!e._clickOutside?.[t.instance.$.uid])return;const{onClick:l,onMousedown:a}=e._clickOutside[t.instance.$.uid];o.removeEventListener("click",l,!0),o.removeEventListener("mousedown",a,!0)}),delete e._clickOutside[t.instance.$.uid])}};var wt=_t,Ct=o(1101);function Et(e){const{modelValue:t,color:o,...i}=e;return(0,l.bF)(a.eB,{name:"fade-transition",appear:!0},{default:()=>[e.modelValue&&(0,l.Lk)("div",(0,l.v6)({class:["v-overlay__scrim",e.color.backgroundColorClasses.value],style:e.color.backgroundColorStyles.value},i),null)]})}const xt=(0,b.j)({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,opacity:[Number,String],noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...Ye(),...(0,s.u)(),...(0,O.X)(),...nt(),...Ce(),...$e(),...Ze(),...(0,p.yx)(),...(0,mt.m)()},"VOverlay"),Lt=(0,h.RW)()({name:"VOverlay",directives:{vClickOutside:wt},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...(0,F.cJ)(xt(),["disableInitialFocus"])},emits:{"click:outside":e=>!0,"update:modelValue":e=>!0,keydown:e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,t){let{slots:o,attrs:i,emit:n}=t;const s=(0,$.n)("VOverlay"),r=(0,k.KR)(),c=(0,k.KR)(),u=(0,k.KR)(),d=(0,rt.q)(e,"modelValue"),v=(0,l.EW)({get:()=>d.value,set:t=>{t&&e.disabled||(d.value=t)}}),{themeClasses:m}=(0,p.NX)(e),{rtlClasses:b,isRtl:h}=(0,X.IA)(),{hasContent:g,onAfterLeave:y}=st(e,v),_=(0,L.z6)(()=>"string"===typeof e.scrim?e.scrim:null),{globalTop:w,localTop:C,stackStyles:E}=vt(v,()=>e.zIndex,e._disableGlobalStack),{activatorEl:x,activatorRef:I,target:S,targetEl:B,targetRef:D,activatorEvents:A,contentEvents:R,scrimEvents:P}=Qe(e,{isActive:v,isTop:C,contentEl:u}),{teleportTarget:W}=pt(()=>{const t=e.attach||e.contained;if(t)return t;const o=x?.value?.getRootNode()||s.proxy?.$el?.getRootNode();return o instanceof ShadowRoot&&o}),{dimensionStyles:V}=(0,O.S)(e),N=it(),{scopeId:z}=ct();(0,l.wB)(()=>e.disabled,e=>{e&&(v.value=!1)});const{contentStyles:K,updateLocation:j}=Ee(e,{isRtl:h,contentEl:u,target:S,isActive:v});function M(t){n("click:outside",t),e.persistent?J():v.value=!1}function U(t){return v.value&&C.value&&(!e.scrim||t.target===c.value||t instanceof MouseEvent&&t.shadowTarget===c.value)}function q(t){"Escape"===t.key&&w.value&&(u.value?.contains(document.activeElement)||n("keydown",t),e.persistent?J():(v.value=!1,u.value?.contains(document.activeElement)&&x.value?.focus()))}function H(e){("Escape"!==e.key||w.value)&&n("keydown",e)}Pe(e,{root:r,contentEl:u,targetEl:B,target:S,isActive:v,updateLocation:j}),lt(e,{isActive:v,localTop:C,contentEl:u,activatorEl:x}),T.ZK&&(0,l.wB)(v,e=>{e?window.addEventListener("keydown",q):window.removeEventListener("keydown",q)},{immediate:!0}),(0,l.xo)(()=>{T.ZK&&window.removeEventListener("keydown",q)});const Y=(0,ee.rd)();(0,ie.Y)(()=>e.closeOnBack,()=>{(0,ee.zE)(Y,t=>{w.value&&v.value?(t(!1),e.persistent?J():v.value=!1):t()})});const Q=(0,k.KR)();function J(){e.noClickAnimation||u.value&&me(u.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:Ct.B2})}function G(){n("afterEnter")}function Z(){y(),n("afterLeave")}return(0,l.wB)(()=>v.value&&(e.absolute||e.contained)&&null==W.value,e=>{if(e){const e=he(r.value);e&&e!==document.scrollingElement&&(Q.value=e.scrollTop)}}),(0,f.C)(()=>(0,l.Lk)(l.FK,null,[o.activator?.({isActive:v.value,targetRef:D,props:(0,l.v6)({ref:I},A.value,e.activatorProps)}),N.value&&g.value&&(0,l.bF)(l.Im,{disabled:!W.value,to:W.value},{default:()=>[(0,l.Lk)("div",(0,l.v6)({class:["v-overlay",{"v-overlay--absolute":e.absolute||e.contained,"v-overlay--active":v.value,"v-overlay--contained":e.contained},m.value,b.value,e.class],style:[E.value,{"--v-overlay-opacity":e.opacity,top:(0,F.Dg)(Q.value)},e.style],ref:r,onKeydown:H},z,i),[(0,l.bF)(Et,(0,l.v6)({color:_,modelValue:v.value&&!!e.scrim,ref:c},P.value),null),(0,l.bF)(mt.M,{appear:!0,persisted:!0,transition:e.transition,target:S.value,onAfterEnter:G,onAfterLeave:Z},{default:()=>[(0,l.bo)((0,l.Lk)("div",(0,l.v6)({ref:u,class:["v-overlay__content",e.contentClass],style:[V.value,K.value]},R.value,e.contentProps),[o.default?.({isActive:v})]),[[a.aG,v.value],[wt,{handler:M,closeConditional:U,include:()=>[x.value]}]])]})])]})])),{activatorEl:x,scrimEl:c,target:S,animateClick:J,contentEl:u,rootEl:r,globalTop:w,localTop:C,updateLocation:j}}}),Tt=(0,b.j)({chunkCount:{type:[Number,String],default:null},chunkWidth:{type:[Number,String],default:null},chunkGap:{type:[Number,String],default:4}},"chunks");function It(e,t){const o=(0,k.lW)(()=>!!e.chunkCount||!!e.chunkWidth),a=(0,l.EW)(()=>{const o=(0,k.BA)(t);if(!o)return 0;if(!e.chunkCount)return Number(e.chunkWidth);const l=Number(e.chunkCount),a=o-Number(e.chunkGap)*(l-1);return a/l}),i=(0,k.lW)(()=>Number(e.chunkGap)),n=(0,l.EW)(()=>{if(!o.value)return{};const e=(0,F.Dg)(i.value),t=(0,F.Dg)(a.value);return{maskRepeat:"repeat-x",maskImage:`linear-gradient(90deg, #000, #000 ${t}, transparent ${t}, transparent)`,maskSize:`calc(${t} + ${e}) 100%`}});function s(e){const o=(0,k.BA)(t);if(!o)return e;const l=100*i.value/o,n=100*(a.value+i.value)/o,s=Math.floor((e+l)/n);return(0,F.qE)(0,s*n-l/2,100)}return{hasChunks:o,chunksMaskStyles:n,snapValueToChunk:s}}const St=(0,b.j)({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},bufferColor:String,bufferOpacity:[Number,String],clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},opacity:[Number,String],reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...Tt(),...(0,s.u)(),...Y({location:"top"}),...(0,d.S)(),...(0,v.X)(),...(0,p.yx)()},"VProgressLinear"),Bt=(0,h.RW)()({name:"VProgressLinear",props:St(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:o}=t;const n=(0,k.KR)(),s=(0,rt.q)(e,"modelValue"),{isRtl:r,rtlClasses:c}=(0,X.IA)(),{themeClasses:u}=(0,p.NX)(e),{locationStyles:v}=Q(e),{textColorClasses:m,textColorStyles:b}=(0,L.aH)(()=>e.color),{backgroundColorClasses:h,backgroundColorStyles:g}=(0,L.z6)(()=>e.bgColor||e.color),{backgroundColorClasses:y,backgroundColorStyles:_}=(0,L.z6)(()=>e.bufferColor||e.bgColor||e.color),{backgroundColorClasses:w,backgroundColorStyles:C}=(0,L.z6)(()=>e.color),{roundedClasses:E}=(0,d.v)(e),{intersectionRef:x,isIntersecting:T}=I(),B=(0,l.EW)(()=>parseFloat(e.max)),D=(0,l.EW)(()=>parseFloat(e.height)),A=(0,l.EW)(()=>(0,F.qE)(parseFloat(e.bufferValue)/B.value*100,0,100)),O=(0,l.EW)(()=>(0,F.qE)(parseFloat(s.value)/B.value*100,0,100)),R=(0,l.EW)(()=>r.value!==e.reverse),$=(0,l.EW)(()=>e.indeterminate?"fade-transition":"slide-x-transition"),P=(0,k.IJ)(0),{hasChunks:W,chunksMaskStyles:V,snapValueToChunk:N}=It(e,P);(0,ie.Y)(W,()=>{const{resizeRef:e}=(0,S.w)(e=>P.value=e[0].contentRect.width);(0,l.nT)(()=>e.value=n.value)});const z=(0,l.EW)(()=>W.value?N(A.value):A.value),K=(0,l.EW)(()=>W.value?N(O.value):O.value);function j(e){if(!x.value)return;const{left:t,right:o,width:l}=x.value.getBoundingClientRect(),a=R.value?l-e.clientX+(o-l):e.clientX-t;s.value=Math.round(a/l*B.value)}return(0,l.nT)(()=>{x.value=n.value}),(0,f.C)(()=>(0,l.bF)(e.tag,{ref:n,class:(0,i.C4)(["v-progress-linear",{"v-progress-linear--absolute":e.absolute,"v-progress-linear--active":e.active&&T.value,"v-progress-linear--reverse":R.value,"v-progress-linear--rounded":e.rounded,"v-progress-linear--rounded-bar":e.roundedBar,"v-progress-linear--striped":e.striped,"v-progress-linear--clickable":e.clickable},E.value,u.value,c.value,e.class]),style:(0,i.Tr)([{bottom:"bottom"===e.location?0:void 0,top:"top"===e.location?0:void 0,height:e.active?(0,F.Dg)(D.value):0,"--v-progress-linear-height":(0,F.Dg)(D.value),...e.absolute?v.value:{}},V.value,e.style]),role:"progressbar","aria-hidden":e.active?"false":"true","aria-valuemin":"0","aria-valuemax":e.max,"aria-valuenow":e.indeterminate?void 0:Math.min(parseFloat(s.value),B.value),onClick:e.clickable&&j},{default:()=>[e.stream&&(0,l.Lk)("div",{key:"stream",class:(0,i.C4)(["v-progress-linear__stream",m.value]),style:{...b.value,[R.value?"left":"right"]:(0,F.Dg)(-D.value),borderTop:`${(0,F.Dg)(D.value/2)} dotted`,opacity:parseFloat(e.bufferOpacity),top:`calc(50% - ${(0,F.Dg)(D.value/4)})`,width:(0,F.Dg)(100-A.value,"%"),"--v-progress-linear-stream-to":(0,F.Dg)(D.value*(R.value?1:-1))}},null),(0,l.Lk)("div",{class:(0,i.C4)(["v-progress-linear__background",h.value]),style:(0,i.Tr)([g.value,{opacity:parseFloat(e.bgOpacity),width:e.stream?0:void 0}])},null),(0,l.Lk)("div",{class:(0,i.C4)(["v-progress-linear__buffer",y.value]),style:(0,i.Tr)([_.value,{opacity:parseFloat(e.bufferOpacity),width:(0,F.Dg)(z.value,"%")}])},null),(0,l.bF)(a.eB,{name:$.value},{default:()=>[e.indeterminate?(0,l.Lk)("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(e=>(0,l.Lk)("div",{key:e,class:(0,i.C4)(["v-progress-linear__indeterminate",e,w.value]),style:(0,i.Tr)(C.value)},null))]):(0,l.Lk)("div",{class:(0,i.C4)(["v-progress-linear__determinate",w.value]),style:(0,i.Tr)([C.value,{width:(0,F.Dg)(K.value,"%")}])},null)]}),o.default&&(0,l.Lk)("div",{class:"v-progress-linear__content"},[o.default({value:O.value,buffer:A.value})])]})),{}}});var Ft=o(9592);const Dt=Symbol("Forwarded refs");function At(e,t){let o=e;while(o){const e=Reflect.getOwnPropertyDescriptor(o,t);if(e)return e;o=Object.getPrototypeOf(o)}}function Ot(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),l=1;l<t;l++)o[l-1]=arguments[l];return e[Dt]=o,new Proxy(e,{get(e,t){if(Reflect.has(e,t))return Reflect.get(e,t);if("symbol"!==typeof t&&!t.startsWith("$")&&!t.startsWith("__"))for(const l of o)if(l.value&&Reflect.has(l.value,t)){const e=Reflect.get(l.value,t);return"function"===typeof e?e.bind(l.value):e}},has(e,t){if(Reflect.has(e,t))return!0;if("symbol"===typeof t||t.startsWith("$")||t.startsWith("__"))return!1;for(const l of o)if(l.value&&Reflect.has(l.value,t))return!0;return!1},set(e,t,l){if(Reflect.has(e,t))return Reflect.set(e,t,l);if("symbol"===typeof t||t.startsWith("$")||t.startsWith("__"))return!1;for(const a of o)if(a.value&&Reflect.has(a.value,t))return Reflect.set(a.value,t,l);return!1},getOwnPropertyDescriptor(e,t){const l=Reflect.getOwnPropertyDescriptor(e,t);if(l)return l;if("symbol"!==typeof t&&!t.startsWith("$")&&!t.startsWith("__")){for(const e of o){if(!e.value)continue;const o=At(e.value,t)??("_"in e.value?At(e.value._?.setupState,t):void 0);if(o)return o}for(const e of o){const o=e.value&&e.value[Dt];if(!o)continue;const l=o.slice();while(l.length){const e=l.shift(),o=At(e.value,t);if(o)return o;const a=e.value&&e.value[Dt];a&&l.push(...a)}}}}})}function Rt(e){const t=(0,k.IJ)(e());let o=-1;function a(){clearInterval(o)}function i(){a(),(0,l.dY)(()=>t.value=e())}function n(l){const i=l?getComputedStyle(l):{transitionDuration:.2},n=1e3*parseFloat(i.transitionDuration)||200;if(a(),t.value<=0)return;const s=performance.now();o=window.setInterval(()=>{const o=performance.now()-s+n;t.value=Math.max(e()-o,0),t.value<=0&&a()},n)}return(0,k.jr)(a),{clear:a,time:t,start:n,reset:i}}const $t=(0,b.j)({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...Y({location:"bottom"}),...G(),...(0,d.S)(),...(0,m.gI)(),...(0,p.yx)(),...(0,F.cJ)(xt({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","retainFocus","captureFocus","disableInitialFocus","scrim","scrollStrategy","stickToTarget","viewportMargin"])},"VSnackbar"),Pt=(0,h.RW)()({name:"VSnackbar",props:$t(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:o}=t;const a=(0,rt.q)(e,"modelValue"),{positionClasses:i}=Z(e),{scopeId:n}=ct(),{themeClasses:s}=(0,p.NX)(e),{colorClasses:r,colorStyles:c,variantClasses:u}=(0,m.rn)(e),{roundedClasses:v}=(0,d.v)(e),b=Rt(()=>Number(e.timeout)),h=(0,k.KR)(),g=(0,k.KR)(),y=(0,k.IJ)(!1),_=(0,k.IJ)(0),w=(0,k.KR)(),C=(0,l.WQ)(Ft.aF,void 0);(0,ie.Y)(()=>!!C,()=>{const e=(0,Ft.gK)();(0,l.nT)(()=>{w.value=e.mainStyles.value})}),(0,l.wB)(a,L),(0,l.wB)(()=>e.timeout,L),(0,l.sV)(()=>{a.value&&L()});let x=-1;function L(){b.reset(),window.clearTimeout(x);const t=Number(e.timeout);if(!a.value||-1===t)return;const o=(0,F._p)(g.value);b.start(o),x=window.setTimeout(()=>{a.value=!1},t)}function T(){b.reset(),window.clearTimeout(x)}function I(){y.value=!0,T()}function S(){y.value=!1,L()}function B(e){_.value=e.touches[0].clientY}function D(e){Math.abs(_.value-e.changedTouches[0].clientY)>50&&(a.value=!1)}function A(){y.value&&S()}const O=(0,l.EW)(()=>e.location.split(" ").reduce((e,t)=>(e[`v-snackbar--${t}`]=!0,e),{}));return(0,f.C)(()=>{const t=Lt.filterProps(e),d=!!(o.default||o.text||e.text);return(0,l.bF)(Lt,(0,l.v6)({ref:h,class:["v-snackbar",{"v-snackbar--active":a.value,"v-snackbar--multi-line":e.multiLine&&!e.vertical,"v-snackbar--timer":!!e.timer,"v-snackbar--vertical":e.vertical},O.value,i.value,e.class],style:[w.value,e.style]},t,{modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,contentProps:(0,l.v6)({class:["v-snackbar__wrapper",s.value,r.value,v.value,u.value],style:[c.value],onPointerenter:I,onPointerleave:S},t.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:B,onTouchend:D,onAfterLeave:A},n),{default:()=>[(0,m.wN)(!1,"v-snackbar"),e.timer&&!y.value&&(0,l.Lk)("div",{key:"timer",class:"v-snackbar__timer"},[(0,l.bF)(Bt,{ref:g,color:"string"===typeof e.timer?e.timer:"info",max:e.timeout,modelValue:b.time.value},null)]),d&&(0,l.Lk)("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[o.text?.()??e.text,o.default?.()]),o.actions&&(0,l.bF)(E.K,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[(0,l.Lk)("div",{class:"v-snackbar__actions"},[o.actions({isActive:a})])]})],activator:o.activator})}),Ot({},h)}}),Wt={class:"page-detail"},Xt={class:"page-detail__header"},Vt={class:"page-detail__title-wrapper"},Nt={key:0,class:"page-detail__locked-banner"},zt={class:"page-detail__locked-content"},Kt={class:"page-detail__content"},jt={key:0,class:"page-detail__loading"};function Mt(e,t,o,n,s,r){const c=(0,l.g2)("EmptyState"),u=(0,l.g2)("BlockRenderer"),d=(0,l.g2)("BlockTypeSelector"),v=(0,l.g2)("ConfirmDialog");return(0,l.uX)(),(0,l.CE)("div",Wt,[(0,l.Lk)("div",Xt,[(0,l.Lk)("button",{class:"page-detail__back",onClick:t[0]||(t[0]=(...e)=>r.goBack&&r.goBack(...e))},[(0,l.bF)(x.w,{icon:"mdi-arrow-left",size:"24"})]),(0,l.Lk)("div",Vt,[s.editingTitle?(0,l.bo)(((0,l.uX)(),(0,l.CE)("input",{key:0,ref:"titleInput","onUpdate:modelValue":t[1]||(t[1]=e=>s.titleDraft=e),type:"text",class:"page-detail__title-input",maxlength:"200",onBlur:t[2]||(t[2]=(...e)=>r.saveTitle&&r.saveTitle(...e)),onKeyup:[t[3]||(t[3]=(0,a.jR)((...e)=>r.saveTitle&&r.saveTitle(...e),["enter"])),t[4]||(t[4]=(0,a.jR)((...e)=>r.cancelTitleEdit&&r.cancelTitleEdit(...e),["escape"]))]},null,544)),[[a.Jo,s.titleDraft]]):((0,l.uX)(),(0,l.CE)("h1",{key:1,class:"page-detail__title",onClick:t[5]||(t[5]=(...e)=>r.startTitleEdit&&r.startTitleEdit(...e))},(0,i.v_)(s.page?.title||"Загрузка..."),1))]),(0,l.Lk)("button",{class:"page-detail__delete",onClick:t[6]||(t[6]=e=>s.showDeleteConfirm=!0)},[(0,l.bF)(x.w,{icon:"mdi-delete-outline",size:"22"})])]),s.page?.blocks?.length>10&&s.limits&&!s.limits.canDeleteBlocks?((0,l.uX)(),(0,l.CE)("div",Nt,[(0,l.Lk)("div",zt,[(0,l.bF)(x.w,{icon:"mdi-lock",size:"20",class:"page-detail__locked-icon"}),t[14]||(t[14]=(0,l.Lk)("div",{class:"page-detail__locked-text"},[(0,l.Lk)("strong",null,"Структура страницы заморожена"),(0,l.Lk)("p",null,"Вы можете редактировать текст, но не добавлять/удалять блоки")],-1))]),(0,l.Lk)("button",{class:"page-detail__locked-cta",onClick:t[7]||(t[7]=(...e)=>r.goToPlans&&r.goToPlans(...e))},[t[15]||(t[15]=(0,l.eW)(" Продлить Premium ",-1)),(0,l.bF)(x.w,{icon:"mdi-arrow-right",size:"16"})])])):(0,l.Q3)("",!0),(0,l.Lk)("div",Kt,[s.loading?((0,l.uX)(),(0,l.CE)("div",jt,[((0,l.uX)(),(0,l.CE)(l.FK,null,(0,l.pI)(3,e=>(0,l.Lk)("div",{class:"page-detail__loading-block",key:e})),64))])):s.page?.blocks?.length?((0,l.uX)(),(0,l.Wv)(a.F,{key:2,name:"fade-up",tag:"div",class:"page-detail__blocks"},{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.page.blocks,(e,t)=>((0,l.uX)(),(0,l.Wv)(u,{key:e.id,block:e,"page-id":r.pageId,limits:s.limits,style:(0,i.Tr)({transitionDelay:.03*t+"s"}),onUpdate:e=>r.updateBlock(t,e),onDelete:o=>r.deleteBlock(e,t)},null,8,["block","page-id","limits","style","onUpdate","onDelete"]))),128))]),_:1})):((0,l.uX)(),(0,l.Wv)(c,{key:1,icon:"mdi-text-box-plus-outline",title:"Нет блоков",subtitle:"Добавьте первый блок в заметку","action-text":"Добавить блок",onAction:r.handleFabClick},null,8,["onAction"]))]),(0,l.Lk)("button",{class:"page-detail__fab",onClick:t[8]||(t[8]=(...e)=>r.handleFabClick&&r.handleFabClick(...e))},[(0,l.bF)(x.w,{icon:"mdi-plus",size:"28"})]),(0,l.bF)(d,{show:s.showBlockSelector,"block-types":s.blockTypes,"is-premium":s.isPremium,limits:s.limits,onClose:t[9]||(t[9]=e=>s.showBlockSelector=!1),onSelect:r.createBlock},null,8,["show","block-types","is-premium","limits","onSelect"]),(0,l.bF)(v,{show:s.showDeleteConfirm,title:"Удалить страницу?",message:"Страница и все её блоки будут удалены безвозвратно.","confirm-text":"Удалить",danger:!0,onConfirm:r.deletePage,onCancel:t[10]||(t[10]=e=>s.showDeleteConfirm=!1)},null,8,["show","onConfirm"]),(0,l.bF)(v,{show:s.showBlockDeleteConfirm,title:"Удалить блок?",message:"Блок будет удален безвозвратно.","confirm-text":"Удалить",danger:!0,onConfirm:r.confirmDeleteBlock,onCancel:r.cancelDeleteBlock},null,8,["show","onConfirm","onCancel"]),(0,l.bF)(Pt,{modelValue:s.showToast,"onUpdate:modelValue":t[13]||(t[13]=e=>s.showToast=e),color:s.toastColor,timeout:5e3,location:"bottom"},{actions:(0,l.k6)(()=>[s.toastAction?((0,l.uX)(),(0,l.Wv)(ae,{key:0,variant:"text",onClick:t[11]||(t[11]=e=>{s.toastAction.onClick(),s.showToast=!1})},{default:(0,l.k6)(()=>[(0,l.eW)((0,i.v_)(s.toastAction.text),1)]),_:1})):(0,l.Q3)("",!0),(0,l.bF)(ae,{icon:"mdi-close",variant:"text",size:"small",onClick:t[12]||(t[12]=e=>s.showToast=!1)})]),default:(0,l.k6)(()=>[(0,l.eW)((0,i.v_)(s.toastMessage)+" ",1)]),_:1},8,["modelValue","color"])])}const Ut={class:"block-renderer__overlay-content"};function qt(e,t,o,n,s,r){return(0,l.uX)(),(0,l.CE)("div",{class:(0,i.C4)(["block-renderer",{"block-renderer--readonly":o.block.readOnly}])},[((0,l.uX)(),(0,l.Wv)((0,l.$y)(r.blockComponent),{block:o.block,"page-id":o.pageId,limits:o.limits,onUpdate:t[0]||(t[0]=t=>e.$emit("update",t)),onDelete:t[1]||(t[1]=t=>e.$emit("delete"))},null,40,["block","page-id","limits"])),o.block.readOnly?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"block-renderer__overlay",onClick:t[3]||(t[3]=(...e)=>r.goToPlans&&r.goToPlans(...e))},[(0,l.Lk)("div",Ut,[(0,l.bF)(x.w,{icon:"mdi-lock",size:"24",class:"block-renderer__lock-icon"}),t[5]||(t[5]=(0,l.Lk)("div",{class:"block-renderer__overlay-text"},[(0,l.Lk)("strong",null,"Premium блок"),(0,l.Lk)("p",null,"Доступно только для чтения")],-1)),(0,l.Lk)("button",{class:"block-renderer__upgrade-btn",onClick:t[2]||(t[2]=(0,a.D$)((...e)=>r.goToPlans&&r.goToPlans(...e),["stop"]))},[t[4]||(t[4]=(0,l.eW)(" Разблокировать ",-1)),(0,l.bF)(x.w,{icon:"mdi-arrow-right",size:"14"})])])])):(0,l.Q3)("",!0)],2)}const Ht={class:"text-block__content"},Yt={key:1,class:"text-block__edit"},Qt={class:"text-block__actions"};function Jt(e,t,o,n,s,r){return(0,l.uX)(),(0,l.CE)("div",{class:(0,i.C4)(["text-block",{"text-block--editing":s.editing}])},[s.editing?((0,l.uX)(),(0,l.CE)("div",Yt,[(0,l.bo)((0,l.Lk)("textarea",{ref:"textarea","onUpdate:modelValue":t[2]||(t[2]=e=>s.draft=e),class:"text-block__textarea",placeholder:"Введите текст...",rows:"3",onKeydown:t[3]||(t[3]=(0,a.jR)((...e)=>r.cancel&&r.cancel(...e),["escape"]))},null,544),[[a.Jo,s.draft]]),(0,l.Lk)("div",Qt,[(0,l.Lk)("button",{class:"text-block__done",onClick:t[4]||(t[4]=(...e)=>r.save&&r.save(...e))},[(0,l.bF)(x.w,{icon:"mdi-check",size:"20"}),t[5]||(t[5]=(0,l.eW)(" Готово ",-1))])])])):((0,l.uX)(),(0,l.CE)("div",{key:0,class:"text-block__view",onClick:t[1]||(t[1]=(...e)=>r.startEdit&&r.startEdit(...e))},[(0,l.Lk)("p",Ht,(0,i.v_)(o.block.content||"Нажмите для редактирования..."),1),(0,l.Lk)("button",{class:"text-block__menu",onClick:t[0]||(t[0]=(0,a.D$)(t=>e.$emit("delete"),["stop"]))},[(0,l.bF)(x.w,{icon:"mdi-dots-vertical",size:"18"})])]))],2)}var Gt=o(1668),Zt={name:"TextBlock",props:{block:{type:Object,required:!0},pageId:{type:String,required:!0}},emits:["update","delete"],data(){return{editing:!1,draft:""}},methods:{startEdit(){this.draft=this.block.content||"",this.editing=!0,this.$nextTick(()=>{this.$refs.textarea?.focus()})},async save(){if(this.draft===this.block.content)return void(this.editing=!1);const e=window.scrollX,t=window.scrollY;try{await Gt.xt.updateBlock(this.pageId,this.block.id,{type:"TEXT",textContent:this.draft}),this.$emit("update",{...this.block,content:this.draft})}catch(o){console.error("Failed to update block:",o)}this.editing=!1,this.$nextTick(()=>{window.scrollTo(e,t)})},cancel(){this.editing=!1}}},eo=o(1241);const to=(0,eo.A)(Zt,[["render",Jt],["__scopeId","data-v-c7328e84"]]);var oo=to;const lo={key:1,class:"heading-block__edit"},ao={class:"heading-block__levels"},io=["onClick"],no={class:"heading-block__actions"};function so(e,t,o,n,s,r){return(0,l.uX)(),(0,l.CE)("div",{class:(0,i.C4)(["heading-block",{"heading-block--editing":s.editing}])},[s.editing?((0,l.uX)(),(0,l.CE)("div",lo,[(0,l.Lk)("div",ao,[((0,l.uX)(),(0,l.CE)(l.FK,null,(0,l.pI)(3,e=>(0,l.Lk)("button",{key:e,class:(0,i.C4)(["heading-block__level",{"heading-block__level--active":s.draftLevel===e}]),onClick:t=>s.draftLevel=e}," H"+(0,i.v_)(e),11,io)),64))]),(0,l.bo)((0,l.Lk)("input",{ref:"input","onUpdate:modelValue":t[2]||(t[2]=e=>s.draftHeader=e),type:"text",class:(0,i.C4)(["heading-block__input","heading-block__input--h"+s.draftLevel]),placeholder:"Введите заголовок...",onKeyup:[t[3]||(t[3]=(0,a.jR)((...e)=>r.save&&r.save(...e),["enter"])),t[4]||(t[4]=(0,a.jR)((...e)=>r.cancel&&r.cancel(...e),["escape"]))]},null,34),[[a.Jo,s.draftHeader]]),(0,l.Lk)("div",no,[(0,l.Lk)("button",{class:"heading-block__done",onClick:t[5]||(t[5]=(...e)=>r.save&&r.save(...e))},[(0,l.bF)(x.w,{icon:"mdi-check",size:"20"}),t[6]||(t[6]=(0,l.eW)(" Готово ",-1))])])])):((0,l.uX)(),(0,l.CE)("div",{key:0,class:"heading-block__view",onClick:t[1]||(t[1]=(...e)=>r.startEdit&&r.startEdit(...e))},[((0,l.uX)(),(0,l.Wv)((0,l.$y)("h"+o.block.level),{class:(0,i.C4)(["heading-block__text","heading-block__text--h"+o.block.level])},{default:(0,l.k6)(()=>[(0,l.eW)((0,i.v_)(o.block.header||"Заголовок"),1)]),_:1},8,["class"])),(0,l.Lk)("button",{class:"heading-block__menu",onClick:t[0]||(t[0]=(0,a.D$)(t=>e.$emit("delete"),["stop"]))},[(0,l.bF)(x.w,{icon:"mdi-dots-vertical",size:"18"})])]))],2)}var ro={name:"HeadingBlock",props:{block:{type:Object,required:!0},pageId:{type:String,required:!0}},emits:["update","delete"],data(){return{editing:!1,draftHeader:"",draftLevel:1}},methods:{startEdit(){this.draftHeader=this.block.header||"",this.draftLevel=this.block.level||1,this.editing=!0,this.$nextTick(()=>{this.$refs.input?.focus()})},async save(){if(this.draftHeader===this.block.header&&this.draftLevel===this.block.level)return void(this.editing=!1);const e=window.scrollX,t=window.scrollY;try{await Gt.xt.updateBlock(this.pageId,this.block.id,{type:"HEADING",header:this.draftHeader,level:this.draftLevel}),this.$emit("update",{...this.block,header:this.draftHeader,level:this.draftLevel})}catch(o){console.error("Failed to update heading:",o)}this.editing=!1,this.$nextTick(()=>{window.scrollTo(e,t)})},cancel(){this.editing=!1}}};const co=(0,eo.A)(ro,[["render",so],["__scopeId","data-v-73836854"]]);var uo=co;const vo={class:"divider-block"};function po(e,t,o,a,i,n){return(0,l.uX)(),(0,l.CE)("div",vo,[t[1]||(t[1]=(0,l.Lk)("div",{class:"divider-block__line"},null,-1)),(0,l.Lk)("button",{class:"divider-block__menu",onClick:t[0]||(t[0]=t=>e.$emit("delete"))},[(0,l.bF)(x.w,{icon:"mdi-dots-vertical",size:"16"})])])}var mo={name:"DividerBlock",props:{block:{type:Object,required:!0},pageId:{type:String,required:!0}},emits:["update","delete"]};const ko=(0,eo.A)(mo,[["render",po],["__scopeId","data-v-234677ad"]]);var bo=ko;const ho={class:"checklist-block"},fo={class:"checklist-block__header"},go={class:"checklist-block__items"},yo=["disabled","onClick"],_o=["onUpdate:modelValue","disabled","onKeyup"],wo=["onClick"],Co=["disabled"];function Eo(e,t,o,n,s,r){return(0,l.uX)(),(0,l.CE)("div",ho,[(0,l.Lk)("div",fo,[(0,l.bF)(x.w,{icon:"mdi-checkbox-marked-outline",size:"18",class:"checklist-block__icon"}),t[3]||(t[3]=(0,l.Lk)("span",{class:"checklist-block__label"},"Чек-лист",-1)),(0,l.Lk)("button",{class:"checklist-block__menu",onClick:t[0]||(t[0]=t=>e.$emit("delete"))},[(0,l.bF)(x.w,{icon:"mdi-dots-vertical",size:"18"})])]),(0,l.Lk)("div",go,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.items,(e,n)=>((0,l.uX)(),(0,l.CE)("div",{key:n,class:"checklist-block__item"},[(0,l.Lk)("button",{class:(0,i.C4)(["checklist-block__checkbox",{"checklist-block__checkbox--checked":e.status}]),disabled:o.block.readOnly,onClick:e=>r.toggleItem(n)},[(0,l.bF)(x.w,{icon:e.status?"mdi-checkbox-marked":"mdi-checkbox-blank-outline",size:"22"},null,8,["icon"])],10,yo),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t=>e.text=t,type:"text",class:(0,i.C4)(["checklist-block__input",{"checklist-block__input--done":e.status}]),disabled:o.block.readOnly,placeholder:"Новый пункт...",onKeyup:(0,a.jR)(e=>r.addItem(n+1),["enter"]),onBlur:t[1]||(t[1]=(...e)=>r.saveItems&&r.saveItems(...e))},null,42,_o),[[a.Jo,e.text]]),s.items.length>1?((0,l.uX)(),(0,l.CE)("button",{key:0,class:"checklist-block__remove",onClick:e=>r.removeItem(n)},[(0,l.bF)(x.w,{icon:"mdi-close",size:"16"})],8,wo)):(0,l.Q3)("",!0)]))),128))]),(0,l.Lk)("button",{class:"checklist-block__add",disabled:o.block.readOnly,onClick:t[2]||(t[2]=e=>r.addItem())},[(0,l.bF)(x.w,{icon:"mdi-plus",size:"18"}),t[4]||(t[4]=(0,l.eW)(" Добавить пункт ",-1))],8,Co)])}var xo={name:"ChecklistBlock",props:{block:{type:Object,required:!0},pageId:{type:String,required:!0}},emits:["update","delete"],data(){return{items:[]}},watch:{block:{immediate:!0,handler(e){this.items=e.items?.map(e=>({text:e.text,status:e.checked}))||[{text:"",status:!1}]}}},methods:{async toggleItem(e){this.items[e].status=!this.items[e].status,await this.saveItems()},addItem(e){const t=e??this.items.length;this.items.splice(t,0,{text:"",status:!1}),this.$nextTick(()=>{const e=this.$el.querySelectorAll(".checklist-block__input");e[t]?.focus()})},async removeItem(e){this.items.splice(e,1),0===this.items.length&&this.items.push({text:"",status:!1}),await this.saveItems()},async saveItems(){const e=window.scrollX,t=window.scrollY;try{await Gt.xt.updateBlock(this.pageId,this.block.id,{type:"CHECKLIST",items:this.items.map(e=>({text:e.text,checked:e.status}))}),this.$emit("update",{...this.block,items:this.items.map(e=>({text:e.text,checked:e.status}))})}catch(o){console.error("Failed to update checklist:",o)}this.$nextTick(()=>{window.scrollTo(e,t)})}}};const Lo=(0,eo.A)(xo,[["render",Eo],["__scopeId","data-v-c737960c"]]);var To=Lo;const Io={class:"bullet-block"},So={class:"bullet-block__header"},Bo={class:"bullet-block__items"},Fo=["onUpdate:modelValue","disabled","onKeyup"],Do=["onClick"],Ao=["disabled"],Oo=["disabled"];function Ro(e,t,o,i,n,s){return(0,l.uX)(),(0,l.CE)("div",Io,[(0,l.Lk)("div",So,[(0,l.bF)(x.w,{icon:"mdi-format-list-bulleted",size:"18",class:"bullet-block__icon"}),t[3]||(t[3]=(0,l.Lk)("span",{class:"bullet-block__label"},"Список",-1)),(0,l.Lk)("button",{class:"bullet-block__menu",onClick:t[0]||(t[0]=t=>e.$emit("delete"))},[(0,l.bF)(x.w,{icon:"mdi-dots-vertical",size:"18"})])]),(0,l.Lk)("div",Bo,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.items,(e,i)=>((0,l.uX)(),(0,l.CE)("div",{key:i,class:"bullet-block__item"},[t[4]||(t[4]=(0,l.Lk)("span",{class:"bullet-block__bullet"},null,-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":e=>n.items[i]=e,type:"text",class:"bullet-block__input",disabled:o.block.readOnly,placeholder:"Новый пункт...",onKeyup:(0,a.jR)(e=>s.addItem(i+1),["enter"])},null,40,Fo),[[a.Jo,n.items[i]]]),n.items.length>1?((0,l.uX)(),(0,l.CE)("button",{key:0,class:"bullet-block__remove",onClick:e=>s.removeItem(i)},[(0,l.bF)(x.w,{icon:"mdi-close",size:"16"})],8,Do)):(0,l.Q3)("",!0)]))),128))]),(0,l.Lk)("button",{class:"bullet-block__add",disabled:o.block.readOnly,onClick:t[1]||(t[1]=e=>s.addItem())},[(0,l.bF)(x.w,{icon:"mdi-plus",size:"18"}),t[5]||(t[5]=(0,l.eW)(" Добавить пункт ",-1))],8,Ao),(0,l.Lk)("button",{class:"bullet-block__done",disabled:o.block.readOnly,onClick:t[2]||(t[2]=(...e)=>s.saveItems&&s.saveItems(...e))},[(0,l.bF)(x.w,{icon:"mdi-check",size:"20"}),t[6]||(t[6]=(0,l.eW)(" Готово ",-1))],8,Oo)])}var $o={name:"BulletListBlock",props:{block:{type:Object,required:!0},pageId:{type:String,required:!0}},emits:["update","delete"],data(){return{items:[]}},watch:{block:{immediate:!0,handler(e){this.items=e.items?.length?[...e.items]:[""]}}},methods:{addItem(e){const t=e??this.items.length;this.items.splice(t,0,""),this.$nextTick(()=>{const e=this.$el.querySelectorAll(".bullet-block__input");e[t]?.focus()})},async removeItem(e){this.items.splice(e,1),0===this.items.length&&this.items.push(""),await this.saveItems()},async saveItems(){const e=window.scrollX,t=window.scrollY;try{await Gt.xt.updateBlock(this.pageId,this.block.id,{type:"BULLET_LIST",items:this.items}),this.$emit("update",{...this.block,items:[...this.items]})}catch(o){console.error("Failed to update bullet list:",o)}this.$nextTick(()=>{window.scrollTo(e,t)})}}};const Po=(0,eo.A)($o,[["render",Ro],["__scopeId","data-v-eb32ebc0"]]);var Wo=Po;const Xo={class:"kv-block"},Vo={class:"kv-block__header"},No={class:"kv-block__items"},zo=["onUpdate:modelValue","disabled"],Ko=["onUpdate:modelValue","disabled","onKeyup"],jo=["onClick"],Mo=["disabled"];function Uo(e,t,o,i,n,s){return(0,l.uX)(),(0,l.CE)("div",Xo,[(0,l.Lk)("div",Vo,[(0,l.bF)(x.w,{icon:"mdi-table-row",size:"18",class:"kv-block__icon"}),t[4]||(t[4]=(0,l.Lk)("span",{class:"kv-block__label"},"Ключ-значение",-1)),(0,l.Lk)("button",{class:"kv-block__menu",onClick:t[0]||(t[0]=t=>e.$emit("delete"))},[(0,l.bF)(x.w,{icon:"mdi-dots-vertical",size:"18"})])]),(0,l.Lk)("div",No,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.items,(e,i)=>((0,l.uX)(),(0,l.CE)("div",{key:i,class:"kv-block__item"},[(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t=>e.key=t,type:"text",class:"kv-block__key",disabled:o.block.readOnly,placeholder:"Ключ",onBlur:t[1]||(t[1]=(...e)=>s.saveItems&&s.saveItems(...e))},null,40,zo),[[a.Jo,e.key]]),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t=>e.value=t,type:"text",class:"kv-block__value",disabled:o.block.readOnly,placeholder:"Значение",onKeyup:(0,a.jR)(e=>s.addItem(i+1),["enter"]),onBlur:t[2]||(t[2]=(...e)=>s.saveItems&&s.saveItems(...e))},null,40,Ko),[[a.Jo,e.value]]),n.items.length>1?((0,l.uX)(),(0,l.CE)("button",{key:0,class:"kv-block__remove",onClick:e=>s.removeItem(i)},[(0,l.bF)(x.w,{icon:"mdi-close",size:"16"})],8,jo)):(0,l.Q3)("",!0)]))),128))]),(0,l.Lk)("button",{class:"kv-block__add",disabled:o.block.readOnly,onClick:t[3]||(t[3]=e=>s.addItem())},[(0,l.bF)(x.w,{icon:"mdi-plus",size:"18"}),t[5]||(t[5]=(0,l.eW)(" Добавить пару ",-1))],8,Mo)])}var qo={name:"KeyValueBlock",props:{block:{type:Object,required:!0},pageId:{type:String,required:!0}},emits:["update","delete"],data(){return{items:[]}},watch:{block:{immediate:!0,handler(e){this.items=e.items?.map(e=>({...e}))||[{key:"",value:""}]}}},methods:{addItem(e){const t=e??this.items.length;this.items.splice(t,0,{key:"",value:""}),this.$nextTick(()=>{const e=this.$el.querySelectorAll(".kv-block__key");e[t]?.focus()})},async removeItem(e){this.items.splice(e,1),0===this.items.length&&this.items.push({key:"",value:""}),await this.saveItems()},async saveItems(){const e=window.scrollX,t=window.scrollY;try{await Gt.xt.updateBlock(this.pageId,this.block.id,{type:"KEY_VALUE",items:this.items.map(e=>({key:e.key,value:e.value}))}),this.$emit("update",{...this.block,items:[...this.items]})}catch(o){console.error("Failed to update key-value:",o)}this.$nextTick(()=>{window.scrollTo(e,t)})}}};const Ho=(0,eo.A)(qo,[["render",Uo],["__scopeId","data-v-57cf2a01"]]);var Yo=Ho;const Qo={class:"idea-block"},Jo={class:"idea-block__header"},Go={class:"idea-block__fields"},Zo={class:"idea-block__field"},el=["disabled"],tl={class:"idea-block__field"},ol=["disabled"],ll={class:"idea-block__field"},al=["disabled"],il={class:"idea-block__field"},nl=["disabled"],sl={class:"idea-block__field"},rl=["disabled"];function cl(e,t,o,i,n,s){return(0,l.uX)(),(0,l.CE)("div",Qo,[(0,l.Lk)("div",Jo,[(0,l.bF)(x.w,{icon:"mdi-lightbulb-outline",size:"18",class:"idea-block__icon"}),t[11]||(t[11]=(0,l.Lk)("span",{class:"idea-block__label"},"Карточка идеи",-1)),(0,l.Lk)("button",{class:"idea-block__menu",onClick:t[0]||(t[0]=t=>e.$emit("delete"))},[(0,l.bF)(x.w,{icon:"mdi-dots-vertical",size:"18"})])]),(0,l.Lk)("div",Go,[(0,l.Lk)("div",Zo,[t[12]||(t[12]=(0,l.Lk)("label",{class:"idea-block__field-label"},"Проблема",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.draft.problem=e),class:"idea-block__textarea",disabled:o.block.readOnly,placeholder:"Какую проблему решает?",rows:"2",onBlur:t[2]||(t[2]=(...e)=>s.save&&s.save(...e))},null,40,el),[[a.Jo,n.draft.problem]])]),(0,l.Lk)("div",tl,[t[13]||(t[13]=(0,l.Lk)("label",{class:"idea-block__field-label"},"Решение",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>n.draft.solution=e),class:"idea-block__textarea",disabled:o.block.readOnly,placeholder:"Как решить проблему?",rows:"2",onBlur:t[4]||(t[4]=(...e)=>s.save&&s.save(...e))},null,40,ol),[[a.Jo,n.draft.solution]])]),(0,l.Lk)("div",ll,[t[14]||(t[14]=(0,l.Lk)("label",{class:"idea-block__field-label"},"Аудитория",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>n.draft.audience=e),type:"text",class:"idea-block__input",disabled:o.block.readOnly,placeholder:"Целевая аудитория",onBlur:t[6]||(t[6]=(...e)=>s.save&&s.save(...e))},null,40,al),[[a.Jo,n.draft.audience]])]),(0,l.Lk)("div",il,[t[15]||(t[15]=(0,l.Lk)("label",{class:"idea-block__field-label"},"MVP",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":t[7]||(t[7]=e=>n.draft.mvp=e),class:"idea-block__textarea",disabled:o.block.readOnly,placeholder:"Минимальный продукт",rows:"2",onBlur:t[8]||(t[8]=(...e)=>s.save&&s.save(...e))},null,40,nl),[[a.Jo,n.draft.mvp]])]),(0,l.Lk)("div",sl,[t[16]||(t[16]=(0,l.Lk)("label",{class:"idea-block__field-label"},"Монетизация",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>n.draft.monetization=e),type:"text",class:"idea-block__input",disabled:o.block.readOnly,placeholder:"Как заработать?",onBlur:t[10]||(t[10]=(...e)=>s.save&&s.save(...e))},null,40,rl),[[a.Jo,n.draft.monetization]])])])])}var ul={name:"IdeaCardBlock",props:{block:{type:Object,required:!0},pageId:{type:String,required:!0}},emits:["update","delete"],data(){return{draft:{problem:"",solution:"",audience:"",mvp:"",monetization:""}}},watch:{block:{immediate:!0,handler(e){this.draft={problem:e.problem||"",solution:e.solution||"",audience:e.audience||"",mvp:e.mvp||"",monetization:e.monetization||""}}}},methods:{async save(){const e=this.draft.problem!==this.block.problem||this.draft.solution!==this.block.solution||this.draft.audience!==this.block.audience||this.draft.mvp!==this.block.mvp||this.draft.monetization!==this.block.monetization;if(!e)return;const t=window.scrollX,o=window.scrollY;try{await Gt.xt.updateBlock(this.pageId,this.block.id,{type:"IDEA_CARD",...this.draft}),this.$emit("update",{...this.block,...this.draft})}catch(l){console.error("Failed to update idea:",l)}this.$nextTick(()=>{window.scrollTo(t,o)})}}};const dl=(0,eo.A)(ul,[["render",cl],["__scopeId","data-v-2868636d"]]);var vl=dl;const pl={class:"pros-block__icon-wrapper"},ml={class:"pros-block__content"},kl={key:1,class:"pros-block__edit"},bl={class:"pros-block__icon-wrapper"},hl={class:"pros-block__edit-content"};function fl(e,t,o,n,s,r){return(0,l.uX)(),(0,l.CE)("div",{class:(0,i.C4)(["pros-block",{"pros-block--editing":s.editing}])},[s.editing?((0,l.uX)(),(0,l.CE)("div",kl,[(0,l.Lk)("div",bl,[(0,l.bF)(x.w,{icon:"mdi-thumb-up",size:"18"})]),(0,l.Lk)("div",hl,[(0,l.bo)((0,l.Lk)("textarea",{ref:"textarea","onUpdate:modelValue":t[2]||(t[2]=e=>s.draft=e),class:"pros-block__textarea",placeholder:"Введите преимущество...",rows:"2",onKeydown:t[3]||(t[3]=(0,a.jR)((...e)=>r.cancel&&r.cancel(...e),["escape"]))},null,544),[[a.Jo,s.draft]]),(0,l.Lk)("button",{class:"pros-block__done",onClick:t[4]||(t[4]=(...e)=>r.save&&r.save(...e))},[(0,l.bF)(x.w,{icon:"mdi-check",size:"18"})])])])):((0,l.uX)(),(0,l.CE)("div",{key:0,class:"pros-block__view",onClick:t[1]||(t[1]=(...e)=>r.startEdit&&r.startEdit(...e))},[(0,l.Lk)("div",pl,[(0,l.bF)(x.w,{icon:"mdi-thumb-up",size:"18"})]),(0,l.Lk)("p",ml,(0,i.v_)(o.block.content||"Нажмите для редактирования..."),1),(0,l.Lk)("button",{class:"pros-block__menu",onClick:t[0]||(t[0]=(0,a.D$)(t=>e.$emit("delete"),["stop"]))},[(0,l.bF)(x.w,{icon:"mdi-dots-vertical",size:"18"})])]))],2)}var gl={name:"ProsBlock",props:{block:{type:Object,required:!0},pageId:{type:String,required:!0}},emits:["update","delete"],data(){return{editing:!1,draft:""}},methods:{startEdit(){this.draft=this.block.content||"",this.editing=!0,this.$nextTick(()=>{this.$refs.textarea?.focus()})},async save(){if(this.draft===this.block.content)return void(this.editing=!1);const e=window.scrollX,t=window.scrollY;try{await Gt.xt.updateBlock(this.pageId,this.block.id,{type:"PROS",textContent:this.draft}),this.$emit("update",{...this.block,content:this.draft})}catch(o){console.error("Failed to update block:",o)}this.editing=!1,this.$nextTick(()=>{window.scrollTo(e,t)})},cancel(){this.editing=!1}}};const yl=(0,eo.A)(gl,[["render",fl],["__scopeId","data-v-23bb5954"]]);var _l=yl;const wl={class:"cons-block__icon-wrapper"},Cl={class:"cons-block__content"},El={key:1,class:"cons-block__edit"},xl={class:"cons-block__icon-wrapper"},Ll={class:"cons-block__edit-content"};function Tl(e,t,o,n,s,r){return(0,l.uX)(),(0,l.CE)("div",{class:(0,i.C4)(["cons-block",{"cons-block--editing":s.editing}])},[s.editing?((0,l.uX)(),(0,l.CE)("div",El,[(0,l.Lk)("div",xl,[(0,l.bF)(x.w,{icon:"mdi-thumb-down",size:"18"})]),(0,l.Lk)("div",Ll,[(0,l.bo)((0,l.Lk)("textarea",{ref:"textarea","onUpdate:modelValue":t[2]||(t[2]=e=>s.draft=e),class:"cons-block__textarea",placeholder:"Введите недостаток...",rows:"2",onKeydown:t[3]||(t[3]=(0,a.jR)((...e)=>r.cancel&&r.cancel(...e),["escape"]))},null,544),[[a.Jo,s.draft]]),(0,l.Lk)("button",{class:"cons-block__done",onClick:t[4]||(t[4]=(...e)=>r.save&&r.save(...e))},[(0,l.bF)(x.w,{icon:"mdi-check",size:"18"})])])])):((0,l.uX)(),(0,l.CE)("div",{key:0,class:"cons-block__view",onClick:t[1]||(t[1]=(...e)=>r.startEdit&&r.startEdit(...e))},[(0,l.Lk)("div",wl,[(0,l.bF)(x.w,{icon:"mdi-thumb-down",size:"18"})]),(0,l.Lk)("p",Cl,(0,i.v_)(o.block.content||"Нажмите для редактирования..."),1),(0,l.Lk)("button",{class:"cons-block__menu",onClick:t[0]||(t[0]=(0,a.D$)(t=>e.$emit("delete"),["stop"]))},[(0,l.bF)(x.w,{icon:"mdi-dots-vertical",size:"18"})])]))],2)}var Il={name:"ConsBlock",props:{block:{type:Object,required:!0},pageId:{type:String,required:!0}},emits:["update","delete"],data(){return{editing:!1,draft:""}},methods:{startEdit(){this.draft=this.block.content||"",this.editing=!0,this.$nextTick(()=>{this.$refs.textarea?.focus()})},async save(){if(this.draft===this.block.content)return void(this.editing=!1);const e=window.scrollX,t=window.scrollY;try{await Gt.xt.updateBlock(this.pageId,this.block.id,{type:"CONS",textContent:this.draft}),this.$emit("update",{...this.block,content:this.draft})}catch(o){console.error("Failed to update block:",o)}this.editing=!1,this.$nextTick(()=>{window.scrollTo(e,t)})},cancel(){this.editing=!1}}};const Sl=(0,eo.A)(Il,[["render",Tl],["__scopeId","data-v-210492b8"]]);var Bl=Sl;const Fl={key:0,class:"link-block__view"},Dl={class:"link-block__text"},Al={key:0,class:"link-block__url"},Ol={key:1,class:"link-block__edit"};function Rl(e,t,o,n,s,r){return(0,l.uX)(),(0,l.CE)("div",{class:(0,i.C4)(["link-block",{"link-block--editing":s.editing}])},[s.editing?((0,l.uX)(),(0,l.CE)("div",Ol,[(0,l.bo)((0,l.Lk)("input",{ref:"urlInput","onUpdate:modelValue":t[3]||(t[3]=e=>s.draftUrl=e),type:"url",class:"link-block__input",placeholder:"https://example.com",onKeyup:t[4]||(t[4]=(0,a.jR)(t=>e.$refs.textInput?.focus(),["enter"]))},null,544),[[a.Jo,s.draftUrl]]),(0,l.bo)((0,l.Lk)("input",{ref:"textInput","onUpdate:modelValue":t[5]||(t[5]=e=>s.draftText=e),type:"text",class:"link-block__input",placeholder:"Текст ссылки",onKeyup:t[6]||(t[6]=(0,a.jR)((...e)=>r.save&&r.save(...e),["enter"]))},null,544),[[a.Jo,s.draftText]]),(0,l.Lk)("button",{class:"link-block__done",onClick:t[7]||(t[7]=(...e)=>r.save&&r.save(...e))},[(0,l.bF)(x.w,{icon:"mdi-check",size:"20"}),t[9]||(t[9]=(0,l.eW)(" Готово ",-1))]),(0,l.Lk)("button",{class:"link-block__cancel",onClick:t[8]||(t[8]=(...e)=>r.cancel&&r.cancel(...e))},[(0,l.bF)(x.w,{icon:"mdi-close",size:"18"})])])):((0,l.uX)(),(0,l.CE)("div",Fl,[(0,l.Lk)("div",{class:"link-block__icon-wrapper",onClick:t[0]||(t[0]=(...e)=>r.openLink&&r.openLink(...e))},[(0,l.bF)(x.w,{icon:"mdi-link-variant",size:"20"})]),(0,l.Lk)("div",{class:"link-block__content",onClick:t[1]||(t[1]=(...e)=>r.startEdit&&r.startEdit(...e))},[(0,l.Lk)("span",Dl,(0,i.v_)(o.block.text||o.block.url||"Добавить ссылку"),1),o.block.url?((0,l.uX)(),(0,l.CE)("span",Al,(0,i.v_)(r.displayUrl),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("button",{class:"link-block__menu",onClick:t[2]||(t[2]=t=>e.$emit("delete"))},[(0,l.bF)(x.w,{icon:"mdi-dots-vertical",size:"18"})])]))],2)}o(4603),o(7566),o(8721);var $l={name:"LinkBlock",props:{block:{type:Object,required:!0},pageId:{type:String,required:!0}},emits:["update","delete"],data(){return{editing:!1,draftUrl:"",draftText:""}},computed:{displayUrl(){if(!this.block.url)return"";try{const e=new URL(this.block.url);return e.hostname}catch{return this.block.url}}},methods:{startEdit(){this.draftUrl=this.block.url||"",this.draftText=this.block.text||"",this.editing=!0,this.$nextTick(()=>{this.$refs.urlInput?.focus()})},openLink(){this.block.url?window.open(this.block.url,"_blank"):this.startEdit()},async save(){if(this.draftUrl===this.block.url&&this.draftText===this.block.text)return void(this.editing=!1);const e=window.scrollX,t=window.scrollY;try{await Gt.xt.updateBlock(this.pageId,this.block.id,{type:"LINK",url:this.draftUrl,text:this.draftText}),this.$emit("update",{...this.block,url:this.draftUrl,text:this.draftText})}catch(o){console.error("Failed to update link:",o)}this.editing=!1,this.$nextTick(()=>{window.scrollTo(e,t)})},cancel(){this.editing=!1}}};const Pl=(0,eo.A)($l,[["render",Rl],["__scopeId","data-v-60309766"]]);var Wl=Pl;const Xl={class:"status-block"},Vl={class:"status-block__header"},Nl={class:"status-block__options"},zl=["disabled","onClick"];function Kl(e,t,o,a,n,s){return(0,l.uX)(),(0,l.CE)("div",Xl,[(0,l.Lk)("div",Vl,[(0,l.bF)(x.w,{icon:"mdi-flag-outline",size:"18",class:"status-block__icon"}),t[1]||(t[1]=(0,l.Lk)("span",{class:"status-block__label"},"Статус",-1)),(0,l.Lk)("button",{class:"status-block__menu",onClick:t[0]||(t[0]=t=>e.$emit("delete"))},[(0,l.bF)(x.w,{icon:"mdi-dots-vertical",size:"18"})])]),(0,l.Lk)("div",Nl,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.statusOptions,e=>((0,l.uX)(),(0,l.CE)("button",{key:e.value,class:(0,i.C4)(["status-block__option",{"status-block__option--active":o.block.status===e.value,["status-block__option--"+e.value.toLowerCase()]:!0}]),disabled:o.block.readOnly,onClick:t=>s.setStatus(e.value)},[(0,l.bF)(x.w,{icon:e.icon,size:"18"},null,8,["icon"]),(0,l.Lk)("span",null,(0,i.v_)(e.label),1)],10,zl))),128))])])}var jl={name:"StatusBlock",props:{block:{type:Object,required:!0},pageId:{type:String,required:!0}},emits:["update","delete"],data(){return{statusOptions:[{value:"IDEA",label:"Идея",icon:"mdi-lightbulb-outline"},{value:"IN_PROGRESS",label:"В процессе",icon:"mdi-progress-clock"},{value:"DONE",label:"Готово",icon:"mdi-check-circle-outline"},{value:"DROPPED",label:"Отменено",icon:"mdi-close-circle-outline"}]}},methods:{async setStatus(e){if(e!==this.block.status)try{await Gt.xt.updateBlock(this.pageId,this.block.id,{type:"STATUS",status:e}),this.$emit("update",{...this.block,status:e})}catch(t){console.error("Failed to update status:",t)}}}};const Ml=(0,eo.A)(jl,[["render",Kl],["__scopeId","data-v-354fd0e3"]]);var Ul=Ml;const ql={class:"quote-block__content"},Hl={class:"quote-block__text"},Yl={key:0,class:"quote-block__author"},Ql={key:1,class:"quote-block__edit"},Jl={class:"quote-block__actions"};function Gl(e,t,o,n,s,r){return(0,l.uX)(),(0,l.CE)("div",{class:(0,i.C4)(["quote-block",{"quote-block--editing":s.editing}])},[s.editing?((0,l.uX)(),(0,l.CE)("div",Ql,[(0,l.bo)((0,l.Lk)("textarea",{ref:"textarea","onUpdate:modelValue":t[2]||(t[2]=e=>s.draftText=e),class:"quote-block__textarea",placeholder:"Текст цитаты...",rows:"3"},null,512),[[a.Jo,s.draftText]]),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>s.draftAuthor=e),type:"text",class:"quote-block__input",placeholder:"Автор цитаты",onKeyup:t[4]||(t[4]=(0,a.jR)((...e)=>r.save&&r.save(...e),["enter"]))},null,544),[[a.Jo,s.draftAuthor]]),(0,l.Lk)("div",Jl,[(0,l.Lk)("button",{class:"quote-block__done",onClick:t[5]||(t[5]=(...e)=>r.save&&r.save(...e))},[(0,l.bF)(x.w,{icon:"mdi-check",size:"20"}),t[7]||(t[7]=(0,l.eW)(" Готово ",-1))])]),(0,l.Lk)("button",{class:"quote-block__cancel",onClick:t[6]||(t[6]=(...e)=>r.cancel&&r.cancel(...e))},[(0,l.bF)(x.w,{icon:"mdi-close",size:"18"})])])):((0,l.uX)(),(0,l.CE)("div",{key:0,class:"quote-block__view",onClick:t[1]||(t[1]=(...e)=>r.startEdit&&r.startEdit(...e))},[(0,l.Lk)("div",ql,[(0,l.bF)(x.w,{icon:"mdi-format-quote-open",size:"24",class:"quote-block__quote-icon"}),(0,l.Lk)("p",Hl,(0,i.v_)(o.block.text||"Нажмите для добавления цитаты..."),1),o.block.author?((0,l.uX)(),(0,l.CE)("span",Yl,"— "+(0,i.v_)(o.block.author),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("button",{class:"quote-block__menu",onClick:t[0]||(t[0]=(0,a.D$)(t=>e.$emit("delete"),["stop"]))},[(0,l.bF)(x.w,{icon:"mdi-dots-vertical",size:"18"})])]))],2)}var Zl={name:"QuoteBlock",props:{block:{type:Object,required:!0},pageId:{type:String,required:!0}},emits:["update","delete"],data(){return{editing:!1,draftText:"",draftAuthor:""}},methods:{startEdit(){this.draftText=this.block.text||"",this.draftAuthor=this.block.author||"",this.editing=!0,this.$nextTick(()=>{this.$refs.textarea?.focus()})},async save(){if(this.draftText===this.block.text&&this.draftAuthor===this.block.author)return void(this.editing=!1);const e=window.scrollX,t=window.scrollY;try{await Gt.xt.updateBlock(this.pageId,this.block.id,{type:"QUOTE",text:this.draftText,author:this.draftAuthor}),this.$emit("update",{...this.block,text:this.draftText,author:this.draftAuthor})}catch(o){console.error("Failed to update quote:",o)}this.editing=!1,this.$nextTick(()=>{window.scrollTo(e,t)})},cancel(){this.editing=!1}}};const ea=(0,eo.A)(Zl,[["render",Gl],["__scopeId","data-v-03f27e1e"]]);var ta=ea;const oa={TEXT:oo,HEADING:uo,DIVIDER:bo,CHECKLIST:To,BULLET_LIST:Wo,KEY_VALUE:Yo,IDEA_CARD:vl,PROS:_l,CONS:Bl,LINK:Wl,STATUS:Ul,QUOTE:ta};var la={name:"BlockRenderer",props:{block:{type:Object,required:!0},pageId:{type:String,required:!0},limits:{type:Object,default:null}},emits:["update","delete"],computed:{blockComponent(){const e=this.block.type||this.block.blockType;return oa[e]||oo}},methods:{goToPlans(){this.$router.push({name:"subscription-plans"})}}};const aa=(0,eo.A)(la,[["render",qt],["__scopeId","data-v-66158499"]]);var ia=aa;const na={key:0,class:"block-menu"},sa={class:"block-menu__search"},ra={class:"block-menu__list"},ca={key:0,class:"block-menu__empty"},ua={key:1,class:"block-menu__section"},da=["onClick","onMouseenter"],va={class:"block-menu__item-icon"},pa={class:"block-menu__item-info"},ma={class:"block-menu__item-name"},ka={class:"block-menu__item-desc"},ba={key:2,class:"block-menu__section"},ha={class:"block-menu__section-title"},fa={key:0,class:"block-menu__pro-badge"},ga=["onClick","onMouseenter"],ya={class:"block-menu__item-info"},_a={class:"block-menu__item-name"},wa={class:"block-menu__item-desc"};function Ca(e,t,o,n,s,r){return(0,l.uX)(),(0,l.Wv)(l.Im,{to:"body"},[(0,l.bF)(a.eB,{name:"fade"},{default:(0,l.k6)(()=>[o.show?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"block-menu__overlay",onClick:t[6]||(t[6]=(0,a.D$)(t=>e.$emit("close"),["self"]))},[(0,l.bF)(a.eB,{name:"scale"},{default:(0,l.k6)(()=>[o.show?((0,l.uX)(),(0,l.CE)("div",na,[(0,l.Lk)("div",sa,[(0,l.bF)(x.w,{icon:"mdi-magnify",size:"18",class:"block-menu__search-icon"}),(0,l.bo)((0,l.Lk)("input",{ref:"searchInput","onUpdate:modelValue":t[0]||(t[0]=e=>s.search=e),type:"text",class:"block-menu__search-input",placeholder:"Поиск блоков...",onKeydown:[t[1]||(t[1]=(0,a.jR)((0,a.D$)((...e)=>r.navigateDown&&r.navigateDown(...e),["prevent"]),["down"])),t[2]||(t[2]=(0,a.jR)((0,a.D$)((...e)=>r.navigateUp&&r.navigateUp(...e),["prevent"]),["up"])),t[3]||(t[3]=(0,a.jR)((0,a.D$)((...e)=>r.selectCurrent&&r.selectCurrent(...e),["prevent"]),["enter"])),t[4]||(t[4]=(0,a.jR)(t=>e.$emit("close"),["escape"]))]},null,544),[[a.Jo,s.search]])]),(0,l.Lk)("div",ra,[0===r.filteredBlocks.length?((0,l.uX)(),(0,l.CE)("div",ca," Ничего не найдено ")):(0,l.Q3)("",!0),r.filteredFreeBlocks.length>0?((0,l.uX)(),(0,l.CE)("div",ua,[t[7]||(t[7]=(0,l.Lk)("div",{class:"block-menu__section-title"},"Основные",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.filteredFreeBlocks,(e,t)=>((0,l.uX)(),(0,l.CE)("button",{key:e.blockType,class:(0,i.C4)(["block-menu__item",{"block-menu__item--active":s.selectedIndex===t}]),onClick:t=>r.select(e),onMouseenter:e=>s.selectedIndex=t},[(0,l.Lk)("div",va,[(0,l.bF)(x.w,{icon:r.getIcon(e.blockType),size:"20"},null,8,["icon"])]),(0,l.Lk)("div",pa,[(0,l.Lk)("span",ma,(0,i.v_)(e.blockName),1),(0,l.Lk)("span",ka,(0,i.v_)(r.getDescription(e.blockType)),1)])],42,da))),128))])):(0,l.Q3)("",!0),r.filteredPremiumBlocks.length>0?((0,l.uX)(),(0,l.CE)("div",ba,[(0,l.Lk)("div",ha,[t[8]||(t[8]=(0,l.eW)(" Премиум ",-1)),o.isPremium?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("span",fa,"PRO"))]),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.filteredPremiumBlocks,(e,t)=>((0,l.uX)(),(0,l.CE)("button",{key:e.blockType,class:(0,i.C4)(["block-menu__item",{"block-menu__item--active":s.selectedIndex===r.filteredFreeBlocks.length+t,"block-menu__item--locked":!o.isPremium}]),onClick:t=>r.select(e),onMouseenter:e=>s.selectedIndex=r.filteredFreeBlocks.length+t},[(0,l.Lk)("div",{class:(0,i.C4)(["block-menu__item-icon",{"block-menu__item-icon--premium":!o.isPremium}])},[(0,l.bF)(x.w,{icon:r.getIcon(e.blockType),size:"20"},null,8,["icon"])],2),(0,l.Lk)("div",ya,[(0,l.Lk)("span",_a,(0,i.v_)(e.blockName),1),(0,l.Lk)("span",wa,(0,i.v_)(r.getDescription(e.blockType)),1)]),o.isPremium?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(x.w,{key:0,icon:"mdi-lock",size:"14",class:"block-menu__item-lock"}))],42,ga))),128))])):(0,l.Q3)("",!0)]),!o.isPremium&&r.filteredPremiumBlocks.length>0?((0,l.uX)(),(0,l.CE)("button",{key:0,class:"block-menu__upgrade",onClick:t[5]||(t[5]=(...e)=>r.goToPlans&&r.goToPlans(...e))},[(0,l.bF)(x.w,{icon:"mdi-crown",size:"16"}),t[9]||(t[9]=(0,l.Lk)("span",null,"Разблокировать все блоки",-1)),(0,l.bF)(x.w,{icon:"mdi-arrow-right",size:"16"})])):(0,l.Q3)("",!0)])):(0,l.Q3)("",!0)]),_:1})])):(0,l.Q3)("",!0)]),_:1})])}const Ea={TEXT:"mdi-text",HEADING:"mdi-format-header-1",DIVIDER:"mdi-minus",CHECKLIST:"mdi-checkbox-marked-outline",BULLET_LIST:"mdi-format-list-bulleted",KEY_VALUE:"mdi-table-row",IDEA_CARD:"mdi-lightbulb-outline",PROS:"mdi-thumb-up-outline",CONS:"mdi-thumb-down-outline",LINK:"mdi-link-variant",STATUS:"mdi-flag-outline",QUOTE:"mdi-format-quote-close"},xa={TEXT:"Простой текстовый блок",HEADING:"Заголовок H1, H2, H3",DIVIDER:"Горизонтальный разделитель",CHECKLIST:"Список задач с галочками",BULLET_LIST:"Маркированный список",KEY_VALUE:"Пары ключ-значение",IDEA_CARD:"Структурированная идея",PROS:"Преимущество / плюс",CONS:"Недостаток / минус",LINK:"Ссылка на ресурс",STATUS:"Статус задачи",QUOTE:"Цитата с автором"};var La={name:"BlockTypeSelector",props:{show:{type:Boolean,default:!1},blockTypes:{type:Array,default:()=>[]},isPremium:{type:Boolean,default:!1},limits:{type:Object,default:null}},emits:["close","select"],data(){return{search:"",selectedIndex:0}},computed:{filteredBlocks(){if(!this.search.trim())return this.blockTypes;const e=this.search.toLowerCase();return this.blockTypes.filter(t=>t.blockName.toLowerCase().includes(e)||this.getDescription(t.blockType).toLowerCase().includes(e))},filteredFreeBlocks(){return this.filteredBlocks.filter(e=>e.isFreeBlock)},filteredPremiumBlocks(){return this.filteredBlocks.filter(e=>!e.isFreeBlock)}},watch:{show(e){e&&(this.search="",this.selectedIndex=0,this.$nextTick(()=>{this.$refs.searchInput?.focus()}))},search(){this.selectedIndex=0}},methods:{getIcon(e){return Ea[e]||"mdi-card-outline"},getDescription(e){return xa[e]||""},select(e){e.isFreeBlock||this.isPremium?this.$emit("select",e.blockType):this.goToPlans()},navigateDown(){const e=this.filteredBlocks.length;e>0&&(this.selectedIndex=(this.selectedIndex+1)%e)},navigateUp(){const e=this.filteredBlocks.length;e>0&&(this.selectedIndex=(this.selectedIndex-1+e)%e)},selectCurrent(){const e=this.filteredBlocks[this.selectedIndex];e&&this.select(e)},goToPlans(){this.$emit("close"),this.$router.push({name:"subscription-plans"})}}};const Ta=(0,eo.A)(La,[["render",Ca],["__scopeId","data-v-47c9c5c9"]]);var Ia=Ta,Sa=o(6868);const Ba={key:0,class:"confirm-dialog"},Fa={class:"confirm-dialog__title"},Da={key:0,class:"confirm-dialog__message"},Aa={class:"confirm-dialog__actions"};function Oa(e,t,o,n,s,r){return(0,l.uX)(),(0,l.Wv)(l.Im,{to:"body"},[(0,l.bF)(a.eB,{name:"fade"},{default:(0,l.k6)(()=>[o.show?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"confirm-dialog__overlay",onClick:t[2]||(t[2]=(0,a.D$)(t=>e.$emit("cancel"),["self"]))},[(0,l.bF)(a.eB,{name:"slide-up"},{default:(0,l.k6)(()=>[o.show?((0,l.uX)(),(0,l.CE)("div",Ba,[(0,l.Lk)("h3",Fa,(0,i.v_)(o.title),1),o.message?((0,l.uX)(),(0,l.CE)("p",Da,(0,i.v_)(o.message),1)):(0,l.Q3)("",!0),(0,l.Lk)("div",Aa,[(0,l.Lk)("button",{class:"confirm-dialog__btn confirm-dialog__btn--cancel",onClick:t[0]||(t[0]=t=>e.$emit("cancel"))},(0,i.v_)(o.cancelText),1),(0,l.Lk)("button",{class:(0,i.C4)(["confirm-dialog__btn",{"confirm-dialog__btn--danger":o.danger}]),onClick:t[1]||(t[1]=t=>e.$emit("confirm"))},(0,i.v_)(o.confirmText),3)])])):(0,l.Q3)("",!0)]),_:1})])):(0,l.Q3)("",!0)]),_:1})])}var Ra={name:"ConfirmDialog",props:{show:{type:Boolean,default:!1},title:{type:String,required:!0},message:{type:String,default:""},confirmText:{type:String,default:"Удалить"},cancelText:{type:String,default:"Отмена"},danger:{type:Boolean,default:!1}},emits:["confirm","cancel"]};const $a=(0,eo.A)(Ra,[["render",Oa],["__scopeId","data-v-49d6e655"]]);var Pa=$a;const Wa=["HEADING","BULLET_LIST","KEY_VALUE","IDEA_CARD","LINK","STATUS","QUOTE","PROS","CONS"];var Xa={name:"PageDetailView",components:{BlockRenderer:ia,BlockTypeSelector:Ia,EmptyState:Sa.A,ConfirmDialog:Pa},data(){return{loading:!0,page:null,editingTitle:!1,titleDraft:"",showBlockSelector:!1,showDeleteConfirm:!1,showBlockDeleteConfirm:!1,blockToDelete:null,blockIndexToDelete:null,blockTypes:[],isPremium:!1,limits:null,showToast:!1,toastMessage:"",toastAction:null,toastColor:"error"}},computed:{pageId(){return this.$route.params.id}},async mounted(){await this.loadData()},methods:{async loadData(){try{this.loading=!0;const[e,t,o]=await Promise.all([Gt.v0.getPage(this.pageId),Gt.v0.getBlockTypes(),Gt.eS.getLimits()]);this.page=e.data,this.blockTypes=t.data.blocks||[],this.limits=o.data,this.isPremium="PREMIUM"===this.limits.plan}catch(e){console.error("Failed to load page:",e),this.$router.replace({name:"pages"})}finally{this.loading=!1}},async refreshLimits(){try{const e=await Gt.eS.getLimits();this.limits=e.data,this.isPremium="PREMIUM"===this.limits.plan}catch(e){console.error("Failed to refresh limits:",e)}},goBack(){this.$router.push({name:"pages"})},goToPlans(){this.$router.push({name:"subscription-plans"})},startTitleEdit(){this.titleDraft=this.page?.title||"",this.editingTitle=!0,this.$nextTick(()=>{this.$refs.titleInput?.focus(),this.$refs.titleInput?.select()})},async saveTitle(){if(this.titleDraft.trim()||(this.titleDraft=this.page?.title||""),this.titleDraft===this.page?.title)return void(this.editingTitle=!1);const e=window.scrollX,t=window.scrollY;try{await Gt.v0.updatePage(this.pageId,{title:this.titleDraft.trim()}),this.page.title=this.titleDraft.trim()}catch(o){console.error("Failed to update title:",o)}this.editingTitle=!1,this.$nextTick(()=>{window.scrollTo(e,t)})},cancelTitleEdit(){this.editingTitle=!1},handleFabClick(){this.showBlockSelector=!0},async createBlock(e){if(this.showBlockSelector=!1,Wa.includes(e)&&this.limits&&!this.limits.canEditPremiumBlocks)return void this.displayToast({message:"Этот тип блока доступен с Premium подпиской.",color:"info",action:{text:"Узнать больше",onClick:()=>this.goToPlans()}});const t=this.getDefaultBlockPayload(e);try{const e=await Gt.xt.createBlock(this.pageId,t);this.page.blocks.push(e.data),await this.refreshLimits()}catch(o){console.error("Failed to create block:",o),this.handle403Error(o)}},getDefaultBlockPayload(e){switch(e){case"TEXT":case"PROS":case"CONS":return{type:e,textContent:""};case"HEADING":return{type:e,header:"",level:1};case"DIVIDER":return{type:e};case"CHECKLIST":return{type:e,items:[{text:"",status:!1}]};case"BULLET_LIST":return{type:e,items:[""]};case"KEY_VALUE":return{type:e,items:[{key:"",value:""}]};case"IDEA_CARD":return{type:e,problem:"",solution:"",audience:"",mvp:"",monetization:""};case"LINK":return{type:e,url:"",text:""};case"STATUS":return{type:e,status:"IDEA"};case"QUOTE":return{type:e,text:"",author:""};default:return{type:e}}},updateBlock(e,t){this.page.blocks[e]=t},deleteBlock(e,t){!this.limits||this.limits.canDeleteBlocks?(this.blockToDelete=e,this.blockIndexToDelete=t,this.showBlockDeleteConfirm=!0):this.displayToast({message:"Структура страницы заморожена. Оформите Premium для удаления блоков.",color:"warning",action:{text:"Оформить",onClick:()=>this.goToPlans()}})},async confirmDeleteBlock(){if(this.blockToDelete){try{await Gt.xt.deleteBlock(this.pageId,this.blockToDelete.id),this.page.blocks.splice(this.blockIndexToDelete,1),await this.refreshLimits()}catch(e){console.error("Failed to delete block:",e),this.handle403Error(e)}this.blockToDelete=null,this.blockIndexToDelete=null,this.showBlockDeleteConfirm=!1}},cancelDeleteBlock(){this.blockToDelete=null,this.blockIndexToDelete=null,this.showBlockDeleteConfirm=!1},async deletePage(){try{await Gt.v0.deletePage(this.pageId),this.$router.replace({name:"pages"})}catch(e){console.error("Failed to delete page:",e)}this.showDeleteConfirm=!1},displayToast({message:e,color:t="error",action:o=null}){this.toastMessage=e,this.toastColor=t,this.toastAction=o,this.showToast=!0},handle403Error(e){if(403!==e.response?.status)return;const t=e.reason||e.response?.data?.reason;switch(t){case"STRUCTURE_LOCKED":this.displayToast({message:"Структура заморожена. Оформите Premium для изменений.",color:"warning",action:{text:"Оформить",onClick:()=>this.goToPlans()}});break;case"PREMIUM_BLOCK_REQUIRED":this.displayToast({message:"Этот блок доступен с Premium подпиской.",color:"info",action:{text:"Узнать больше",onClick:()=>this.goToPlans()}});break;case"PREMIUM_BLOCK_READ_ONLY":this.displayToast({message:"Редактирование доступно с Premium.",color:"info",action:{text:"Оформить",onClick:()=>this.goToPlans()}});break;default:this.displayToast({message:e.response?.data?.message||"Нет доступа",color:"warning",action:{text:"Оформить",onClick:()=>this.goToPlans()}})}}}};const Va=(0,eo.A)(Xa,[["render",Mt],["__scopeId","data-v-eecde6b6"]]);var Na=Va}}]);
//# sourceMappingURL=page-detail.ad7bc1b9.js.map